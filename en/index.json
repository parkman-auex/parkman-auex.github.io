[{"categories":[],"content":"VASP 晶格常数优化\n状态方程(EOS) Birch-Murnaghan1 a relationship between the volume of a body and the pressure to which it is subjected.\n Birch proposed this equation based on the work of Francis Dominic Murnaghan of Johns Hopkins University published in 1944, so that the equation is named in honor of both scientists.\n $$E(V)=E_{0}+\\frac{9 V_{0} B_{0}}{16}\\left{\\left[\\left(\\frac{V_{0}}{V}\\right)^{\\frac{2}{3}}-1\\right]^{3} B_{0}^{\\prime}+\\left[\\left(\\frac{V_{0}}{V}\\right)^{\\frac{2}{3}}-1\\right]^{2}\\left[6-4\\left(\\frac{V_{0}}{V}\\right)^{\\frac{2}{3}}\\right]\\right}$$\nvaspkit EOS  [1]: Murnaghan EOS [2]: Birch-Murnaghan 3rd-order EOS [3]: Birch-Murnaghan 4th-order EOS [4]: Mie–Gruneisen [5]: Pack–Evans–James [6]: Poirier-Tarantola EOS [7]: Tait EOS [8]: Vinet EOS [9]: Natural strain 3rd-order EOS [10]: Natural strain 4th-order EOS [11]: Universal EOS [12]: Cubic polynomial in (V-V0)\n重复金刚石的例子 实验: A=3.57Å (300K)(3.56683 \\AA) 拟合区间影响很大，拟合方程选择不重要，VASP-D3,D2,PBE有不同 同时拟合也没有那么贴切\n下图也是把所有的拟合方法都尝试了一下子 当然原图也可以重复出来\n迭代法 我们计算资源充足，干脆不拟合了，换迭代法 按照VASP官方指导 我们设置 ISIF=4 The method we have used quite often in the past is to relax the structure (cell shape and internal parameters) for a set of fixed volumes .\n标准化POSCAR, 设POSCAR第二行的Scale系数为1\n代码\n1% matlab bash for run vasp 2warning off; 3tic; 4vasprun = \u0026#39;!mpirun -np 16 vasp_std \u0026gt;log 2\u0026gt;err\u0026#39;; 5format long; 6[Rm,sites,Atom_name,Atom_num,~,factor]=POSCAR_readin(\u0026#39;POSCAR\u0026#39;); 7natom = length(sites); 8V = abs(dot(Rm(:,3),cross(Rm(:,1),Rm(:,2))))*factor; 9fid = fopen(\u0026#39;matlabrun.log\u0026#39;,\u0026#39;w\u0026#39;); 10fprintf(fid,\u0026#39;Volume is :%6.5f \\\\AA ^3 \\n\u0026#39;,V); 11copyfile(\u0026#39;POSCAR\u0026#39;,\u0026#39;POSCAR.bk0\u0026#39;); 12copyfile(\u0026#39;POSCAR\u0026#39;,\u0026#39;POSCAR.bk\u0026#39;); 13copyfile(\u0026#39;POSCAR\u0026#39;,\u0026#39;POSCAR.bk_converge\u0026#39;); 14% INCAR.RELAX INCAR.static 1516% mkdir 17mkdir(\u0026#39;RELAX\u0026#39;); 18mkdir(\u0026#39;STATIC\u0026#39;); 19WORKDIR = pwd; 2021DecimalDepth = 3; 22Vnum = 11; 23BeginingCrange = [-0.1,0.1]; 24Width = (BeginingCrange(2)-BeginingCrange(1))/2; 25DepthBase = (Vnum-1)/2; 26lastVolume = 1; 27lastVrange = BeginingCrange+lastVolume; 28TOTVlist = zeros(DecimalDepth*Vnum,1); 29TOTElist = zeros(DecimalDepth*Vnum,1); 3031fid2 =fopen(\u0026#39;EvsV.dat\u0026#39;,\u0026#39;w\u0026#39;); 3233for j = 1:DecimalDepth 34Vrangej = lastVrange; 35TOTElistj = zeros(Vnum,1); 36TOTclistj = zeros(Vnum,1); 37count = 0; 38Vrange = linspace(Vrangej(1),Vrangej(2),Vnum); 39copyfile(\u0026#39;POSCAR.bk_converge\u0026#39;,\u0026#39;POSCAR.bk\u0026#39;); 40Emin = []; 41for v_i = Vrange 42count = count + 1; 43copyfile(\u0026#39;POSCAR.bk\u0026#39;,\u0026#39;POSCAR\u0026#39;); 44evalstring = [\u0026#39;!sed -i \u0026#34;2c \u0026#39;,num2str(v_i),\u0026#39;\u0026#34; POSCAR\u0026#39;]; 45[Rm,~,~,~,~,~] = POSCAR_readin(\u0026#39;POSCAR\u0026#39;,\u0026#39;digits\u0026#39;,10); 46Rstruct = park.Rm2abc(Rm*v_i); 47eval(evalstring); 48% cd RELAX 49cd(\u0026#39;RELAX\u0026#39;); 50!cp ../POSCAR ../POTCAR ../KPOINTS . 51!cp ../INCAR.RELAX ./INCAR 52eval(vasprun); 53!grep \u0026#39;free energy\u0026#39; OUTCAR |tail -n 1|awk \u0026#39;{print $5}\u0026#39; \u0026gt;tmpE.dat 54E_RELAX = importdata(\u0026#39;tmpE.dat\u0026#39;)/natom; 55% cd back 56cd(WORKDIR); 57% cd STATIC 58cd(\u0026#39;STATIC\u0026#39;); 59!cp ../RELAX/CONTCAR POSCAR 60!cp ../POSCAR ../POTCAR ../KPOINTS . 61!cp ../INCAR.STATIC ./INCAR 62eval(vasprun); 63!grep \u0026#39;free energy\u0026#39; OUTCAR |tail -n 1|awk \u0026#39;{print $5}\u0026#39; \u0026gt;tmpE.dat 64E_STATIC = importdata(\u0026#39;tmpE.dat\u0026#39;)/natom; 65if isempty(Emin) 66Emin = E_STATIC; 67!cp POSCAR ../POSCAR.bk_converge 68else 69if E_STATIC \u0026lt; Emin 70Emin = E_STATIC; 71!cp POSCAR ../POSCAR.bk_converge 72end 73end 74TOTElistj(count) = E_STATIC; 75[Rm_optimize,~,~,~,~,vfactor]= POSCAR_readin(\u0026#39;CONTCAR\u0026#39;,\u0026#39;digits\u0026#39;,10); 76Rstruct_optimize = park.Rm2abc(Rm_optimize*vfactor); 77% cd back 78cd(WORKDIR); 79fprintf(fid,\u0026#39;--- %s ---%2d-%2d [V:%7.5f E: %13.9f]\\n\u0026#39;,datetime,j,count,v_i^3,E_STATIC); 80fprintf(fid,\u0026#39;LatticeC: a b c alpha beta gamma \\n\u0026#39;); 81fprintf(fid,\u0026#39;%s %7.5f %7.5f %7.5f %7.5f %7.5f %7.5f\\n\u0026#39;,\u0026#39; init\u0026#39;,Rstruct.a,Rstruct.b,Rstruct.c,Rstruct.alpha,Rstruct.alpha,Rstruct.gamma); 82fprintf(fid,\u0026#39;%s %7.5f %7.5f %7.5f %7.5f %7.5f %7.5f\\n\u0026#39;,\u0026#39;converge\u0026#39;,Rstruct_optimize.a,Rstruct_optimize.b,Rstruct_optimize.c,Rstruct_optimize.alpha,Rstruct_optimize.alpha,Rstruct_optimize.gamma); 83% write data 84fprintf(fid2,\u0026#39;%7.5f %11.7f %13.9f \u0026#39;,v_i,v_i^3*V,E_STATIC); 85fprintf(fid2,\u0026#39;%7.5f %7.5f %7.5f %7.5f %7.5f %7.5f\\n\u0026#39;,Rstruct_optimize.a,Rstruct_optimize.b,Rstruct_optimize.c,Rstruct_optimize.alpha,Rstruct_optimize.alpha,Rstruct_optimize.gamma); 86end 87[Eminj,Eminseq] = min(TOTElistj); 88Vmin = Vrange(Eminseq); 89lastVolume = Vmin; 90VWidth = Width/DepthBase^j; 91lastVrange = [Vmin-VWidth,Vmin+VWidth]; 92TOTVlist(((j-1)*Vnum+1):j*Vnum) = Vrange; 93TOTElist(((j-1)*Vnum+1):j*Vnum) = TOTElistj; 94end 95fclose(fid); 96fclose(fid2); 97TOTVlist_r = (TOTVlist).^3*V/natom; 98save(\u0026#39;EvsC.mat\u0026#39;); 99toc; Diamond 迭代法与上树拟合差不太多\nGraphite 贝叶斯优化 VASP参数参考 VASP中与晶格常数优化相关的主要参数有 ISIF 以及 IBRION 重要的一点在于 ENCUT的设置\n Before you perform relaxations in which the volume or the cell shape is allowed to change you must read and understand the section on energy vs. volume, volume relaxations, and Pulay stress . In general volume changes should be done only with an increased energy cutoff, i.e., ENCUT=1.3×max(ENMAX) or PREC=High.\n   Pulay stress\n   ISIF    ISIF calculate degrees-of-freedom         forces Stress tensor positions cell shape cell volume   0 yes no yes no no   1 yes trace only yes no no   2 yes yes yes no no   3 yes yes yes yes yes   4 yes yes yes yes no   5 yes yes no yes no   6 yes yes no yes yes   7 yes yes no no yes       F. Birch, Finite Elastic Strain of Cubic Crystals, Phys. Rev. 71, 809 (1947).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Apr 14, 2022","img":"","permalink":"https://parkman.top/en/posts/dft/vasp-%E6%99%B6%E6%A0%BC%E5%B8%B8%E6%95%B0%E4%BC%98%E5%8C%96/","series":[],"tags":["VASP","DFT"],"title":"VASP 晶格常数优化"},{"categories":[],"content":"今天来学习一下 在服务器上搭建VASP-aiida 高通量计算\n什么是 aiida(挨打)  AiiDA是一个使用Python编写的开源复杂工作流设计和管理框架，旨在帮助从事计算科学（计算材料学，计算生物学等）的相关研究者可以更好的管理，编写，使用和分享复杂的工作流以及计算产生的有用数据。它使得在研究中复杂的计算流程的可重复性得以保证。\nAiiDA实现并支持了ADES 模式的四大基石： (A)utomation（自动）、 (D)ata（数据）、 (E)nvironment（社区环境）、和 (S)haring （分享） (请参考 论文)。AiiDA支持的一些典型特性包括：\n 工作流： AiiDA 可以用来创建并执行复杂的，自动文档化的工作流，来连接本地和远端计算资源上的多个计算代码。 高通量： AiiDA的基于事件的工作流引擎支持成百上千（每小时）的带有检查点的计算例程。 数据可验证性 AiiDA自动追踪所有可验证性图中(provenance graph) 的输入、输出和元数据，以保证计算的完全的可重复性。 高级的查询检索特性： AiiDA的查询语言支持快速的千万个节点的图查询。 插件接口： AiiDA 可以通过插件来支持各种计算代码，和各种数据分析工具，各种数据类型，任务调度工具以及远程连接方式等 (参见 公共插件库). 高性能集群接口： AiiDA支持无缝的把你的计算从一个集群转换到另一个集群运行。AiiDA 兼容各种任务调度软件 SLURM、 PBS Pro、 torque、 SGE 或者 LSF ，对这些任务调度工具AiiDA都是源生支持的。 开放科学： AiiDA可以将全部或部分的数据库导出，以便于和同行分享，或上传至 Materials Cloud 以变 归档 和 检索。   安装 aiida-vasp LINUX服务器下ANACONDA安装以及多用户共用虚拟环境 核心在共享目录   groupsadd anaconda usermod -G ........... gpasswd -a who anaconda gpasswd -A who anaconda chgrp -R anaconda /opt/anaconda3 # 移交目录管理权 chmod 770 -R /opt/anaconda # 设置读写权限 chmod g+s /opt/anaconda3 # 设置组继承 chmod g+s `find /opt/anaconda3/ -type d` # 设置子目录组继承 chmod g+w `find /opt/anaconda3/ -type d` # 设置子目录组继承 source /opt/anaconda/bin/activate3 conda create -n aiida-vasp python=3 source activate aiida-vasp conda install gcc_linux-64 gxx_linux-64 ipython  切回 普通用户 conda activate aiida-vasp\nInstall RabbitMQ AiiDA依赖于RabbitMQ。安装这个需要超级用户权限。\n安装和配置数据库 AiiDA依赖于PostgreSQL数据库。\n在AiiDA中配置数据库需要的是PostgreSQL数据库服务器的主机名或 IP 地址、用户名、密码、数据库名称和端口号。请注意，密码可能会被截获，因此请不要选择您通常用于高安全性服务的密码，即使它仅在您的本地计算机上使用。\nAiiDA使用psycopg2适配器从 Python 访问PostgreSQL数据库服务器。\n接下来的步骤分为PostgreSQL服务器的系统安装和特定于conda的安装 。如果您使用常规的 Python 虚拟环境，请遵循第一个，如果您更喜欢在Conda中工作，请遵循第二个。最后有一个通用部分描述了如何设置由PostgreSQL服务器服务的实际数据库。\n一般来说，我们假设我们将创建的数据库的用户与系统用户不相关\n initdb -D aiida-vasp-db  安装创建了用户postgres，您可以使用它来管理数据库、用户等。现在让我们添加数据库aiidadb和用户aiida，并为他们提供必要的权限和密码。首先，让我们进入PostgreSQL交互终端：\n1su - postgres 2psql 3# CREATE USER aiida WITH PASSWORD \u0026#39;\u0026lt;password\u0026gt;\u0026#39;; 4# CREATE DATABASE aiidadb OWNER aiida ENCODING \u0026#39;UTF8\u0026#39; LC_COLLATE=\u0026#39;en_US.UTF-8\u0026#39; LC_CTYPE=\u0026#39;en_US.UTF-8\u0026#39; TEMPLATE=template0;   ","date":"Apr 12, 2022","img":"","permalink":"https://parkman.top/en/posts/dft/vasp-aiida%E9%AB%98%E9%80%9A%E9%87%8F%E8%AE%A1%E7%AE%97/","series":[],"tags":["VASP","DFT"],"title":"VASP-Aiida高通量计算"},{"categories":[],"content":"interpn(https://ww2.mathworks.cn/help/matlab/ref/interpn.html ) 一个函数打天下 详见 https://ww2.mathworks.cn/help/matlab/math/interpolating-gridded-data.html?searchHighlight=interp2\u0026s_tid=srchtitle_interp2_2 说明 示例 Vq = interpn(X1,X2,\u0026hellip;,Xn,V,Xq1,Xq2,\u0026hellip;,Xqn) 使用线性插值返回 n 变量函数在特定查询点的插入值。结果始终穿过函数的原始采样。X1,X2,\u0026hellip;,Xn 包含样本点的坐标。V 包含各样本点处的对应函数值。Xq1,Xq2,\u0026hellip;,Xqn 包含查询点的坐标。\nVq = interpn(V,Xq1,Xq2,\u0026hellip;,Xqn) 假定一个默认的样本点网格。默认网格的每个维度均包含点 1,2,3,\u0026hellip;ni。ni 的值为 V 中第 i 个维度的长度。如果您希望节省内存且不在意点之间的绝对距离，则可使用此语法。\nVq = interpn(V) 将每个维度上样本值之间的间隔分割一次，形成优化网格，并在这些网格上返回插入值。\n示例 Vq = interpn(V,k) 将每个维度上样本值之间的间隔反复分割 k 次，形成优化网格，并在这些网格上返回插入值。这将在样本值之间生成 2^k-1 个插值点。\n示例 Vq = interpn(___,method) 指定备选插值方法：\u0026rsquo;linear\u0026rsquo;、\u0026rsquo;nearest\u0026rsquo;、\u0026lsquo;pchip\u0026rsquo;、\u0026lsquo;cubic\u0026rsquo;、\u0026lsquo;makima\u0026rsquo; 或 \u0026lsquo;spline\u0026rsquo;。默认方法为 \u0026rsquo;linear\u0026rsquo;。\n示例 Vq = interpn(___,method,extrapval) 还指定标量值 extrapval，此参数会为处于样本点域范围外的所有查询点赋予该标量值。\n如果您为样本点域范围外的查询省略 extrapval 参数，则基于 method 参数，interpn 返回下列值之一：\n对于 \u0026lsquo;spline\u0026rsquo; 和 \u0026lsquo;makima\u0026rsquo; 方法，返回外插值\n对于其他内插方法，返回 NaN 值\n","date":"Apr 7, 2022","img":"","permalink":"https://parkman.top/en/posts/matlab/advanced_use/interp/","series":[],"tags":["matlab"],"title":"Matlab 中的插值"},{"categories":[""],"content":"Follow 复旦大学Hspice简明教程（2007）\nHspice 分析方法  直流分析：包括非线性电路的直流分析  电路的直流工作点：分析时电路中的电感全部短路，电容全部开路，得到电路的每一节点的电流和电压（相对参考点）值。 直流小信号传输值：传输函数的直流小信号值为直流小信号工作下的输出变量和输入变量之比值，包括电路的输入电阻和输出电阻。 直流转移曲线：HSPICE可在用户指定的范围内，逐步改变指定的独立电压或电流源，对每一个电源值的变化，都得到储存的输出变量。 灵敏度分析：求出指定输出变量对于电路参数（包括电路中所有的元件，器件参数，直流电源的输入电平）的直流小信号灵敏度。 交流小信号分析：将交流输出变量作为频率的函数计算出来。先计算电路的直流工作点，决定电路中所有非线性器件的线性化小信号模型参数，然后在用户所指定的频率范围内对该线性化电路进行分析。 频域分析：在用户规定的频率范围内完成电路的交流分析。 噪声分析：HSPICE可计算每个频率点上总的输出噪声电平及其等效输入噪声电平。 失真分析：计算电路交流小信号工作下电路的失真特性，分析时是在输入端加有一个或两个频率的信号，在用户给定的输出负载电阻时，求出在该负载上的输出失真功率。   瞬态分析  瞬态响应：是从时间为零开始，到用户规定的时间范围内进行电路的瞬态特性分析。 傅立叶分析：可以对输出波形进行傅立叶分析，得到在用户指定的基频及时间间隔范围的傅立叶系数。   电路的温度特性分析：HSPICE在用户未说明时，是在27℃的标称温度下进行各种模拟的。当用户指定电路在什么温度下工作时，HSPICE也能进行不同温度下的电路特性分析，在温度低于-273℃时不予模拟  工作流程 简单例子 RC电路 一个有直流交流电压源的简单电阻电容网络，电路由电阻 R1 和 R2，电容 C1，电源 V1 构成。节点 1 连接电源正极和电阻 R1，节点 2 连接电阻 R1 和 R2，电容 C1，节点 0 在 Hspice 中默认为接地节点 输入\n1A SIMPLE AC RUN 2.OPTIONS LIST NODE POST 3.OP 4.AC DEC 10 1K 1MEG 5.PRINT AC V(1) V(2) I(R2) I(C1) 6V1 1 0 10 AC 1 7R1 1 2 1K 8R2 2 0 1K 9C1 2 0 .001U 10.END 运行后，目录中有 RC.ac0 RC.ic0 RC.lis RC.sp RC.st0\n RC.lis 文件记录了log信息 RC.st0  1wv RC.ac0 Transient analysis of a simple RC circuit 1EE105 SPICE Tutorial Example 1 - Simple RC Circuit 2vs vs gnd PWL(0s 0V 5ms 0V 5.001ms 5V 10ms 5V) 3r1 vs vo 1k 4c1 vo gnd 1uF 5.tran 0.01ms 10ms 6.option post=2 nomod 7.end  第 2-4 行包含电路拓扑的描述。在这种情况下，我们有三个节点：vs、vo 和 gnd。请注意，元素和节点可以具有相同的名称，因此第 2 行是完全合法的，即使它将称为 vs 的电压源连接到称为 vs 的电路节点。在某些电路中，您可能需要引⽤电压源或电路节点稍后在分析语句中，但上下⽂将始终清楚您指的是哪个，因此具有相同名称的源和节点永远不会引起歧义 节点 gnd 是用于参考点的标准名称。 也可以使用数字 0 来指代接地点（有些人喜欢给他们的节点编号而不是命名它们，在这种情况下，0 可能是更自然贴合）。 如果您再看⼀下第 3 行，您会发现在定义源 vs 时，我将节点 vs 放在第⼀位，然后将节点 gnd 放在第⼆位。在处理具有正极和负极端⼦的元件时，这是⼀个重要的区别。对于电阻器，例如第 3 行中的电阻器，我可以按任何顺序列出节点，⽽不会改变电路的行为。另请注意，源的值是⼀个复杂的 PWL表达式。请参阅本指南末尾的语法参考，您会发现这实际上是⼀个⾮理想的阶跃函数（线性上升超过 1 µs） 第5行是我们的第⼀个分析语句。它告诉 HSPICE 从时间t = 0 ms 到时间t = 10 ms 以0.01 ms的增量进行瞬态（即测量值作为时间的函数） 。当您之前模拟此电路时，您应该已经看到 vo 的曲线是由于阶跃函数输⼊⽽导致的电容器充电曲线。该分析语句允许您绘制节点 vo 的基于时间的分析。 第 6 行是您可以传递给 HSPICE 的选项列表。在这种情况下，我使⽤了两个选项：post=2 和 nomod。第⼀个，post=2，告诉 HSPICE 为 WaveView⽣成额外的⽂件以⽤于绘制数据。如果您不指定 post=2（实际上，您也可以指定 post=1 或 post=3差异对于我们的⽬的并不重要），您将⽆法在WaveView 中绘制数据。第⼆个选项 nomod 只是告诉 HSPICE 不要在输出⽂件中打印模型信息。虽然这对于本⽰例来说并不重要（因为我们没有包含任何模型），但当您处理可能有半⻚⻓的真实设备模型时，它会很有⽤  1hspice rccircuit.sp \u0026gt; rccircuit.lis 查看结果\n1***************************************************************** 2****** option summary 3****** 4runlvl = 3 bypass = 2.0000 5**info** dc convergence successful at Newton-Raphson method 61****** HSPICE -- L-2016.06-SP1 linux64 (Aug 24 2016) ****** 7****** 8ee105 spice tutorial example 1 - simple rc circuit 910****** operating point information tnom= 25.000 temp= 25.000 ****** 11****** operating point status is voltage simulation time is 0. 12node =voltage node =voltage 1314+0:vo = 0. 0:vs = 0. 151617***** job concluded 18****** 19ee105 spice tutorial example 1 - simple rc circuit 2021****** job statistics summary tnom= 25.000 temp= 25.000 ****** 222324****** Machine Information ****** 25CPU: 26model name : Intel(R) Xeon(R) CPU E5-2640 v4 @ 2.40GHz 27cpu MHz : 1200.000 2829OS: 30Linux version 3.10.0-1062.18.1.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) ) #1 SMP Tue Mar 17 23:49:17 UTC 2020 313233****** HSPICE Threads Information ****** 3435Command Line Threads Count : 1 36Available CPU Count : 40 37Actual Threads Count : 1 383940****** Circuit Statistics ****** 41# nodes = 3 # elements = 3 42# resistors = 1 # capacitors = 1 # inductors = 0 43# mutual_inds = 0 # vccs = 0 # vcvs = 0 44# cccs = 0 # ccvs = 0 # volt_srcs = 1 45# curr_srcs = 0 # diodes = 0 # bjts = 0 46# jfets = 0 # mosfets = 0 # U elements = 0 47# T elements = 0 # W elements = 0 # B elements = 0 48# S elements = 0 # P elements = 0 # va device = 0 49# vector_srcs = 0 # N elements = 0 505152****** Runtime Statistics (seconds) ****** 5354analysis time # points tot. iter conv.iter 55op point 0.00 1 1 56transient 0.00 1001 82 41 rev= 2 57readin 0.01 58errchk 0.00 59setup 0.01 60output 0.00 616263peak memory used 224.52 megabytes 64total cpu time 0.02 seconds 65total elapsed time 0.05 seconds 66job started at 20:41:05 03/27/2022 67job ended at 20:41:05 03/27/2022 686970lic: Release hspice token(s) 71lic: total license checkout elapse time: 0.03(s) Run WaveView by typing\n1cx 这将打开 CustomExplorer 控制台。接下来，单击Tools → WaveView\u0026hellip;打开 WaveView。 最后，点击File → Import Waveform File打开 rccircuit.tr0。这将在 WaveView 中打开您的瞬态结果 (.tr0)。稍后我们将详细介绍WaveView，但您可以通过在输出视图浏览器中选择DO:rccircuit.tr0并双击 vs 和 vo 以在图表中绘制它们来查看分析结果。 您可能已经能够从⽹表中猜到，但您会看到 vs 是阶跃函数输⼊，vo 是在应⽤阶跃函数时跨电容器的输出作为输⼊，曲线描述为$v_o(t) = v_s(1-e^{-t/RC}).\nOperating point analysis for a diode 1EE105 SPICE Tutorial Example 2 - Simple Diode Circuit 2.model tut_diode d (is=1e-14 vj=0.6 rs=10) 3vs vs gnd 5V 4rs vs vd 5k 5d1 vd gnd tut_diode 6.op 7.tran 0.01ms 10ms 8.option post=2 nomod 9.end  ⾸先，我们在第 2 行定义了⼀个名为 tut_diode 的模型。每当您在⽹表中使⽤⼆极管或晶体管时，模型都是必需的。该模型定义了与您指定的设备相关的某些参数。在本课程中，我们通常会为您提供您需要为 SPICE 模型定义的参数，⽽且我们的模型通常⾮常简单。 模型可以有⼏⼗个参数，⾮常详细。请注意，型号名称不能以 HSPICE 中的数字开头（例如，2N4401 将是⽆效名称，但 QN4401 将是有效型号名称）。 第 5 行显⽰了如何定义⼆极管。我们必须先指定正极端⼦，然后再指定负极端⼦。您还必须指定要使⽤的模型，在这种情况下，我使⽤的是我们刚刚在第 2 行中定义的模型。 第 6 行 .op 命令。该命令代表“⼯作点”，并告诉 HSPICE 计算每个节点的电压和通过电路中每个分⽀的电流。  模拟该电路并打开 SPICE 输出⽂件。滚动浏览此⽂件，直到看到⼀行显⽰“操作点信息”。在此之下，您应该看到电路中所有节点的列表（在这种情况下，我们只有两个节点）和这些节点的电压，以及电路中所有元件的列表以及相关的电压和电流与这些元素。我们可以读出我们感兴趣的⼯作点：vd 处的电压为655.8104 mV。\n1****** operating point information tnom= 25.000 temp= 25.000 ****** 2****** operating point status is all simulation time is 0. 3node =voltage node =voltage 45+0:vd = 655.8104m 0:vs = 5.0000 对比公式\n$$I_{S} e^{V_{D} / V_{T}}=\\frac{V_{S}}{R_{S}}-\\frac{1}{R_{S}} V_{D}$$\nDC analysis of a diode DC 分析使我们能够在扫描电压时测量电路中的值。例如，让我们再看看我们的⼆极管电路。与其在 5 V 时查看 vs 的 vd，也许我们希望将 vs 从 0 V 扫描到 5 V，然后查看 vd 结果如何变化。\n电路图和上节电路图一致\n1EE105 SPICE Tutorial Example 3 - Simple Diode Circuit 2.model tut_diode d (is=1e-14 vj=0.6 rs=10) 3vs vs gnd 5V 4rs vs vd 5k 5d1 vd gnd tut_diode 6.dc vs 0V 5V 0.01V 7.option post=2 8.option POST_VERSION=2001 9.end  ⾸先，请注意第 6 行，现在是 DC 分析.dc⽽不是⼯作点分析.op。在这种情况下，我们以0.01 V 的步⻓从 0 V 扫描到 5 V。 查看第 3 行，您可能会认为这与我已经放在那里的值相冲突；但是，当您对源进行 DC 分析时，它会忽略您之前为源提供的任何值。 第 7 行，因为我们将使⽤ WaveView 来查看 vd 与 vs 的图。模拟电路并在 WaveView 中打开它。  当然我们可以用matlab分析他们 AC analysis of a high-pass filter 1EE105 SPICE Tutorial Example 4 - Simple RC High-Pass Filter 2vs vs gnd ac 1V 3c1 vs vo 1nF 4r1 vo gnd 1k 5.ac dec 500 100 1G 6.option post=2 7.plot AC I(r1) VM(vo) VR(vo) VI(vo) VP(vo) VDB(vo) VT(vo) IT(r1) IM(r1) 8.end  第二行 ac。这告诉 HSPICE 应该通过改变这个源的频率来完成 AC 分析。如果您尝试在没有指定任何交流电源的情况下对电路进行交流分析，HSPICE 会给您⼀个错误 .ac 命令告诉 HSPICE 通过扫描您指定的 AC 源的频率来进行 AC 分析 ，告诉 HSPICE 是进行线性 (lin) 扫描、octaves (oct) 扫描还是decades (dec) 扫描 500 每个decades(10倍)取多少样本点，100 为起始频率，1G为终止  我们使用 Hspicelab 来处理数据\n模拟 ac_example.sp 后保存在 ac_example.ac0 文件中的 19 个信号被提取到 sim_results 变量中。 例如， sim_results(4).var_name=v(vo)_real 和 sim_results(4).var_name=v(vo)_imag 表示 sim_results(4).val 和 sim_results(5).val 包含sim_results(1).val计算不同频率下的输出电压。 同样 sim_results(16).var_name=vdb(vo) 表示 vo 幅度的 dB 值。 为了将该值与计算的实部和虚部信号分量进行比较，计算并相互匹配 vdB_manual 和 vdB_direct。\n后来，还绘制了输出电压的波特图 ，以显示高通滤波器的效果。 ","date":"Mar 27, 2022","img":"","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/hspice/hspicepractice1/","series":[],"tags":["hspice"],"title":"Hspice 学习"},{"categories":["拓扑电路"],"content":"本文将复现SSH模型\nSSH model 背景 SSH model 电路解析解 $\\mu ≡ C_0 +C_1 +C_2.$ 哈密顿量, 其色散关系为 $E_{k}=\\mu \\pm\\left|h_{+}\\right|=\\mu \\pm$ $\\sqrt{C_{1}^{2}+C_{2}^{2}+2 C_{1} C_{2} \\cos k}$.\nSSH 电路模型 元胞 我们这里设计两种元胞Pri0 和 Pri1\n Pri0 提供初始电压 并提供Solver Configuration（simscape 的要求，有且只有一个） Pri1 正常的元胞  以Pri0为例  浅紫色区域是两个不等价子格 AB 其在位能由CA,CB调节 V1 V2 是预置的电压测量工具 Hopping项由v和w两个电容所描述(单向！) 整个体系共两个电路接口(+ -) 以及四个信号输出(FrequencyA FrequencyB VoltageA VoltageB )  整合后的板子 测量电路 我们准备了该测量电路，测量20个sites的频谱（连入频谱分析仪），测量20个site的电压信号（连入示波器） 40个串口的连接很容易出错，排线要排很久\n然后我们10个元胞为一个block 构建80个元胞的长链 闭合回路 v = 1, w = 0.5 运行时间在2min, 对比该尺度的TB应该0.1s不到，但我们做拓扑电路只是做简单模型的对应，目前来看windows-i7单核+matlab，模型类的小型netlist电路都可以胜任，调参以及处理数据方便，可以作为前期的核心，后续可以用hspice对接再测。\n80组电压V(t)曲线画在一起\n一维傅立叶变换 可以得到v(w)曲线 首先高频也有很多峰值 -\u0026gt; 噪声的影响？\n低频也有峰值 我们在数据点中未扣除 充电阶段 可能又影响\n变换到k空间和解析频谱对应 闭合回路 v = 1, w = 2 开放电路 v = 1, w = 0.5/2 拓扑平庸与非平庸的情况对比 目前还不清楚 Edge态如何展现 临界点 v = 1, w = 1 HSPICE 复现SSH模型 电容初始化 C in out IC=1V 好像不work 最后用的节点电压\n瞬态分析+fft分析 1.ic v(n0) = 1 2.tran 0.01ms 1s 3.fft v(n0) 4.fft v(n1) 5.fft v(n2) 6.fft v(n3) 7.fft v(n4) 8.fft v(n5) 9.fft v(n6) 10.fft v(n7) 11.fft v(n8) 12.fft v(n9) 13.option post=2 HSPICE 子电路 1* SubCkt 2* 3* site:A 4.SubCkt E_A TONET TOGND VarC0=1m VarL0=1m InitV=0V 5C0 TONET TOGND VarC0 IC=InitV 6L0 TONET TOGND VarL0 7.ends E_A 8* 9* Primitive 10.SubCkt Pri IN OUT TOGND 11+ VarCO =1m VarL0 = 1m InitV = 0V C_v = 1m 12XA IN TOGND E_A 13CAB IN OUT C_v 14XB OUT TOGND E_A 15.ends Pri 16* 17* Pri w Hopping 18.SubCkt PriH IN OUT TOGND 19+ VarCO =1m VarL0 = 1m InitV = 0V C_v = 1m C_w = 2m 20Xpri N0 OUT TOGND Pri 21CBA IN N0 C_w 22.ends PriH 23* netlist 1* netlist 2X1 n0 n1 0 PriH 3X2 n1 n2 0 PriH 4X3 n2 n3 0 PriH 5X4 n3 n4 0 PriH 6X5 n4 n5 0 PriH 7X6 n5 n6 0 PriH 8X7 n6 n7 0 PriH 9X8 n7 n8 0 PriH 10X9 n8 n9 0 PriH 11X10 n9 n0 0 PriH 12* 结果 ","date":"Mar 25, 2022","img":"","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/sshmodel/","series":[],"tags":[""],"title":"拓扑电路入门学习-SSH Model"},{"categories":["拓扑电路"],"content":"本文将复现1D模型\nRC电路特征频率 搭建了震荡电路以及测量部分 通过频谱仪可以看出明显的尖峰 160Hz 这里 C0 = C1 = 1mF, L0 = 1mH, $\\omega_0 = (L0*C0)^{-1/2} = 1000Hz$, $f = \\omega_0/2\\pi \\sim 160 Hz$.\n两个元胞的周期性电路 利用子系统封装测量电路，同时把电路转化成netlist 这时 Y矩阵\n$$ \\begin{equation} \\begin{aligned} \u0026amp;\\hat{Y} \\boldsymbol{V}=\\frac{1}{\\omega^{2} L} \\boldsymbol{V}, \\newline \u0026amp;\\hat{Y}=\\left[\\begin{array}{cccc} y_{1} \u0026amp; -C_{12} \u0026amp; \\cdots \u0026amp; -C_{1 N} \\newline -C_{21} \u0026amp; y_{2} \u0026amp; \\cdots \u0026amp; -C_{2 N} \\newline \\vdots \u0026amp; \\vdots \u0026amp; \\ddots \u0026amp; \\vdots \\newline -C_{N 1} \u0026amp; -C_{N 2} \u0026amp; \\cdots \u0026amp; y_{N} \\end{array}\\right] \\newline \u0026amp;y_{\\alpha}=\\sum_{\\alpha^{\\prime}=1(\\neq \\alpha)}^{N} C_{\\alpha \\alpha^{\\prime}}+C_{\\alpha} \\end{aligned} \\end{equation} $$\n写为 $$ \\hat{Y}= \\left[\\begin{array}{cccc} C_0+C_1 \u0026amp; -C_{12} \\newline -C_{21} \u0026amp; C_0+C_1 \\end{array}\\right]=\\left[\\begin{array}{cccc} 2C_0\u0026amp; -C_{0} \\newline -C_{0} \u0026amp; 2C_0 \\end{array}\\right] $$\n其本征值为$[1,3]^T*C_0$, 后续为了简单，我们直接利用对本征值 $E = [E_1,E_2,\u0026hellip;,E_N]^T =\\frac{1}{\\omega^{2} L} $,得到 本征频率比例为 $E^{-1/2}$.\n按照推导，求解出的共振频率为 $[1.0000,0.5774]*160 = [160.0000,92.3760]Hz$\n而实际的结果 确实 70Hz 和 160Hz, 差距过大,不知为何\n四个元胞的周期性电路 此时我们进一步封装电路 四个元胞形成闭合回路 对角化矩阵 $$ \\hat{Y}= \\left[\\begin{array}{cccc} 3 \u0026amp; -1 \u0026amp;0 \u0026amp;-1 \\newline -1 \u0026amp; 3 \u0026amp;-1 \u0026amp; 0 \\newline 0 \u0026amp; -1 \u0026amp;3 \u0026amp;-1 \\newline -1 \u0026amp; 0 \u0026amp;-1 \u0026amp; 3 \\newline \\end{array}\\right] $$ 求解共振频率为 $\\left(\\begin{array}{cccc} 1 \u0026amp; \\frac{\\sqrt{3}}{3} \u0026amp; \\frac{\\sqrt{3}}{3} \u0026amp; \\frac{\\sqrt{5}}{5} \\end{array}\\right)*160 = (160.0000,92.3760,92.3760,71.5542)Hz$\n这个确实可以在频谱分析仪中得到验证 10个元胞的周期性电路 这次我们用了10个元胞，注意我们 pri0引用的子系统(接了Solve = 0)和1-9引用的子系统略有不同, 同时我们的局域变量空间中定义了C0,C1,L0 这三个参数，意味着我们可以全局调参。\n哈密顿量可以写为\n1c0 =1;c1 =1; 2H = diag(repmat(c0+2*c1,[10,1]))+diag(ones(9,1)*-c1,1)+diag(ones(9,1)*-c1,-1) 3H(1,10) = -c1 4H(10,1) = -c1 共振频率为 $$\\left(\\begin{array}{cccccccccc} 1 \u0026amp; \\frac{\\sqrt{5}}{5} \u0026amp; \\frac{1}{\\sqrt{\\frac{5}{2}-\\frac{\\sqrt{5}}{2}}} \u0026amp; \\frac{1}{\\sqrt{\\frac{5}{2}-\\frac{\\sqrt{5}}{2}}} \u0026amp; \\frac{1}{\\sqrt{\\frac{\\sqrt{5}}{2}+\\frac{5}{2}}} \u0026amp; \\frac{1}{\\sqrt{\\frac{\\sqrt{5}}{2}+\\frac{5}{2}}} \u0026amp; \\frac{1}{\\sqrt{\\frac{7}{2}-\\frac{\\sqrt{5}}{2}}} \u0026amp; \\frac{1}{\\sqrt{\\frac{7}{2}-\\frac{\\sqrt{5}}{2}}} \u0026amp; \\frac{1}{\\sqrt{\\frac{\\sqrt{5}}{2}+\\frac{7}{2}}} \u0026amp; \\frac{1}{\\sqrt{\\frac{\\sqrt{5}}{2}+\\frac{7}{2}}} \\end{array}\\right)*f_0$$ 有$[160.0,71.55,136.1(*2),84.12(*2),103.7(*2),74.45(*2)]$ 这些共振频率 这些共振频率我们在频谱中都可以看到 同时频谱会有个特殊规律 (注意我们初始电压放在Pri0的内部电容中)\n 对于特定位置(V0 V1 V4 V5 V6 V9) 其电压曲线v($\\omega$)的共振频率为 $[75,85,104,137,160]Hz$ 对于特定位置(V2 V3 V7 V8) 其电压曲线v($\\omega$)的共振频率为 $[72,85,104,137,160]Hz$  $\\omega$(k) ? 当元胞数趋于无穷时, 我们知道$E$=$C_0$+$2C_1$-$C_1e^{-idxk}$-$C_1e^{idxk}$ =$C_0$+$2C_1$ -$2C_1cos(dxk)$, 则有 $\\omega(\\bf{k})= (E*L_0)^{-1/2} = \\frac{\\omega_0}{\\sqrt{1+2-2cos(dxk)}}$\n 我们能否从我们的观测数据中通过傅立叶变换得到 $\\omega$(k)呢？ 定义 X = [0,1,2,3,4,5,6,7,8,9]; 一维离散傅立叶变换变换公式 $$ \\begin{equation} F(u)=\\sum_{n=0}^{N-1} \\widehat{f}(n) e^{-j 2 \\pi u(n+1)dx}dx \\end{equation} $$ 即 $$ \\begin{equation} \\omega(k)=\\sum_{n=0}^{N-1} \\widehat{w}(n) e^{-ik(n+1)} \\end{equation} $$ 取 $k =2\\pi(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,\u0026hellip;)$  按照 X = 0,1,2,3,4,5,6,7,8,9 的横向，t = 0:t_D 的纵向 把所有连入示波器的数据存储成为VOLTAGECAR 通过2Dfft二维傅立叶变换成色图\n1TEMPCAR = fft2(VOLTAGECAR); 2OkCAR = abs((TESTCAR(1:200,[1:10,1]))); 3OkCAR = abs((TESTCAR(1:200,[1:10,1]))); 4imagesc(OkCAR) 5axis square 与解析解$\\frac{160}{\\sqrt{3-2\\cos \\left(2\\pi\\frac{ {\\left(k-1\\right)}}{10}\\right)}}$画在一起\n注意这里略微的频移应该与imagese从1开始数有关（不然，貌似还有其他原因)，画图的细节后续再调\n","date":"Mar 24, 2022","img":"","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/1dsimplemodel/","series":[],"tags":[""],"title":"拓扑电路入门学习-1D Model"},{"categories":[""],"content":"本文对比下Spice文件的写法\nSpice1 1972年诞生于美国加利福尼亚大学 柏克莱分校的SPICE(Simulation Program with Integrated Circuit Emphasis)\nSpice 标准写法 A SPICE input file, called source file, consists of three parts.\n Data statements: description of the components and the interconnections. Control statements: tells SPICE what type of analysis to perform on the circuit. Output statements: specifies what outputs are to be printed or plotted.  1TITLE STATEMENT 2ELEMENT STATEMENTS 3. 4. 5COMMAND (CONTROL) STATEMENTS 6OUTPUT STATEMENTS 7.END \u0026lt;CR\u0026gt;   The first line of this file is used as a title on output files. It is not included in the circuit description. A common and frustrating error is caused by omitting the title.\n  The file must end with the command .END followed by a newline.\n  Comment entire lines by beginning them with an asterisk(*),eg. *comments åor the rest of a line by using a ’;’\n  Continue a statement on a new line with ’+’(一般一行最多只有80个字符)\n  SPICE uses only uppercase characters\n  Delimiter Spaces, commas, equal signs, left and right parentheses, etc. can be used as delimiters, extra delimiters are invalid.\nThe Circuit Description(netlist) The format of an element description is\n1\u0026lt;letter\u0026gt;\u0026lt;name\u0026gt; \u0026lt;n1\u0026gt; \u0026lt;n2\u0026gt; ...[mname] [parvals] where \u0026lt;...\u0026gt; must be present and [...] is optional.\n \u0026lt;letter\u0026gt; is a single letter denoting the component type \u0026lt;name\u0026gt; is a unique alpha-num combination describing the particular instance of this component \u0026lt;ni\u0026gt; is the name of a node. One node name has a defined meaning. Node 0 is ground! [mname] is the (optional) model name [parvals] are (sometimes optional) parameter values     首字母 电路元器件 首字母 电路元器件     B 砷化镓场效应管 L 电感   C 电容 M MOS场效应管   D 二极管 Q 双极型晶体管   E 电压控制电压源 R 电阻   F 电流控制电流源 S 电压控制开关   G 电压控制电流源 T 传输线   H 电流控制电压源 V 独立电压源   I 独立电流源 W 电流控制开关   J 结型场效应管 X 子电路   K 互感（耦合系数）      Sign Convention Two-terminal elements (including sources!) assume the “load” sign convention\nUnit The following abbreviations for powers of ten are recognized by spice .\n$$\\begin{array}{cccccccccc} \\text { F } \u0026amp; \\text { P } \u0026amp; N \u0026amp; U \u0026amp; \\text { M } \u0026amp; \\text { K } \u0026amp; \\text { MEG } \u0026amp; \\text { G } \u0026amp; \\text { T } \u0026amp; \\text { MIL } \\newline \\text { femto } \u0026amp; \\text { pico } \u0026amp; \\text { nano } \u0026amp; \\text { micro } \u0026amp; \\text { milli } \u0026amp; \\text { kilo } \u0026amp; \\text { mega } \u0026amp; \\text { giga } \u0026amp; \\text { tera } \u0026amp; \\text { mil }(10^{-3} \\text { inch }) \\newline 10^{-15} \u0026amp; 10^{-12} \u0026amp; 10^{-9} \u0026amp; 10^{-6} \u0026amp; 10^{-3} \u0026amp; 10^{+3} \u0026amp; 10^{+6} \u0026amp; 10^{+9} \u0026amp; 10^{+12} \u0026amp; 25.4 \\times 10^{-6} \\end{array}$$\nOnce a valid suffix is read, spice ignores following letters. Thus 10pF, 10pAmps, and 10psec all simply represent the value $10^{−12}$. MIL is used to convert distances in thousands of an inch, since spice uses metric lengths.\nPassive Elements The \u0026lt;letter\u0026gt; that begins an element instance denotes the circuit element. The passive elements are\nR or r for resistors, L or l for inductors, and C or c for capacitors.  This \u0026lt;letter\u0026gt; is followed by a unique instance name and then (in order) the nodes associated with + and - voltage and the value of the associated parameter (R, L, or C). Examples:\n R1 5 0 20k cload nIN GND 250pF L4 122 21 4mH  Independent Sources 1V\u0026lt;name\u0026gt; \u0026lt;n+\u0026gt; \u0026lt;n-\u0026gt; [type] \u0026lt;val\u0026gt; defines an independent voltage source with its + terminal at node n+ and its - node at node n-.\n1I\u0026lt;name\u0026gt; \u0026lt;n+\u0026gt; \u0026lt;n-\u0026gt; [type] \u0026lt;val\u0026gt; defines an independent current source whose current flows through the source from node n+ to node n-.\nExamples:\n Vdd 4 0 5 defines a 5 V source with the + terminal connected at node 4 and the - terminal connected at node 0 (ground) ibias 18 4 DC 15m V2 3 0 25V ( spice recognizes the common abbreviations for units, which helps to make source files more easily understood by humans.) The optional type argument will be described in the analysis commands  Voltage-Controlled Dependent Sources The voltage-controlled dependent sources are defined using statements of the form\n1\u0026lt;letter\u0026gt;\u0026lt;name\u0026gt; \u0026lt;nout+\u0026gt; \u0026lt;nout-\u0026gt; \u0026lt;nc+\u0026gt; \u0026lt;nc-\u0026gt; \u0026lt;gain\u0026gt; or\n1\u0026lt;letter\u0026gt;\u0026lt;name\u0026gt; \u0026lt;nout+\u0026gt; \u0026lt;nout-\u0026gt; (\u0026lt;nc+\u0026gt;,\u0026lt;nc-\u0026gt;) \u0026lt;gain\u0026gt; where E is a voltage-controlled voltage source, G is a voltage-controlled current source, the output voltage is connected between nodes nout+ and nout-, and the control voltage is measured at node nc+ with respect to node nc-.\nExamples:\n Ex 5 1 4 3 10 defines a voltage source that makes node 5 a voltage 10(v4 − v3) above the voltage at node 1 G1 2 1 (5,8) 50m defines a current source connected between node 2 (the + node) and node 1 and supplying a current 50 mOhm^-1(v5 − v8)  Current-Controlled Dependent Sources  Diodes  Bipolar Junction Transistors  MOSFETs  Subcircuits A subcircuit simplifies spice netlists by allowing re-use of a set of circuit elements. The syntax is\n1SUBCKT \u0026lt;SubName\u0026gt; \u0026lt;N1\u0026gt; \u0026lt;N2\u0026gt; ... 2... 3.ENDS The SubName is the name used to reference the subcircuit, and the nodes are the internal node numbers used to connect to the subcircuit.\n A subcircuit can contain any spice netlist statements, including .model statements and other subcircuits. Any elements, nodes, models, subcircuits, or definitions in the subcircuit are completely local to the subcircuit.  Hspice Hspice 可在直流到100GHz的频率范围内对电路进行准确的仿真、分析及优化。其主要特征如 下:\n 极佳的收敛性。 精确的模型。 对模型及单元的电路优化，可同步优化多种参数。 支持蒙特卡罗和最差情况分析。 参数化单元的输入、输出及行为级代数描述。  Hspice 子电路 子电路定义声明 .subckt 或.macro\n语法： .SUBCKT subnam n1 \u0026lt; n2 n3 \u0026hellip;\u0026gt; \u0026lt; parnam=val \u0026hellip;\u0026gt; 或 .MACRO subnam n1 \u0026lt; n2 n3 \u0026hellip; \u0026gt; \u0026lt; parnam=val \u0026hellip;\u0026gt; 说明：\n subnam 子电路名。 n1,n2\u0026hellip; 子电路接口节点名。 parnam=val 子电路参数，应指定初值。  子电路定义结束声明 .ends 或.eom  子电路调用声明 语法： Xyyy n1 \u0026lt;n2 n3 \u0026hellip;\u0026gt; subnam \u0026lt;parnam=val \u0026hellip;\u0026gt; \u0026lt;M=val\u0026gt;\n Xyyy 子电路名，必须以“X”开始。 n1,n2\u0026hellip; 子电路连接到的外部节点。 subnam 所调用的子电路名。 parnam=val 为调用的子电路参数赋值。  例子 下面例子定义了两个子电路sub1和sub2 都是将电阻值参数化的电阻分压网络， 其中子电路 sub1 的定义中调用了子电路 sub2。x1,x2,x3 声明调用了这些子电路，由于 每次调用都为电阻赋了不同的值，三次调用产生了不同的子电路。\n1*FILE SUB2.SP TEST OF SUBCIRCUITS 2.OPTIONS LIST ACCT 3* 4V1 1 0 1 5.PARAM P5=5 P2=10 6* 7.SUBCKT SUB1 1 2 P4=4 8R1 1 0 P4 9R2 2 0 P5 10X1 1 2 SUB2 P6=7 11X2 1 2 SUB2 12.ENDS 13* 14.MACRO SUB2 1 2 15P6=11 16R1 1 2 P6 17R2 2 0 P2 18.EOM 19* 20X1 1 2 SUB1 P4 =6 21X2 3 4 SUB1 P6=15 22X3 3 4 SUB2 23* 24.MODEL DA D CJA=CAJA CJP=CAJP VRB=-20 IS=7.62E-18 25+ PHI=.5 EXA=.5 EXP=.33 * 26.PARAM CAJA=2.535E-16 CAJP=2.53E-16 27.END 子电路节点调用   表示子电路中的器件，将电路层次以“.”连接： 如：X1.XBIAS.M5\n  表示子电路中的节点： 如：.PRINT v(X1.X4.sig25) ，sig25是子电路x4中的节点。\n  其他声明 .global 声明 .global全局性地定义节点名，不管处于电路中的什么层次上，只要与.global中定义的节点名称相同，他们就连接在一起。 .global通常用来定义电源连接。\n例： .GLOBAL VDD input_sig\n电路中所有与VDD重名的节点都连接在一起，所有与input_sig重名的节点也连接在 一起。\n.temp 声明 声明电路运行的温度。默认为 25°C。 例：.TEMP -55.0 25.0 125.0\n.data 声明 可用于.dc,.ac,.tran 等分析中的参数扫描，.data 可定义任意数目的参数，使用的参数必须事先定义，\n.data 可定义三种数据\n 网表内数据(inline data) 外部文件串接数据(data concatenated from external files) - 外部文件并接数据(data column laminated from external files)  这里只介绍网表内数据的定义 语法： .DATA datanm pnam1 \u0026lt;pnam2 pnam3 \u0026hellip; pnamxxx \u0026gt; + pval1\u0026lt;pval2 pval3 \u0026hellip; pvalxxx\u0026gt; + pval1’ \u0026lt;pval2’ pval3’ \u0026hellip; pvalxxx’\u0026gt; .ENDDATA 说明：\n Datanm 数据名，供仿真分析中调用使用。 pnam1\u0026hellip; 参数名。 pval1\u0026hellip; 参数值，可以有很多组。 例子：  1.TRAN 1n 100n SWEEP DATA=devinf 2.AC DEC 10 1hz 10khz SWEEP DATA=devinf 3.DC TEMP -55 125 10 SWEEP DATA=devinf 4.DATA devinf width length thresh cap 5+ 50u 30u 1.2v 1.2pf 6+ 25u 15u 1.0v 0.8pf 7+ 5u 2u 0.7v 0.6pf 8+ ... ... ... ... 9.ENDDATA 上面的分析中.data 定义了网表内数据 devinf，由于 Hspice 根据.data 中使用的参数 数目，自动对数据分组，并给参数赋值，因此像例子中将数据与参数对准并非必要。上 例中也说明了.data 定义的数据调用的方式，即用 data=dataname 的方式，扫描时参数 值一组组地采用。\n.include 声明 .model 声明 .lib .alter 仿真设置 输出设置 交流分析 统计分析 蒙特卡洛 .inc Pspice LTspice 转化   Nagel, L. W, and Pederson, D. O., SPICE (Simulation Program with Integrated Circuit Emphasis), Memorandum No. ERL-M382, University of California, Berkeley, Apr. 1973 具体看看 Spice 简史 \u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Mar 22, 2022","img":"https://s2.loli.net/2022/03/22/uCeEK2p586Fy1rt.png","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/hspice/spicegrammer/","series":[],"tags":["hspice"],"title":"Spice网格文件写法对比"},{"categories":["拓扑电路"],"content":" Solving a set of equations that represents a circuit is straightforward, if not always easy. However, developing that set of equations is not so easy. SCAM (Symbolic Circuit Analysis in MatLab)是一个适合初学者学习电路的求解工具 MATLAB fileExchange 有另一个人写了ObjectSCAM ，用起来会更加方便 我们将通过Simscape建模，以及SCAM求解来 理解这些基本电路；最后如过可能 转化成hspice输入检查结果\n Solving a Cicuit Model  loop-current (or mesh) method node voltage (or nodal) method Modified Nodal Analysis  Node Voltage Method1  Selective a reference node (usually ground). Name the remaining n-1 nodes and label a current through each passive element and each current source. Apply Kirchoff\u0026rsquo;s current law to each node not connected to a voltage source. Solve the system of n-1-m unknown voltages.  Mesh Current Method1 We will define a \u0026ldquo;mesh\u0026rdquo; as an open \u0026ldquo;window\u0026rdquo; in the schematic drawing. Note that this method requires some modification to work with \u0026ldquo;non-planar\u0026rdquo; circuits (non-planar circuits are those that cannot be drawn without wires that cross each other without touching).\n Define each mesh and its corresponding current. This is easiest with a consistent method, e.g. all unknown currents are clockwise, all know currents follow direction on current source. Apply Kirchoff\u0026rsquo;s voltage law to each loop not containing a current source. Solve the system of n-m unknown voltages.  Comparsion of Node Voltage Method \u0026amp; Mesh Current Method  made on the basis of the circuit at hand. Depend on the number of non-current meshs and independent nodes.\n modified nodal analysis (MNA) method - SCAM adapted2  Selective a reference node (usually ground) and name the remaining n-1 nodes. Also label currents through each current source. Assign a name to the current through each voltage source. We will use the convention that the current flows from the positive node to the negative node of the source. Apply Kirchoff\u0026rsquo;s current law to each node. We will take currents out of the node to be positive. Write an equation for the voltage each voltage source.Solve the system of n-1 unknowns.  Summarize MNA applied to a circuit with only passive elements (resistors) and independent current and voltage sources results in a matrix equation of the form:$\\mathbf(Ax= z)$\nFor a circuit with n nodes and m independent voltage sources:\n The A matrix:  is (n+m)×(n+m) in size, and consists only of known quantities. the n×n part of the matrix in the upper left:  has only passive elements elements connected to ground appear only on the diagonal elements not connected to ground are both on the diagonal and off-diagonal terms.   the rest of the A matrix (not included in the n×n upper left part) contains only 1, -1 and 0 (other values are possible if there are dependent current and voltage sources; I have not considered these cases. Consult Litovski if interested.)   The x matrix:  is an (n+m)×1 vector that holds the unknown quantities (node voltages and the currents through the independent voltage sources). the top n elements are the n node voltages. the bottom m elements represent the currents through the m independent voltage sources in the circuit.   The z matrix:  is an (n+m)×1 vector that holds only known quantities the top n elements are either zero or the sum and difference of independent current sources in the circuit. the bottom m elements represent the m independent voltage sources in the circuit. The circuit is solved by a simple matrix manipulation:$\\mathbf{x = A^{-1}z}$    Algorithmic method for generating MNA (Modified Nodal Analysis) equations see https://lpsa.swarthmore.edu/Systems/Electrical/mna/MNA3.html Reactive Circuits and OpAmps3 Algorithmic method for generating modified nodal analysis (MNA) equations when the circuit has inductors, capacitors and/or operational amplifiers (op-amps).\nApplying modified nodal analysis to circuits with inductors and capacitors presents no special difficulty if one uses the complex impedance of these elements.\n$$ \\begin{aligned} \u0026amp;Z_{R}=R \\newline \u0026amp;Z_{L}=s L=j \\omega L \\newline \u0026amp;Z_{C}=\\frac{1}{s C}=\\frac{1}{j \\omega C} \\end{aligned} $$\nMNA with Op Amps  Applying modified nodal analysis to circuits with ideal operational amplifiers (op- amps) is a bit more difficult.\n The equation for the op-amp is not in terms of the voltage at its output, but rather it specifies that the two input terminals are at the same potential.\n ??\nTreatment for Source! Example Example01 Netlist  V1 1 0 32 V2 3 0 20 R1 1 2 2 R2 2 3 4 R3 2 0 8  模拟结果 电流 电压 手解(Node Voltage Method) Apply KCL $$ \\begin{equation} \\begin{aligned} i_{1}+i_{2} \u0026amp;=i_{3} \\newline i_{1} \u0026amp;=\\frac{v_{a}-v_{b}}{R_{1}}, \\quad i_{2}=\\frac{v_{c}-v_{b}}{R_{2}}, \\quad i_{3}=\\frac{v_{b}}{R_{3}} \\newline v_{a} \u0026amp;=V_{1}, \\quad v_{c}=V_{2} \\end{aligned} \\end{equation} $$\n$$ \\begin{equation} \\begin{aligned} \\frac{v_{a}-v_{b}}{R_{1}}+\\frac{v_{c}-v_{b}}{R_{2}} \u0026amp;=\\frac{v_{b}}{R_{3}} \\newline \\frac{V_{1}-v_{b}}{R_{1}}+\\frac{V_{2}-v_{b}}{R_{2}} \u0026amp;=\\frac{v_{b}}{R_{3}} \\end{aligned} \\end{equation} $$\nwe have $v_b = 24$\n手解(Mesh Current Method) Apply KVL\n$$ \\begin{aligned} \u0026amp;V_{1}-i_{1} R_{1}-\\left(i_{1}-i_{2}\\right) R_{3}=0 \\newline \u0026amp;\\left(i_{1}-i_{2}\\right) R_{3}-i_{2} R_{2}-V_{2}=0 \\end{aligned} $$\n$$ \\begin{array}{r} \\left(R_{1}+R_{3}\\right) i_{1}-R_{3} i_{2}=V_{1} \\newline -R_{3} i_{1}+\\left(R_{2}+R_{3}\\right) i_{2}=V_{2} \\end{array} $$\n$$ \\left[\\begin{array}{cc} \\left(R_{1}+R_{3}\\right) \u0026amp; -R_{3} \\newline -R_{3} \u0026amp; \\left(R_{2}+R_{3}\\right) \\end{array}\\right]\\left[\\begin{array}{l} i_{1} \\newline i_{2} \\end{array}\\right]=\\left[\\begin{array}{l} V_{1} \\newline V_{2} \\end{array}\\right] $$ we have $i_1 = 4,i_2 =1$\n手解(MNA)- adapted in SCAM  Apply step 2 (currents through the voltage sources with current from positive node to negative node)  Apply step 3 (with positive currents out of the node):  Node 1: $i_{v 1}+\\frac{v_{1}-v_{2}}{R_{1}}=0$ Node 2: $\\frac{v_{2}-v_{a}}{R_{1}}+\\frac{v_{b}}{R_{3}}+\\frac{v_{2}-v_{3}}{R_{2}}=0$ Node 3: $i_{v 2}+\\frac{v_{1}-v_{2}}{R_{2}}=0$   Apply step 4:  $v_1 = V_1$ $v_3 = V_2$   Apply step 5: $$ \\left[\\begin{array}{ccccc} \\frac{1}{R_{1}} \u0026amp; -\\frac{1}{R_{1}} \u0026amp; 0 \u0026amp; 1 \u0026amp; 0 \\newline -\\frac{1}{R_{1}} \u0026amp; \\frac{1}{R_{1}}+\\frac{1}{R_{2}}+\\frac{1}{R_{3}} \u0026amp; -\\frac{1}{R_{2}} \u0026amp; 0 \u0026amp; 0 \\newline 0 \u0026amp; -\\frac{1}{R_{2}} \u0026amp; \\frac{1}{R_{2}} \u0026amp; 0 \u0026amp; 1 \\newline 1 \u0026amp; 0 \u0026amp; 0 \u0026amp; 0 \u0026amp; 0 \\newline 0 \u0026amp; 0 \u0026amp; 1 \u0026amp; 0 \u0026amp; 0 \\end{array}\\right]\\left[\\begin{array}{c} v_{a} \\newline v_{b} \\newline v_{c} \\newline i_{v 1} \\newline i_{v 2} \\end{array}\\right]=\\left[\\begin{array}{c} 0 \\newline 0 \\newline 0 \\newline V 1 \\newline V 2 \\end{array}\\right] $$  Solved by SCAM I fixed a little bug when applying this class under the version MATALB R2022a.\n1Cir_01 = ObjectSCAM; 2Cir_01 = Cir_01.create(\u0026#39;example1.cir\u0026#39;); 3Cir_01 Cir_01 =  ObjectSCAM - 属性:\nnetlist: {5×4 cell} R3: 8 V1: 32 R2: 4 I_V2: -(R1*V2 - R3*V1 + R3*V2)/(R1*R2 + R1*R3 + R2*R3) v_2: (R3*(R1*V2 + R2*V1))/(R1*R2 + R1*R3 + R2*R3) v_3: V2 I_V1: -(R2*V1 + R3*V1 - R3*V2)/(R1*R2 + R1*R3 + R2*R3) v_1: V1 V2: 20 R1: 2  我们可以求解对象\n1Cir_01.resolveVar(\u0026#39;v_2\u0026#39;) ans = 2  1Cir_01.resolveEq(\u0026#39;(v_1-v_2)/R1\u0026#39;) 2Cir_01.resolveVar(\u0026#39;(v_1-v_2)/R1\u0026#39;) ans = V1/2 - (R3*(R1*V2 + R2*V1))/(2*(R1*R2 + R1*R3 + R2*R3)) ans = 4  Example02 RLC Example03 RCL with Op Simulation in Hspice   G. Rizzoni and J. Kearns, Principles and Applications of Electrical Engineering (2022).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Linear Circuit Analysis: Time Domain, Phasor and Laplace Transform Approaches, Oxford University Press , 2001.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Litovski, V, Zwolinski, M, VLSI(Very large-scale integration) Circuit Simulation and Optimization, Kluwer Academic Publishers, 1997. Modified Nodal Analysis and Computer Simulation.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Mar 21, 2022","img":"","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/scam/","series":[],"tags":["hspice"],"title":"拓扑电路入门学习-Scam"},{"categories":["拓扑电路"],"content":"准备尝试一下简单的电路。 安装matlab-\u0026gt;打开simulink-\u0026gt;simscape-\u0026gt;学习-\u0026gt;电路模拟 开始两个小时的愉快的学习之路吧\nMatlab 简单学习 CircuitSimulationOnramp 界面设计的漂亮 左边是任务详细说明 第一关提交即可 包含一个高频低压以及一个低频高压的交流电源，两个50欧姆的电阻，一个53毫亨，两个10.6微法的电容 这个电路 下面是我们的模拟信号 RC and RLC Circuits 搭建模型 在模型库里选择即可搭出这个简单的模型 RLS circuits response 引入一个阶跃信号 会有一个RLC震荡衰减信号 AC source 不得不说 matlab是真的强 Noliner Elements 经典桥式电路 模拟信号起到了全是正向电流的效果 加上变压器 加上安全措施 这就是经典的手机充电器原理图，后续我们可以从已知的氮化镓的电路图下载spice模型 仿真 Op Amps 方波 Filter 连上示波器 the wein bridge oscillator ","date":"Mar 21, 2022","img":"","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/simplecircuits/","series":[],"tags":[""],"title":"拓扑电路入门学习-简单电路的matlab模拟"},{"categories":["拓扑电路"],"content":"本文打算Follow武汉大学余睿老师的综述 电路中的拓扑态 , 以及他的讲座 在电路中设计新拓扑物态 一些关键的概念需要掌握: 线性电子线路 电路理论(电势运动方程，拉普拉斯矩阵方程) 基尔霍夫方程与TB模型的对应(Onsite energy, hopping, SOC)，基尔霍夫方程的求解, 具体Hspice的模拟我们另开新帖。\n概念的阐释 线性电路 线性电路是指完全由线性元件、独立源或线性受控源构成的电路。(来自百度百科 )\nLinear circuit : an electronic circuit which obeys the superposition principle(for all linear systems, the net response caused by two or more stimuli is the sum of the responses that would have been caused by each stimulus individually.) $$F\\left(a x_1+b x_2\\right)=a F\\left(x_1\\right)+b F\\left(x_2\\right)$$\n线性元件  ideal resistors ideal capacitors ideal inductors op-amps(operational amplifier)  非线性元件 线性电路的组成单元为线性元件(An element is linear if and only if the terminal voltage v and terminal current i, together with the initial condition, if any, satisfy the homogeneity and additivity properties in the equation that defines the element,就是元件满足线性欧姆定律):\n diodes  transistors  iron core inductors transformers when the core is saturated.  常见线性电路  放大电路 积分电路 差分电路 滤波器  电势运动方程 并没有明确告诉我们电势运动方程是什么，猜测是以基尔霍夫电势方程为基石的运动方程 The fundamental assumption of circuit theory is that the voltages satisfy Kirchhoff’s voltage law (KVL) and the currents satisfy Kirchhoff’s current law (KCL).\n KVL KCL  拉普拉斯矩阵方程 基尔霍夫方程与TB模型的对应1 a little example mesh current method Complex currents $\\tilde{J}_1$ and $\\tilde{J}_2$ circulate along the two directed meshes $\\alpha_1$ and $\\alpha_2$. $\\tilde{V}_1$ (Q and G)and $\\tilde{V}_2$\nHereby: We can represent them by the vector $\\tilde{\\boldsymbol{J}}=\\left[\\tilde{J}_1,\\tilde{J}_2\\right]^{T}$. The voltage drops along $\\alpha_1, \\alpha_2$ are denoted by $\\tilde{\\boldsymbol{V}}=\\left[\\tilde{V}_1,\\tilde{V}_2\\right]^{T}$. The voltage drop vector $\\tilde{\\boldsymbol{V}}$ and the mesh current vector $\\tilde{J}$ are related as $\\tilde{\\boldsymbol{V}}=Z(\\omega) \\tilde{\\boldsymbol{J}}$\n$$ Z(\\omega)=\\left[\\begin{array}{cc} \\mathrm{j} \\omega L+1 /\\left(\\mathrm{j} \\omega C_{\\mathrm{t}}\\right) \u0026amp; -1 /\\left(\\mathrm{j} \\omega C^{\\prime}\\right) \\newline -1 /\\left(\\mathrm{j} \\omega C^{\\prime}\\right) \u0026amp; \\mathrm{j} \\omega L+1 /\\left(\\mathrm{j} \\omega C_{\\mathrm{t}}\\right) \\end{array}\\right] $$\nDue to the KVL, $\\tilde{\\boldsymbol{V}}$ must be zero, We have $detZ(\\omega) = 0$\nelectrical node potentials $$ Y(\\omega)=\\left[\\begin{array}{ccc} \\mathrm{j} \\omega C+1 /(\\mathrm{j} \\omega L) \u0026amp; -\\mathrm{j} \\omega C \u0026amp; 0 \\newline -\\mathrm{j} \\omega C \u0026amp; 2 \\mathrm{j} \\omega C+\\mathrm{j} \\omega C^{\\prime} \u0026amp; -\\mathrm{j} \\omega C \\newline 0 \u0026amp; -\\mathrm{j} \\omega C \u0026amp; \\mathrm{j} \\omega C+1 /(\\mathrm{j} \\omega L) \\end{array}\\right] $$\nMNA General analysis the resonance condition and show the analogy between electrical circuits and quantum tight-binding models in solid-state physics.\nResonant circuits with inductances Resonant circuits with mutual inductances For this circuit network, $$ \\begin{aligned} \\hat{Z}(\\omega)=\u0026amp; \\sum_{i}\\left(\\mathrm{j} \\omega L_{i}+\\frac{1}{\\mathrm{j} \\omega C}\\right)\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{i}\\right| \\newline \u0026amp;+\\mathrm{j} \\omega \\sum_{i} \\sum_{i \\neq i} M_{i j}\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{j}\\right| \\end{aligned} $$\nthen $j\\omega C\\hat{Z}|\\Psi\\rangle\u0026gt; = 0$\n$$ \\begin{aligned} j\\omega C \\hat{Z}(\\omega)=\u0026amp; \\sum_{i}\\left( \\xi_{i} \\mathrm{j}^2 (\\omega/\\omega_0)^2 +1\\right)\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{i}\\right| \\newline \u0026amp;+\\mathrm{j}^2 \\omega^2 C \\sum_{i} \\sum_{i \\neq i} M_{i j}\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{j}\\right| \\end{aligned} $$\nthen $(\\frac{\\omega_0}{\\omega j})^2j\\omega C\\hat{Z}|\\Psi\\rangle = 0$\n$$ \\begin{aligned} (\\frac{\\omega_0}{\\omega j})^2 j\\omega C \\hat{Z}(\\omega)=\u0026amp; \\sum_{i}\\left( \\xi_{i} +(\\frac{\\omega_0}{\\omega})^2\\right)\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{i}\\right| \\newline \u0026amp;+ \\sout{(\\omega^2/\\omega_0^2)}/L \\sum_{i} \\sum_{i \\neq i} M_{i j}\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{j}\\right| \\end{aligned} $$\nWe have\n$$ \\begin{aligned} \u0026amp;\\hat{K}|\\Psi\\rangle=\\left(\\frac{\\omega_{0}}{\\omega}\\right)^{2}|\\Psi\\rangle \\newline \u0026amp;\\hat{K}=\\sum_{i} \\xi_{i}|\\alpha_{i}\\rangle\\langle\\alpha_{i}|-\\sum_{i} \\sum_{j \\neq i} \\kappa_{i j}| \\alpha_{i}\\rangle\\langle\\alpha_{j}| \\end{aligned} $$\nwhere $\\omega_0 = 1/\\sqrt{LC}$, $\\xi_{i}=L_i/L$ and $\\kappa_{ij} = - M_{ij}/L$\nThen $\\hat{K}$ can be interpreted as a Hamiltonian: $$\\hat{K}|\\Psi\\rangle= = \\hat{H}|\\Psi\\rangle = E|\\Psi\\rangle=\\left(\\frac{\\omega_{0}}{\\omega}\\right)^{2}|\\Psi\\rangle$$\nResonant circuits with coupling inductances We now consider resonant circuits, composed of an inductance Li and a capacitance C connected in parallel to $\\pi$i, as shown in Fig. 2(b). $$ \\begin{aligned} \\hat{Y}(\\omega)=\u0026amp; \\sum_{i}\\left(\\frac{1}{j \\omega L_{i}}+\\mathrm{j} \\omega C\\right)\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}\\right| \\newline \u0026amp;+\\sum_{i} \\sum_{j \\omega L_{i j}}\\frac{1}{j \\omega L_{ij}}\\left(\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}|-| \\pi_{i}\\right\\rangle\\left\\langle\\pi_{j}\\right|\\right) \\end{aligned} $$\nIntroducing an inductance L for nondimensionalization, we rewrite the equation $(\\frac{\\omega_0}{\\omega j})^2j\\omega L\\hat{Y}|\\Psi\\rangle = 0$ as follows: $$ \\hat{K}|\\Psi\\rangle=\\left(\\frac{\\omega}{\\omega_0}\\right)^{2}|\\Psi\\rangle $$\nThe quadratic frequency dependence is also different from that of the quantum tight-binding model.  1-D example 1-D Resonant circuits with mutual inductances $$ \\hat{Z}(\\omega)=\\left(j \\omega L+\\frac{1}{j \\omega C}\\right) \\hat{1}+j \\omega M \\sum_{i \\in \\mathbb{Z}}\\left(\\left|\\alpha_{i-1}\\right\\rangle\\left\\langle\\alpha_{i}|+| \\alpha_{i+1}\\right\\rangle\\left\\langle\\alpha_{i}\\right|\\right) $$\nHere, we construct $\\hat{K}^{(\\mathrm{p})}=\\sum_{i} \\xi_{0}\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{0}\\right|$, $\\xi_0= 1$, $\\hat{K}^{(\\mathrm{h})}=-\\sum_{i} \\sum_{j \\neq i} \\kappa \\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{j}\\right|$\n$$H(k) =\\xi_{0} + e^{ik\\Delta x}\\kappa + e^{-ik\\Delta x}\\kappa$$\n$$H(k) = \\xi_{0}+ 2cos(k\\Delta x)\\kappa = (\\frac{\\omega_{0}}{\\omega})^2$$\nResonant circuits with capacitance 对电路网络中的节点进行编号 $\\alpha = 1, 2, · · · , N $, 任意两节点 a 和 b 间导纳记为$y_\\alpha\\beta$. 节点a上的电势记为$v_\\alpha$(取地面为零势能参考点), 流入该节点的净电流记为 $I_\\alpha$. 对节点$\\alpha$ , 从与之相连的节点$\\alpha^{\\prime}$流入的电流记为$I_\\alpha\\alpha^{\\prime}$, 欧姆定律要求 $I_\\alpha\\alpha^{\\prime} = (v_\\alpha^{\\prime} - v_\\alpha) y_\\alpha\\alpha^{\\prime} $, 求和\n$$\\sum_{\\alpha^{\\prime}}(v_\\alpha^{\\prime} - v_\\alpha) y_\\alpha\\alpha^{\\prime} = I_\\alpha $$\n即 $\\mathcal{L} V = I $。\n这个时候我们把hopping项换成电容， 利用 孤立的 LC 谐振回路具有特定的谐振频率 $\\omega_0$ = $1/\\sqrt{LC}$\nThe admittance matrix Use $Y(\\omega)$, 导纳 WaveVector-\u0026gt; Voltage $$ \\begin{aligned} \\hat{Y}(\\omega)=\u0026amp; \\sum_{i}\\left(\\frac{1}{j \\omega L_{i}}+\\mathrm{j} \\omega C\\right)\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}\\right| + \\sum_{i} \\sum_{j \\omega C_{i j}}j\\omega C_{ij}\\left(\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}|-| \\pi_{i}\\right\\rangle\\left\\langle\\pi_{j}\\right|\\right) \\end{aligned} $$\n$$ \\begin{equation} \\begin{aligned} \\frac{1}{j\\omega C}\\hat{Y}(\\omega)=\u0026amp; \\sum_{i}\\left(-\\frac{\\omega_0^2}{ \\omega^2 }+ c_i\\right)\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}\\right| + \\sum_{i} \\sum_{c_{ij}}c_{ij}\\left(\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}|-| \\pi_{i}\\right\\rangle\\left\\langle\\pi_{j}\\right|\\right) \\end{aligned} \\end{equation} $$\n$$ \\begin{aligned} \\frac{1}{j\\omega}\\hat{Y}(\\omega)=\u0026amp; \\sum_{i}\\left(-\\frac{1}{ \\omega^2 L }+ C_i\\right)\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}\\right| + \\sum_{i} \\sum_{C_{ij}}C_{ij}\\left(\\left|\\pi_{i}\\right\\rangle\\left\\langle\\pi_{i}|-| \\pi_{i}\\right\\rangle\\left\\langle\\pi_{j}\\right|\\right) \\end{aligned} $$\n$$ \\begin{equation} \\begin{aligned} \u0026amp;Y V=\\frac{1}{\\omega^{2} L} \\boldsymbol{V}, \\newline \u0026amp;Y=\\left[\\begin{array}{cccc} y_{1} \u0026amp; -C_{12} \u0026amp; \\cdots \u0026amp; -C_{1 N} \\newline -C_{21} \u0026amp; y_{2} \u0026amp; \\cdots \u0026amp; -C_{2 N} \\newline \\vdots \u0026amp; \\vdots \u0026amp; \\ddots \u0026amp; \\vdots \\newline -C_{N 1} \u0026amp; -C_{N 2} \u0026amp; \\cdots \u0026amp; y_{N} \\end{array}\\right] \\newline \u0026amp;y_{\\alpha}=\\sum_{\\alpha^{\\prime}=1(\\neq \\alpha)}^{N} C_{\\alpha \\alpha^{\\prime}}+C_{\\alpha} \\end{aligned} \\end{equation} $$\nimpedance matrix Use $Z(\\omega)$, 阻抗 WaveVector-\u0026gt; Current For this circuit network, $$ \\begin{aligned} \\hat{Z}(\\omega)=\u0026amp; \\sum_{i}\\left(\\mathrm{j} \\omega L+\\frac{1}{\\mathrm{j} \\omega C_{i}}\\right)\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{i}\\right|+\\frac{1}{\\mathrm{j} \\omega} \\sum_{i} \\sum_{i \\neq i} \\frac{1}{C_{i j}}\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{j}\\right| \\end{aligned} $$\n$$ \\begin{aligned} \\frac{1}{\\mathrm{j} \\omega L}\\hat{Z}(\\omega)= \u0026amp; \\sum_{i}\\left(1-\\frac{\\omega_0^2}{\\omega^2 \\epsilon_{i}}\\right)\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{i}\\right|-\\sum_{i} \\sum_{i \\neq i} \\frac{\\omega_0^2}{\\omega^2\\epsilon_{i j}}\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{j}\\right| \\end{aligned} $$\n$$ \\begin{aligned} -(\\frac{\\omega}{\\omega_0})^2\\frac{1}{\\mathrm{j} \\omega L}\\hat{Z}(\\omega)= \u0026amp; \\sum_{i}\\left(-(\\frac{\\omega}{\\omega_0})^2+ \\frac{1}{\\epsilon_{i}}\\right)\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{i}\\right|+\\sum_{i} \\sum_{i \\neq i} \\frac{1}{\\epsilon_{i j}}\\left|\\alpha_{i}\\right\\rangle\\left\\langle\\alpha_{j}\\right| \\end{aligned} $$\n所以我们有 $\\hat{H}_{circu}\\bf{V} =(\\frac{\\omega}{\\omega_0})^2\\bf{V}$\n$$ \\hat{H}_{circu} = \\sum_{i} \\frac{1}{\\epsilon_{i}}|\\alpha_{i}\\rangle\\langle\\alpha_{i}| +\\sum_{i} \\sum_{j \\neq i} \\frac{1}{\\epsilon_{ij}}|\\alpha_{i}\\rangle\\langle\\alpha_{j}| $$\n拓扑电路领域的关键发展   Y. Nakata, T. Okada, T. Nakanishi, and M. Kitano, Circuit Model for Hybridization Modes in Metamaterials and Its Analogy to the Quantum Tight-Binding Model: Circuit Model for Hybridization Modes in Metamaterials, Phys. Status Solidi B 249, 2293 (2012).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Mar 21, 2022","img":"","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/reviewoftopocurrent/","series":[],"tags":[""],"title":"拓扑电路入门学习"},{"categories":["经验贴"],"content":"安装Synopsys Hspice16，Custom WaveView16等 在此将完整的安装过程步骤记录下来\nspice （仿真电路模拟器） Simulation program with integrated circuit emphasis Spice是一种功能强大的通用模拟电路仿真器，已经具有几十年的历史了，该程序主要用于集成电路的电路分析程序中，Spice的网表格式变成了通常模拟电路和晶体管级电路描述的标准，其第一版本于1972年完成，是用Fortran语言写成的，1975年推出正式实用化版本，1988年被定为美国国家工业标准，主要用于IC，模拟电路，数模混合电路，电源电路等电子系统的设计和仿真。由于Spice仿真程序采用完全开放的政策，用户可以按自己的需要进行修改，加之实用性好，迅速得到推广，已经被移植到多个操作系统平台上。自从Spice问世以来，其版本的更新持续不断，有Spice2、Spice3等多个版本，新版本主要在电路输入、图形化、数据结构和执行效率上有所增强，人们普遍认为Spice2G5是最为成功和有效的，以后的版本仅仅是局部的变动。同时，各种以伯克利的Spice仿真程序的算法为核心的商用Spice电路仿真工具也随之产生，运行在PC和UNIX平台，许多都是基于原始的SPICE 2G6版的源代码，这是一个公开发表的版本，它们都在Spice的基础上做了很多实用化的工作，比较常见的Spice仿真软件有Hspice、Pspice、Spectre、Tspice、SmartSpice、IsSpice等，虽然它们的核心算法雷同，但仿真速度、精度和收敛性却不一样，其中以Synopsys公司的Hspice和Cadence公司的Pspice最为著名。Hspice是事实上的Spice工业标准仿真软件，在业内应用最为广泛，它具有精度高、仿真功能强大等特点，但它没有前端输入环境，需要事前准备好网表文件，不适合初级用户，主要应用于集成电路设计；Pspice是个人用户的最佳选择，具有图形化的前端输入环境，用户界面友好，性价比高，主要应用于PCB板和系统级的设计。\n Hspice Pspice LTspice  软件包的准备 软件来自CJ_S_01235博主的分享 qx5n ，十分感谢博主！！！\n SynopsysInstaller_v3.2 Synopsys hspice16 Synopsys Custom Waveview L-2016.06 Synopsys SCL11.9  Synopsys hspice16的安装 SynopsysInstaller_v3.2.run 解压 1chmod +x ./SynopsysInstaller_v3.2.run 2./SynopsysInstaller_v3.2.run 安装hspice cd到上一步安装程序解压到的文件夹，执行以下代码：\n1./setup.sh x11 图形化界面 选择源文件目录 安装源选择两个.spf文件所在的文件夹，安装位置可以自己选择，建议在home文件夹下创建一个Synopsys的文件夹，用于安装这些软件。最后执行安装就好！ 注意：安装软件必须拥有安装位置的读写权限，不然无法安装。 安装scl -scl_v11.9_amd64.spf -scl_v11.9_common.spf -scl_v11.9_linux.spf 同样使用\n1./setup.sh 进行安装\n破解 破解的关键在于获取正确的网卡的mac地址，配置好hosts，以及调整好正确的时间\n环境变量设置 1#＃##### Configurations for Synopsys Hspice ###＃#＃ 2export SNPSLMD_LICENSE_FILE=27000@time 3export LM_LICENSE_FILE=/DATA/soft/Synopsys/scl/admin/license/license.dat 4export PATH=\u0026#34;/DATA/soft/Synopsys/hspice/bin:\u0026#34;$PATH 5export PATH=\u0026#34;/DATA/soft/Synopsys/scl/linux/bin:\u0026#34;$PATH 6export PATH=\u0026#34;/DATA/soft/Synopsys/CUSTOM_WAVEVIEW_2016/bin:\u0026#34;$PATH 7alias hsplmd=\u0026#39;/DATA/soft/Synopsys/scl/linux/bin/lmgrd -c /DATA/soft/Synopsys/scl/admin/license/license.dat\u0026#39; ","date":"Mar 9, 2022","img":"","permalink":"https://parkman.top/en/posts/%E6%8B%93%E6%89%91%E7%94%B5%E8%B7%AF/hspice/hspiceinstall/","series":[],"tags":["hspice"],"title":"Hspice 安装"},{"categories":["经验贴"],"content":"博一走了一半，把自己的心得记录一下\n工具准备 软件-本地  iTerm filezila AI PS zotero mactex office VScode Sublime GitKraken Chrome vesta Onenote Xcode intel/oneapi matlab mathematica miniconda PDF Squeeter picgo XQuartz gnuplot mathpix  软件-服务器  vasp wien2k qe matlab anaconda wannier90 wanniertools irvsp,ir2TB \u0026hellip; vaspkit python:z2pack,pythtb,phonopy hspice gnuplot intel/oneapi  网页  waiting  科研工作流程 准备课题/有了idea 调研题目  google Web of Science 方法没接触过先掌握方法 重复方法例子 基础概念不清楚先review: Rev. Mod. Phy.等review wikipedia  进行课题  重复该领域已知结论 进行自己的研究 讨论  日常结果  记录在ppt/markdown/beamer 等，要有模版 推导latex或MSword格式 做图使用AI模版，4cm*4cm一个子图，（12pt，10pt,8pt,6pt)，固定字体，每一个子图一个图层，rgb格式，颜色艳丽 矢量图可以eps/svg/pdf, 位图r300/r600png(如有需要tiff)  撰写论文 重中之重\n","date":"Mar 8, 2022","img":"","permalink":"https://parkman.top/en/posts/%E7%A7%91%E7%A0%94%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/%E4%B8%80%E4%BA%9B%E5%81%9A%E7%A7%91%E7%A0%94%E7%9A%84%E6%84%9F%E6%83%B3/","series":[],"tags":["physics"],"title":"Cheatsheet for Research in TCMP"},{"categories":[],"content":"陈数计算方法高效法！自旋陈数等sub-band 陈数的计算实例！\n陈数计算高效法 中文名称来源于关老师的博客 参考文献-Chern Numbers in Discretized Brillouin Zone: Efficient Method of Computing (Spin) Hall Conductances 1\n核心要点在于把二维布里渊区分成很多小份，每一份通过计算贝里联络来计算贝里曲率\nRef.11 把计算要点说的很明确,\n 定义 U(1) link variable: $U_{\\mu}\\left(k_{\\ell}\\right) \\equiv\\left\\langle n\\left(k_{\\ell}\\right) \\mid n\\left(k_{\\ell}+\\hat{\\mu}\\right)\\right\\rangle / \\mathcal{N}{\\mu}\\left(k{\\ell}\\right)$, where $\\mathcal{N}{u}\\left(k{\\ell}\\right) \\equiv\\left|\\left\\langle n\\left(k_{\\ell}\\right) \\mid n\\left(k_{\\ell}+\\hat{\\mu}\\right)\\right\\rangle\\right|$ 定义 lattice field strength $F_{12}$(原通过贝里联络定义$F_{12}(k)=\\partial_{1} A_{2}(k)-\\partial_{2} A_{1}(k)$, 通过定义我们知道这实质就是贝里曲率，又称Berry Flux，这点不是很确定 随后再说): $\\tilde{F}{12}\\left(k{\\ell}\\right) \\equiv \\ln U_{1}\\left(k_{\\ell}\\right) U_{2}\\left(k_{\\ell}+\\hat{1}\\right) U_{1}\\left(k_{\\ell}+\\hat{2}\\right)^{-1} U_{2}\\left(k_{\\ell}\\right)^{-1}$ 最后 $\\tilde{\\boldsymbol{c}}_{n} \\equiv \\frac{1}{2 \\pi \\mathrm{i}} \\sum_{\\ell} \\tilde{\\boldsymbol{F}}_{12}\\left(k_{\\ell}\\right)$  核心算法:\n1functionBC =BerryCuvature_Discrete_2D(VV,Vk1,Vk2,Vk1k2)2% VV W_d_0; 3% Vk1 W_d_1; 略偏离kx的波函数 4% Vk2 W_d_2; 略偏离ky的波函数 5% Vk1k2 W_d_12; 略偏离kx，ky的波函数 6% 7% U(1) like variable 8Uk1 = det(VV\u0026#39;*Vk1);Uk1 = Uk1/norm(Uk1); 9Uk2 = det(VV\u0026#39;*Vk2);Uk2 = Uk2/norm(Uk2); 10Uk1_k2 = det(Vk2\u0026#39;*Vk1k2);Uk1_k2 = Uk1_k2/norm(Uk1_k2); 11Uk2_k1 = det(Vk1\u0026#39;*Vk1k2);Uk2_k1 = Uk2_k1/norm(Uk2_k1); 12% berry curvature 13BC = log(Uk1*Uk2_k1/(Uk1_k2*Uk2)); 14BC = imag(BC); 15BC = sum(BC); 16end 陈数高效法多带模型 与前文一样，只需要推广 U(1) link variable:\n 推广 U(1) link variable: $U_{\\mu}\\left(k_{\\ell}\\right)=\\frac{1}{\\mathcal{N}{\\mu}\\left(k{\\ell}\\right)} \\operatorname{det} \\psi^{\\dagger}\\left(k_{\\ell}\\right) \\psi\\left(k_{\\ell}+\\hat{\\mu}\\right)$ with the normalization constant $\\mathcal{N}{\\mu}\\left(k{\\ell}\\right) \\equiv \\mid \\operatorname{det} \\psi^{\\dagger}\\left(k_{\\ell}\\right) \\psi\\left(k_{\\ell}+\\hat{\\mu}\\right)\\mid$  direct 所谓高效法似乎添加了一些额外计算，而Topocondmat 总结的方法也非常清楚，后续可以再试\n the final recipe to compute the Chern number is as follows: grid up the BZ into small plaquettes labelled by n\n$$\\Phi_{n}=\\operatorname{Arg}\\left[\\prod_{p} \\operatorname{Det}\\left[\\left\\langle u_{s}\\left(\\mathbf{k}{\\mathbf{n}, \\mathbf{p}}\\right) \\mid \\mathbf{u}{\\mathbf{s}^{\\prime}}\\left(\\mathbf{k}{\\mathbf{n}, \\mathbf{p}+\\mathbf{1}}\\right)\\right\\rangle\\right]\\right]$$ Compute the flux through each plaquette where $\\mathbf{k}{\\mathbf{n}, \\mathbf{p}}$} are momenta on the corners of the lattice. The Chern number is calculated as $$v=(2 \\pi)^{-1} \\sum_{n} \\Phi_{n}$$\n Example Haldane模型 我们通过 vasplib的Htig类定义Haldane模型\n1% Haldane 2syms h theta phi real; 3% 4% phi = 0; 5sigma_0 = [1 0;0 1]; 6sigma_x = [0 1;1 0]; 7sigma_y = [0 -1i;1i 0]; 8sigma_z = [1 0;0 -1]; 9%% 10syms a t t_2 M phi delta k_x k_y real; 11% 12% 13Rm = [1 0;-1/2 sqrt(3)/2]*a; 14Haldane= Htrig(2); 15t1 = [1/3,2/3]*a; 16t2 = [2/3,1/3]*a; 17% 18e1 = t1-t2+[0 0]*Rm; 19e2 = t1-t2+[1 0]*Rm; 20e3 = t1-t2+[0 -1]*Rm; 21d1 = [1 0]*Rm; 22d2 = [0 1]*Rm; 23d3 = [-1 -1]*Rm; 24% H12 = -t*(... 25% cos(e1*[k_x;k_y]) +cos(e2*[k_x;k_y])+cos(e3*[k_x;k_y])... 26% - ... 27% 1i*sin(e1*[k_x;k_y]) +sin(e2*[k_x;k_y])+cos(e3*[k_x;k_y])); 28%  29% H21 = conj(H12); 30H12trig_r = Trig(-t*(cos(e1*[k_x;k_y]) +cos(e2*[k_x;k_y])+cos(e3*[k_x;k_y])),sigma_x); 31H12trig_i = Trig(-t*(sin(e1*[k_x;k_y]) +sin(e2*[k_x;k_y])+sin(e3*[k_x;k_y])),sigma_y); 32H11_0 = Trig(-2*t_2*cos(phi)*(cos(d1*[k_x;k_y]) +cos(d2*[k_x;k_y])+cos(d3*[k_x;k_y])),sigma_0); 33H11_z = Trig((M-2*t_2*sin(phi))*(sin(d1*[k_x;k_y]) +sin(d2*[k_x;k_y])+sin(d3*[k_x;k_y])),sigma_z); 34a = 1; 35% 36Haldane= Haldane+ H12trig_r + H12trig_i+ H11_0+ H11_z; 37Haldane.Rm = double(subs(Rm)); 38disp(Haldane); Haldane 模型的体能带 BerryCurvature 对BC求和: 陈数等于 -6.283185307179586/$2\\pi$ = -1\nIndividual Chern numbers3 In general, if the Hilbert space H of a given problem can be written as a sum of smooth Hilbert spaces, $$ \\mathscr{H}=\\bigoplus_{i} \\mathscr{H}_{i} $$ then each of the Hilbert spaces has a well-defined Chern number $C_i$. These individual Chern numbers sum together to the Chern number of the full Hilbert space: $$C = \\sum_i C_i$$\nIn the presence of a symmetry S however, the Hilbert space can be split up according to the symmetry eigenvalues. For example, consider a mirror symmetry with eigenvalues $\\pm i$. On the mirror-symmetric surface, S and H(k) commute. Therefore, the Bloch functions $|u_{n,k}⟩$ can be separated into +i and −i eigenstates. Both eigenspaces have a well- defined Chern number: $C = C_i +C_{−i}$. This gives rise to a symmetry-protected topological classification. Materials can have a zero total Chern number, but non-zero individual Chern numbers. Such a topological phase is protected as long as both the band gap remains open and the symmetry is respected. If the symmetry is broken, a mixing of the two eigenspaces can change the topological phase.\nSpin Chern Number Time-reversal symmetry $\\mathcal{T}$ leads to a particularly interesting and well-known topological classification. It is an anti-unitary symmetry and squares to −1($\\mathcal{T}^2 = -1$) in the spinful case. As a result, the Bloch functions come in so-called Kramers pairs:\n$$\\begin{aligned}\\mathcal{T}\\left|u_{m, \\mathbf{k}}^{I}\\right\\rangle \u0026amp;=\\left|u_{m, \\mathbf{k}}^{I I}\\right\\rangle \\\\ \\mathcal{T}\\left|u_{m, \\mathbf{k}}^{I I}\\right\\rangle \u0026amp;=-\\left|u_{m, \\mathbf{k}}^{I}\\right\\rangle \\end{aligned}$$\nThe two groups then have individual Chern numbers $C_I$ and $C_II$. It should be noticed these chern numbers are not Gauge-invariant. Therefore, a topological invariant $Z_2$ can be defined as $C_I$ mod 2.\nBHZ 2D 定义 BHZ k·p 模型\n1%% useful tool 2s_0 = pauli_matric(0) ; s_x = pauli_matric(1); s_y = pauli_matric(2) ; s_z = pauli_matric(3); 3sigma_0 = pauli_matric(0);sigma_x = pauli_matric(1);sigma_y = pauli_matric(2);sigma_z = pauli_matric(3); 4tau_0 = pauli_matric(0); tau_x = pauli_matric(1); tau_y = pauli_matric(2); tau_z = pauli_matric(3); 5%k·p model 6syms C0 C1 C2 real; 7syms M0 M1 M2 real; 8syms A B1 B2 real; 9syms k_x k_y k_z real; 10% 11M = M0-M2*(k_x^2+k_y^2); 12E0k = C0+C2*(k_x^2+k_y^2); 13k_plus = k_x + 1i* k_y; 14k_minus = k_x - 1i* k_y; 15% 16BHZ = HK(4,2) 17% 18BHZ = BHZ ... 19+Term(A*k_x ,sigma_z*tau_x )... 20+Term(A*k_y ,sigma_0*tau_y )... 21+Term(E0k ,sigma_0*tau_0 )... 22+Term(M ,sigma_0*tau_z )... 23; $$\\begin{array}{l} H = \\left(\\begin{array}{cccc} \\sigma_2 \u0026amp; A{\\left(-k_y \\mathrm{i}+k_x \\right)} \u0026amp; 0 \u0026amp; 0\\newline A{\\left(k_y \\mathrm{i}+k_x \\right)} \u0026amp; \\sigma_1 \u0026amp; 0 \u0026amp; 0\\newline 0 \u0026amp; 0 \u0026amp; \\sigma_2 \u0026amp; -A{\\left(k_y \\mathrm{i}+k_x \\right)}\\newline 0 \u0026amp; 0 \u0026amp; -A{\\left(-k_y \\mathrm{i}+k_x \\right)} \u0026amp; \\sigma_1 \\end{array}\\right)\\newline \\mathrm{}\\newline \\textrm{where}\\newline \\mathrm{}\\newline \\sigma_1 =C_0 -M_0 +{k_x }^2 {\\left(M_2 +C_2 \\right)}+{k_y }^2 {\\left(M_2 +C_2 \\right)}\\newline \\mathrm{}\\newline \\sigma_2 =C_0 +M_0 +{k_x }^2 {\\left(-M_2 +C_2 \\right)}+{k_y }^2 {\\left(-M_2 +C_2 \\right)} \\end{array}$$\n时间反演算符定义为 $\\mathcal{T} = -i\\sigma_y\\tau_0\\mathbf{\\mathcal{K}}$, 即 spinup 和 spindn 的本征值差了一个负号 Mirror Chern Number4 $$ H(k)=\\left(v_{x} k_{x} \\sigma_{x}-v_{y} k_{y} \\sigma_{y}\\right) \\tau_{x}+m \\tau_{z} $$ where $\\sigma_i$ is the Pauli matrix of spins and $\\tau_i$ is that of pseudospins representing two Dirac cones existing in the bulk TCI. $$\\left(\\begin{array}{cccc} m \u0026amp; 0 \u0026amp; 0 \u0026amp; -k_y ,v_2 ,\\mathrm{i}+k_x ,v_1 \\newline 0 \u0026amp; -m \u0026amp; -k_y ,v_2 ,\\mathrm{i}+k_x ,v_1 \u0026amp; 0\\newline 0 \u0026amp; k_y ,v_2 ,\\mathrm{i}+k_x ,v_1 \u0026amp; m \u0026amp; 0\\newline k_y ,v_2 ,\\mathrm{i}+k_x ,v_1 \u0026amp; 0 \u0026amp; 0 \u0026amp; -m \\end{array}\\right)$$ 可以看到此时 哈密顿量并未写成块直和的形式 这时我们已知 $\\mathcal{M}_z = −i\\sigma_z\\tau_z$. $$\\left(\\begin{array}{cccc} -\\mathrm{i} \u0026amp; 0 \u0026amp; 0 \u0026amp; 0\\newline 0 \u0026amp; \\mathrm{i} \u0026amp; 0 \u0026amp; 0\\newline 0 \u0026amp; 0 \u0026amp; \\mathrm{i} \u0026amp; 0\\newline 0 \u0026amp; 0 \u0026amp; 0 \u0026amp; -\\mathrm{i} \\end{array}\\right)$$ 这暗示着我们 2,3 orbitals的本征值为i 1,4 orbitals的本征值为-i\n  Fukui, T., Hatsugai, Y. \u0026amp; Suzuki, H. Chern Numbers in Discretized Brillouin Zone: Efficient Method of Computing (Spin) Hall Conductances. J. Phys. Soc. Jpn. 74, 1674–1677 (2005).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Liu, J. et al. Spin-filtered edge states with an electrically tunable gap in a two-dimensional topological crystalline insulator. Nature Mater 13, 178–183 (2014).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Soluyanov, A. A. \u0026amp; Vanderbilt, D. Wannier representation of Z 2 topological insulators. Phys. Rev. B 83, 035108 (2011).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Hsieh, T. H. et al. Topological crystalline insulators in the SnTe material class. Nature Communications 3, 982 (2012). The effective Hamiltonian for a TCI thin film is given by a two-dimensional model 2,\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Feb 10, 2022","img":"","permalink":"https://parkman.top/en/posts/berryphase/chern/","series":["半经典学习"],"tags":["vasplib"],"title":"陈数！自旋陈数！镜陈数！谷陈数！"},{"categories":["vasplib"],"content":"vasplib 快捷命令一览\nvasplib vasplib 和第一性原理计算对接，Tools function\nbandplot  Dependence  POSCAR KPOINTS EIGENCAR DOSCAR  直接画能带图\n1bandplot(); 间接画能带图\n1EIGENCAR = EIGENVAL_read(); 2bandplot(EIGENCAR); 调整能量范围\n1bandplot(EIGENCAR,[-3,3]); 指定颜色(键值对)\n1bandplot(EIGENCAR,[-3,3],\u0026#39;Color\u0026#39;,\u0026#39;r\u0026#39;); 指定依赖的POSCAR和KPOINTS(键值对)\n1bandplot(EIGENCAR,[-3,3],\u0026#39;Color\u0026#39;,\u0026#39;r\u0026#39;,\u0026#39;KPOINTS\u0026#39;,\u0026#39;KPOINTS\u0026#39;,\u0026#39;POSCAR\u0026#39;,\u0026#39;POSCAR\u0026#39;); 画多个能带\n1bandplot({EIGENCAR1,EIGENCAR2},[-3,3]); 2%% or 3[fig,ax] = bandplot(EIGENCAR1,[-3,3]); 4[fig,ax] = bandplot(EIGENCAR2,[-3,3],\u0026#39;fig\u0026#39;,fig,\u0026#39;ax\u0026#39;,ax); bandcompare 比较两个能带\n1vasplib.bandplot(EIGENCAR1,EIGENCAR2,[-3,3]); export .svg (输出向量图) 600 指像素 temp为文件名\n1set(gcf,\u0026#39;Renderer\u0026#39;,\u0026#39;Painters\u0026#39;); print(gcf,\u0026#39;-dsvg\u0026#39;,\u0026#39;-r600\u0026#39;,\u0026#39;temp.svg\u0026#39;) export .png (输出位图) 600 指像素 temp为文件名\n1export_fig temp.png -r600 pbandplot 直接画投影能带图(vaspkit 213)  Dependence  POSCAR KPOINTS EIGENCAR DOSCAR PBAND_X.dat \n1pbandplot(); 2%% or 3vasplib.pbandplot(); 在有WEIGHTCAR(和EIGENCAR结构一致)的情况下 画投影能带图\n1vasplib.pbandplot(WEIGHTCAR,EIGENCAR,\u0026#39;Ecut\u0026#39;,[-3,3]); 调整能量范围\n1bandplot(EIGENCAR,[-3,3]); 指定颜色(键值对)\n1bandplot(EIGENCAR,[-3,3],\u0026#39;Color\u0026#39;,\u0026#39;r\u0026#39;); 指定依赖的POSCAR和KPOINTS(键值对)\n1bandplot(EIGENCAR,[-3,3],\u0026#39;Color\u0026#39;,\u0026#39;r\u0026#39;,\u0026#39;KPOINTS\u0026#39;,\u0026#39;KPOINTS\u0026#39;,\u0026#39;POSCAR\u0026#39;,\u0026#39;POSCAR\u0026#39;); dosplot(TO BE MODIFIED) 直接画分波态密度(vaspkit 111 113)  Dependence  tdos.dat PDOS_X.dat \n1dosplot(); 不看d轨道\n1dosplot(\u0026#39;d\u0026#39;,false); gen .win .in (TO BE MODIFIED) 生成 wannier90 wt symmetry 模版文件  Dependence  POSCAR KPOINTS EIGENCAR DOSCAR \nspinless\n1init_v2w(0); spinful\n1init_v2w(0); 判断能带选择区间\n1init_v2w(\u0026#39;check\u0026#39;,true); 快速生成，以选取石墨一炔12个$p_z$轨道为例\n1init_v2w(\u0026#39;Projector_list\u0026#39;,ones(1,18)); POSCAR_read  Dependence  POSCAR  读取POSCAR信息\n1POSCAR_read; 2%% or 3[Rm,sites,Atom_name,Atom_num]=POSCAR_readin(); plot BZ 1vasplib.BZplot(Rm); More  Dependence  KPOINTS \n1vasplib.BZplot(Rm,\u0026#39;KPOINTS\u0026#39;,\u0026#39;KPOINTS\u0026#39;); HR Construction\nSKTB POSCAR 需要特别的设置，详见POSCAR 设置：vasplib_POSCAR  Dependence  POSCAR \nModification\nSolve\nHK Htrig Oper","date":"Feb 2, 2022","img":"","permalink":"https://parkman.top/en/posts/matlab/vasplib/vasplib_cheatsheet/","series":[],"tags":["MATLAB"],"title":"Vasplib Cheatsheet"},{"categories":["文献阅读"],"content":"这个公众号有一些不错的文献追踪，把他的历史消息都拿出来看看，加点沉淀 所有图片侵删\n文献 文献速览 二维III-VI族单分子膜的弹道热电输运特性1 工具 DFT 结构优化 ISIF 编译 肖承诚博士 的补丁 https://github.com/Chengcheng-Xiao/VASP_OPT_AXIS 声子谱计算技巧 有限位移 DFPT 声子谱构建紧束缚模型 有效质量 For electrons or holes in a solid, the effective mass (m*) is a quantity that is used to simplify band structures by modeling the behavior of a free particle with that mass. $$ \\frac{1}{m^{*}}=\\frac{1}{\\hbar^{2}} \\frac{\\partial^{2} E}{\\partial k_{i} \\partial k_{j}} $$\n调整SOC强度 需要修改源文件vasp_source_code_path/src/relativistic.F 并重新编译\n费米面2 Raman 计算 Galore是一个将高斯和洛伦兹展宽应用到从头计算数据的软件包。包括两个主要的应用。\n 电子态密度的高斯和洛伦兹展宽，用轨道加权来模拟UPS/XPS/HAXPES测量。 将洛伦兹展宽用到DFPT模拟拉曼光谱中（上文中非共振拉曼的案例）。 https://galore.readthedocs.io/en/latest/readme.html   能带反折叠 https://github.com/QijingZheng/VaspBandUnfolding band-ordering PyVaspwfc DFT+U 主要的参考文献有两篇34\n$$\\rm{E}_{\\rm{LDA}}+U[\\rho(\\rm{r})]=\\rm{E}_{\\rm{LDA}}[\\rho(\\rm{r})]+\\rm{E}_{\\rm{Hub}}\\left[\\left\\{n_{m m}^{I \\sigma}\\right\\}\\right]-\\rm{E}_{\\rm{dc}}\\left[n^{\\rm{I} \\sigma}\\right]$$\n电子局域函数  ELF第一次被定义是在1990年5， 作者用这个函数来表征电子的局域化分布特征。 四年后，电子局域函数登上Nature正刊，题目为《Classification of chemical bonds based on topological analysis of electron localization functions》6\n在量子化学领域，ELF方法和Bader电荷方法比较常用: ELD 可以使用 sMultiwfn 生成函数图像\n德拜温度 对于比热来说，在温度$T\\gg\\theta_D$，大多数固体的热容量都等于6 cal/mol*K 与杜隆定律和珀蒂定律一致。在$T\\ll\\theta_D$晶格热容与温度的三次方成正比。https://github.com/romerogroup/MechElastic 居里温度 对于铁磁材料，其相变温度也叫居里（Cuire）温度，对于反铁磁材料，其相变温度也叫奈尔温度（Neel）。\nAIMD方法计算居里温度Tc（计算量巨大，准确） 使用AIMD分别计算不同温度下的超胞，通过统计学得到平均极化距离d，通过d找到对应温度下的极化值，然后通过slogical1函数拟合得到Tc。\nMC方法计算居里温度Tc  对于相变温度的估算，一般来说可通过平均场做一个粗略的计算；或者通过蒙特卡洛模拟，此外还可以使用自旋波方法。 其中最常见的是蒙特卡洛模拟，其中磁比热曲线中的拐点位置为相变温度。\n构造wannier MLWF symmetry-adapted SCDM SCDM全称为selected columns of the density matrix，于2015年由Anil Damle等人首次提出7，2018年进一步完善8, 随后被 Antimo Marrazzo (EPFL)，Giovanni Pizzi (EPFL) 和Valerio Vitale 9 (Imperial College London and University of Cambridge) 等人写出算法集成在AIIDA中，实现了自动高通量的wanierization过程。SCDM方法的优点在于其具有高效性，鲁棒性，不需要初始的猜测。它是基于标准线性算法而不是迭代算法。此外，Valerio Vitale等人还提出了一种有效的QRCP分解算法，它适用于比全密度矩阵更小且在数值上更容易处理的矩阵。最后，SCDM对于一组孤立的能带是无参数的，在纠缠能带的情况下只需要两个参数。\nAIIDA软件学习文档 技术   Çınar, M. N. et al. Ballistic thermoelectric transport properties of two-dimensional group III-VI monolayers. Phys. Rev. B 103, 165422 (2021).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Dugdale, S. B. Life on the edge: a beginner’s guide to the Fermi surface. Phys. Scr. 91, 053009 (2016).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Liechtenstein, A. I., Anisimov, V. I. \u0026amp; Zaanen, J. Density-functional theory and strong interactions: Orbital ordering in Mott-Hubbard insulators. Phys. Rev. B 52, R5467–R5470 (1995).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Density Functional Calculations - Recent Progresses of Theory and Application. (InTech, 2018).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Becke, A. D. \u0026amp; Edgecombe, K. E. A simple measure of electron localization in atomic and molecular systems. The Journal of Chemical Physics 92, 5397–5403 (1990).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Silvi, B. \u0026amp; Savin, A. Classification of chemical bonds based on topological analysis of electron localization functions. Nature 371, 683–686 (1994).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Anil Damle, Lin Lin, and Lexing Ying, Compressed representation of kohn–sham orbitals via selected columns of the density matrix Journal of Chemical Theory and Computation 11, 1463–1469 (2015).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Anil Damle and Lin Lin, Disentanglement via entanglement: A unified method for wannier localization, Multiscale Modeling \u0026amp; Simulation 16, 1392–1410 (2018).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Vitale, V., Pizzi, G., Marrazzo, A., Yates, J.R., Marzari, N., Mostofi, A.A. Automated high-throughput Wannierisation. npj Computational Materials 6, 1–18 (2020).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Jan 23, 2022","img":"","permalink":"https://parkman.top/en/posts/%E7%A7%91%E7%A0%94%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/%E7%A7%91%E7%A0%94%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/","series":["Reading"],"tags":["physics"],"title":"科研那些事儿-速览"},{"categories":[],"content":"z2pack 是一个强大的计算Berryphase相关拓扑数的python工具包，由欧洲老哥 （我们组内对他的趣称，从他的代码里学到不少，现已入职微软)\nZ2pack   Z2Pack is a tool for calculating topological invariants. The method is based on tracking the evolution of hybrid Wannier functions, which is equivalent to the computation of the Wilson loop. Originally developed for calculating invariants, it is now also capable of calculating Chern numbers. Moreover, through the use of individual Chern numbers it can be used to identify any kind of topological phase.\nA key feature of Z2Pack is its flexibility: It can be used with various kinds of calculations and models. Currently, interfaces to first-principles codes, tight-binding models and models are implemented. However, it can in principle be extended to any kind of system.\n 关于安装与使用的一些说明  z2pack 与第一性原理做接口时需要使用 wannier90, 对VASP来说 wannier90.2.1.0 效果较好。 z2pack 计算 TB 模型时，借助另外一个库：tbmodels （也是由欧洲老哥开发，tbmodels可以方便的自己定义TB模型或者从wannier转入，tbmodels可以快速方便地对wannier作对称化，详见站内链接） z2pack 计算 kp 模型，直接在代码里把kp模型写出来即可。  从实践的角度出发 一般而言，只要我们熟悉了 z2pack 计算 TB模型（wannier90_hr.dat）的流程，我们就可以计算无论是模型或者第一性原理计算的结果了。\n代码拆解 import module 1import os 2import sys 3import pathlib 4import symmetry_representation as sr 5import numpy as np 6import matplotlib.pyplot as plt 7import pymatgen as mg 8import pymatgen.symmetry.analyzer 9import pymatgen.symmetry.bandstructure 10# import logging 11import itertools 12import z2pack 13import tbmodels handy function 1def PrintDict(dict): 2# for i in dict.keys(): 3# print(i)  4# print(dict[i])  5# for i in dict.values(): 6# print(i) 7for key, value in dict.items(): 8print(key + \u0026#34;: \u0026#34; ) 9for ivalue in value: 10print(\u0026#34; \u0026#34;+str(ivalue)) 导入 wannier90_hr.dat 1# load first 23model = tbmodels.Model.from_wannier_files( 4hr_file=\u0026#39;wannier90_hr.dat\u0026#39;, 5# win_file=\u0026#39;wannier90.win\u0026#39;, 6# wsvec_file=\u0026#39;wannier90_wsvec.dat\u0026#39;, 7#xyz_file=\u0026#39;wannier90_centres.xyz\u0026#39; 8) 9OccupyBand = 3 10SelectBands = OccupyBand 11model.occ = OccupyBand 读取wannier90_hr.dat 时可以根据情况选择性地加入:wannier90.win,wannier90_wsvec.dat, wannier90_centres.xyz等信息\n从wannier90_orbital.dat 导入 pos 如果上一步导入了 xyz_file，则无需导入pos信息 如果是自己定义的模型或者用symmetry-adapter wannier 则这里借助 wannier_orbital.dat 导入晶格pos信息 如果不引入pos，则默认所有轨道在原点\nwannier90_orbital.dat 10 #这里 0表示spinless 1表示spinful (spinful-会按照wannier90 的轨道顺序，即一个轨道自旋上紧跟着自旋下) 26 #这里表示总轨道数 3s,0.300000012 , 0.000000000 , 0.000000000 4s,0.000000000 , 0.300000012 , 0.000000000 5s,0.699999988 , 0.699999988 , 0.000000000 6s,0.699999988 , 0.000000000 , 0.000000000 7s,0.000000000 , 0.699999988 , 0.000000000 8s,0.300000012 , 0.300000012 , 0.000000000  后面紧跟着 每个轨道位置第一列表示轨道的函数形式，z2pack 用不上，可以全部写s轨道 逗号是必须的 轨道的含义：  For the first col, we give a reference here s:   1   p:   z     x     y   d:   z**2     x * z     y * z     x**2 - y**2     x * y   f:   z**3     x * z**2     y * z**2     z * (x**2 - y**2)     x * y * z     x * (x**2 - 3 * y**2)     y * (3 * x**2 - y**2)   sp:   1 + x     1 - x   sp2:   1 / sqrt(3) - x / sqrt(6) + y / sqrt(2)     1 / sqrt(3) - x / sqrt(6) - y / sqrt(2)     1 / sqrt(3) + 2 * x / sqrt(6)   sp3:   1 + x + y + z     1 + x - y - z     1 - x + y - z     1 - x - y + z   sp3d:   1 / sqrt(3) - x / sqrt(6) + y / sqrt(2)     1 / sqrt(3) - x / sqrt(6) - y / sqrt(2)     1 / sqrt(3) + 2 * x / sqrt(6)     z / sqrt(2) + z**2 / sqrt(2)     -z / sqrt(2) + z**2 / sqrt(2)   sp3d2:   1 / sqrt(6) - x / sqrt(2) - z**2 / sqrt(12) + (x**2 - y**2) / 2     1 / sqrt(6) + x / sqrt(2) - z**2 / sqrt(12) + (x**2 - y**2) / 2     1 / sqrt(6) - y / sqrt(2) - z**2 / sqrt(12) - (x**2 - y**2) / 2     1 / sqrt(6) + y / sqrt(2) - z**2 / sqrt(12) - (x**2 - y**2) / 2     1 / sqrt(6) - z / sqrt(2) + z**2 / sqrt(3)     1 / sqrt(6) + z / sqrt(2) + z**2 / sqrt(3)      读取 1# read from wannier90_orbital.dat 2f = open(\u0026#34;wannier90_orbital.dat\u0026#34;,\u0026#34;r\u0026#34;) 3orbitals = [] 4print(\u0026#39;-----------------------------------------------------------\u0026#39;) 5SpinlessOrNot = int(f.readline().split(\u0026#34;#\u0026#34;)[0]) 6if SpinlessOrNot == 1: 7print(\u0026#39;----------------------- SOC -----------------------\u0026#39;) 8else: 9print(\u0026#39;---------------------- w/o SOC ----------------------\u0026#39;) 10Wan_num = int(f.readline()) 11print(Wan_num) 12if Wan_num != len(model.pos): 13print(\u0026#39;The second row is the number of wannier orbital\u0026#39;) 14Wan_num_str = f.readlines() 15Orb_enforce = []; 16for line in Wan_num_str: 17temp_str = line.strip(\u0026#39;\\n\u0026#39;) 18print(temp_str ) 19if temp_str[0] == \u0026#39;#\u0026#39;: 20continue 21temp_str_list = temp_str.split(\u0026#39;,\u0026#39;) 22Orbital_coords = [float(temp_str_list[1]),float(temp_str_list[2]),float(temp_str_list[3])] 23Orbital_temp_str = temp_str_list[0] 24#print(Orbital_temp_str) 25#Orbital_temp_str = temp_str_list[0].strip() 26try: 27Orbital_str = sr.WANNIER_ORBITALS[Orbital_temp_str] 28except (KeyError): 29Orbital_str = [Orbital_temp_str] 30except: 31print(\u0026#39;Unknown error\u0026#39;) 32# if sr.WANNIER_ORBITALS[Orbital_temp_str] is None: 33# Orbital_str = Orbital_temp_str 34# else: 3536for iorbstr in Orbital_str: 37if SpinlessOrNot == 1: 38for spin in (sr.SPIN_UP, sr.SPIN_DOWN): 39Orb_enforce.append(Orbital_coords); 40else: 41Orb_enforce.append(Orbital_coords); 42if len(orbitals) != len(model.pos): 43print(\u0026#39;The orbitals you construct is different with wannier90_hr given\u0026#39;) 44#print(np.array(Orb_enforce)) 45model.pos = np.array(Orb_enforce); 46print(\u0026#39;--------------------- wan information----------------------\u0026#39;) 47print(\u0026#39;The lattice uc is : \u0026#39;) 48print(model.uc) 49print(\u0026#39;The fractional pos of each wannier_center (Default is zero)\u0026#39;) 50print(model.pos) z2pack set setting 1settings = { 2\u0026#39;num_lines\u0026#39;: 41, 3\u0026#39;pos_tol\u0026#39;: 1e-2, 4\u0026#39;gap_tol\u0026#39;: 2e-2, 5\u0026#39;move_tol\u0026#39;: 0.1, 6\u0026#39;iterator\u0026#39;: range(8, 47, 2), 7\u0026#39;min_neighbour_dist\u0026#39;: 1e-2, 8} Construct z2pack obj 1tb_system = z2pack.tb.System(model,dim=3,bands = SelectBands,pos=model.pos) 2#tb_system = z2pack.tb.System(model,bands = SelectBands) 3#tb_system = z2pack.tb.System(model) z2pack calculation wcc 运算\n1result_wcc = z2pack.surface.run( 2system=tb_system, surface=lambda s, t: [t, s,0], **settings 3) plot\n1z2pack.plot.wcc( 2result_wcc, 3axis=ax, 4settings=dict( 5marker=\u0026#39;o\u0026#39;, 6color=\u0026#39;b\u0026#39;, 7markerfacecolor=\u0026#39;b\u0026#39; 8) 9) 10plt.savefig(\u0026#39;wcc.pdf\u0026#39;, bbox_inches=\u0026#39;tight\u0026#39;) 后面如有需要可以把wcc的数据弄出来\nchern 1result_chern = z2pack.surface.run( 2system=tb_system, surface=lambda s, t: [t, s,0], **settings 3) 45fig, ax = plt.subplots() 6z2pack.plot.chern( 7result_chern, 8axis=ax, 9settings=dict( 10marker=\u0026#39;o\u0026#39;, 11color=\u0026#39;b\u0026#39;, 12markerfacecolor=\u0026#39;b\u0026#39; 13) 14) 15plt.savefig(\u0026#39;chern.pdf\u0026#39;, bbox_inches=\u0026#39;tight\u0026#39;) 1617print( 18\u0026#34; Chern invariant: {0}\u0026#34;.format( 19z2pack.invariant.chern(result_chern) 20) 21) z2 1result_z2 = z2pack.surface.run( 2system=tb_system, surface=lambda s, t: [t, s/2,0], **settings 3) 45fig, ax = plt.subplots() 6z2pack.plot.wcc( 7result_z2, 8axis=ax 9) 10plt.savefig(\u0026#39;wcc_z2.pdf\u0026#39;, bbox_inches=\u0026#39;tight\u0026#39;) 1112print( 13\u0026#34; Chern invariant: {0}\u0026#34;.format( 14z2pack.invariant.z2(result_z2) 15) 16) ","date":"Jan 12, 2022","img":"","permalink":"https://parkman.top/en/posts/berryphase/z2pack/","series":[],"tags":["z2pack","python"],"title":"Z2pack 计算chern数"},{"categories":[],"content":"尝试构造一个 matlab 抽象类, 但是 matlab 貌似不具备 抽象值类 的功能(matlab 具备抽象类功能！) 所以我们将在后学定义 group 这个类为抽象类，暂时将默认以 矩阵为对象(记为U)，而其他对象的子类则重载算符即可。目前我们只尝试构建有限群, 后面有机会我们将构建连续群的类。\n群论发展简记   Late 1700s- Joseph-Louis Lagrange (1736-1813) 利用置换的概念，理解了三次和四次方程为什么有解。（Paolo Ruffini利用同样的思想证明了一般的五次或以上方程没有根式解） Early 1800s-Évariste Galois (killed in a duel in 1832 at age 20), and Niels Abel (died in 1829 at age 26 of TB) 阐述了代数方程的可解性和置换群的联系，真正利用群的概念解决了这个难题。 第一个正式的群的概念由Cayley于1854提出。Cayley, Hamilton, and Sylvester 引进了矩阵的表达。1890年Fedorov发展了各种对称性操作的数学方法，证明了晶体有且仅有230种空间群，次年Schönflies也独立的证明了这个结果。1920年群论开始应用于物理、化学等领域。里面还有很多著名数学家和物理学家的贡献，不一一而举。  群的定义 满足下列条件的二元组𝐺=(𝑆,⋅)可以称为群：\n 封闭性： ∀𝑥,𝑦∈𝑆,𝑥⋅𝑦∈𝑆; 结合律：∀𝑥,𝑦,𝑧∈𝑆,(𝑥⋅𝑦)⋅𝑧=𝑥⋅(𝑦⋅𝑧); 单位元：∃𝑒∈𝑆,∀𝑥∈𝑆,𝑒⋅𝑥=𝑥⋅𝑒=𝑥; 逆元：∀𝑥∈𝑆,∃𝑦∈𝑆,𝑥⋅𝑦=𝑦⋅𝑥=𝑒;  编码思路 把group类具象为一个含有矩阵U的对象， 实现一些基本的群操作，这样 后续继承的子类 只需重构 （ ==, \u0026lt; , .*, inv） 以及定义 E 强制单位元 这些函数，则可以满足群的要求\n定义群对象 1functionGi =group(U)2%构造此类的实例 3% G = group(U) 4arguments 5U = nan; 6end 7Gi.U = U; 8end 这里我们非常简单的初始化对象，方便继承;\n定义单位元 1% Identity element 2% There exists an element 𝑒⋅𝑥=𝑥⋅𝑒=𝑥; It is called the identity element of the group. 3methods(Static) 4functionE =Identity()5E = group(); 6E.e = true; 7end 8end 静态方法定义 单位元 ；直接附加一个属性叫 e; 在后续的基本操作中运用这个属性即可；\n定义逆元 1% inv 2functionG =inv(G1)3% Invert Operator 4% Standerd definition 5% need reload / 6if length(G1) == 1 7G =G1; 8if isnan(G.U) 9else 10G.U = inv(G.U); 11end 12else 13error(\u0026#39;not support G-1 yet.\u0026#39;); 14end 15end 我们只需定义 除法 即可定义逆元, 注意这里使用 ./ 表示对单个元素的除法 后面可以使用 /(mrdivide) 表示商群\n1functionG3 =rdivide(G1,G2)2if m == 1 \u0026amp;\u0026amp; n ==1 3if G1.Identity 4G3 = G2; 5G3.U = inv(G2); 6return; 7elseif G2.Identity 8G3 = G1; 9return; 10else 11G3 = G1; 12G3.U = G1.*G2.inv(); 13end 14else 15error(\u0026#39;.*/ is elemenary operator\u0026#39;); 16end 17end 定义乘法（封闭性） 1% .* 2functionG3 =times(G1,G2)3% 4m = length(G1); 5n = length(G2); 6if m == 1 \u0026amp;\u0026amp; n == 1 7if G1.Identity 8G3 = G2; 9G3.U = inv(G2); 10return; 11elseif G2.Identity 12G3 = G1; 13return; 14else 15G3 = G1; 16G3.U = G1.U*G2.U; 17end 18else 19error(\u0026#39;.*/ is elemenary operator\u0026#39;); 20end 21end 其他基本操作 我们仅仅重载这些函数是不可能复现群的结构的 想要满足群的封闭性, 我们必须得让每个群元互不相同\n判别相等 以及 判别一个群和另一群是否等价 1% == 2functionTrueOrFalse =eq(G1,G2)3% return first 4% 5m = length(G1); 6n = length(G2); 7if m == 1 \u0026amp;\u0026amp; n ==1 8if isequal(G1.U,G2.U) 9TrueOrFalse = true; 10else 11TrueOrFalse = false; 12end 13return; 14elseif m == 1 15TrueOrFalse(n) = false; 16for i = 1:n 17TrueOrFalse(n) = eq(G1,G2(i)); 18end 19return; 20elseif n == 1 21TrueOrFalse(m) = false; 22for i = 1:m 23TrueOrFalse(m) = eq(G1(i),G2); 24end 25return; 26elseif m == 0 \u0026amp;\u0026amp; n == 0 27TrueOrFalse =true; 28return; 29elseif m == 0 || n == 0 30TrueOrFalse = false; 31return 32else 33% unique need sort( sort need overload lt(less than)) 34G1 = unique(G1); 35G2 = unique(G2); 36% 37m = length(G1); 38n = length(G2); 39if m == n 40TrueOrFalse = false(size(G1)); 41for i =1:m 42TrueOrFalse(i) = eq(G1(i),G2(i)); 43end 44else 45% generate_group ? 46TrueOrFalse =false; 47end 48end 49end 定义 \u0026lt; 我们上面重载==时候，在最后判别 群与群等价时，使用了unique，unique会调用sort,sort 会调用 \u0026lt; 所以定义 lt 也是非常重要的\n1functionTrueOrFalse =lt(G1,G2)2% Sort group elements: 3if G1.Identity \u0026amp;\u0026amp; ~G2.Identity 4TrueOrFalse = true; 5return; 6elseif ~G1.Identity \u0026amp;\u0026amp; G2.Identity 7TrueOrFalse = false; 8return; 9else 10end 11L = G1.U(:) \u0026lt; G2.U(:); 12B = ~(G1.U(:) == G2.U(:)); 13for i =1:length(B) 14if B(i) 15TrueOrFalse = L(i); 16return; 17end 18end 19TrueOrFalse = false; 20end 这样重载sort使用插入排序即可\n1% sort 2function[group_list,indSort] =sort(group_list)3% Use insertsort  4[group_list,indSort] = group.insertsort(group_list); 5end 群论的一些特性 生成元 张成一个群 1functiongroup =generate_group(gens)2% Generate group from gens 3% 4% Parameters 5% ---------- 6% gens : iterable of generator of a group 7% 8% Returns 9% ------- 10% group 11% 12% need reload minus 13gens = unique(gens); 14% here we keep all the elements generated so far 15group = gens; 16% these are the elements generated in the previous step 17oldgroup = gens; 18% fprintf(\u0026#39;group muplicity: %d\\n\u0026#39;,group.order); 19while true 20newgroup= unique(oldgroup * gens); 21% fprintf(\u0026#39;newgroup muplicity: %d\\n\u0026#39;,newgroup.order); 22% only keep those that are new 23newgroup = newgroup - group; 24% fprintf(\u0026#39;newgroup muplicity (after -): %d\\n\u0026#39;,newgroup.order); 25% if there are any new, add them to group and set them as old 26if ~isempty(newgroup) 27group = unique([group,newgroup]); 28oldgroup = newgroup; 29% if there were no new elements, we are done 30else 31break; 32end 33end 34%group = group; 35end 测试 有了这个类 让我们来测试一下 完善我们对群的定义\n验证群的定义 以pauli矩阵为例，探究群的定义\n首先定义 三个pauli矩阵 并且初始化 group 对象\n1sigma_x = sym([0 1;1 0]);sigma_y = sym([0 1i;-1i 0]);sigma_z = sym([1 0;0 -1]); 2Pauli_class = [group(sigma_x),group(sigma_y),group(sigma_z)]; 结果告诉我们 Pauli_class = 1*3 group\n封闭性 1ismember(group(sigma_x),Pauli_class) 2ismember(group(sigma_y),Pauli_class) 3ismember(group(sigma_x*sigma_y),Pauli_class) 4ismember(group(sigma_x)*group(sigma_y),Pauli_class) 可以看到,我们构建的这个群 并不具备封闭性； 所以使用 Pauli_class = Pauli_class.generate 可以看到 此时群元有 16个\n结合率 1sigma_x*(sigma_y*sigma_z) == (sigma_x*sigma_y)*sigma_z 单位元 1Pauli_class(1).E == Pauli_class 唯一逆元 1Pauli_class(2).inv == Pauli_class 2Pauli_class(2).inv * Pauli_class(2) == Pauli_class(1).E 群的阶数 1Pauli_class.order 重排定理 群G中任意元素以相同方式作用在群中所有元素上, 得到的所有结果的集合仍是群本身.\n1Pauli_class(1)*Pauli_class == Pauli_class 子群 任何一个群都含有两个子群\n问如何找出一个群的全部子群?\nLagrange 定理 𝐺的每个子群的阶数都是𝐺的阶数的因数.\n 𝑝(𝑝是素数)阶群𝐺均是Abel群,且均同构于整数模𝑝的加法群ℤ𝑝.  因暴力运算太慢，转为数值运算\n1sigma_x = group(([0 1;1 0])); 2sigma_y = group(([0 1i;-1i 0])); 3sigma_z = group(([1 0;0 -1])); 4Pauli_class = [sigma_x,sigma_y,sigma_z]; 5Pauli_class = Pauli_class.generate_group(); 6SubClassOfPauli_class = Pauli_class.subgroup(); 我们搜索出了 由Pauli矩阵作为生成元的群的子群 其群阶为16 16 的因数有{1,16,2,8,4}, 共搜索出30个子群\n陪集 共轭 里用Oper类创建2维的C4v旋转群，Oper类是group类的子类\n1Square_group = Oper.square(false,false); 得到如下 group\nSquare_group =\n1 : 1 2 : R(pi) 3 : M([1 0]) 4 : M([0.71 0.71]) 5 : R(pi/2) 6 : R(-pi/2) 7 : M([-0.71 0.71]) 8 : M([0 -1])\n肉眼可见 5 和 6 是 C4z 的正向与反向旋转 属于同类\n1G_alpha = Square_group(5); 2G_beta = Square_group(6); 3conjugate(G_alpha,G_beta,Square_group) 也可以找出一个元素的共轭类\n1G_alphaConjugation = G_alpha.conjugation(Square_group) 利用共轭类也可以分割群\n1ConjugationClassifyCollection = Square_group.conjugationseparation() 把群分成了5类，暗示其特征标表是5*5的\n正规子群 对于 C4v群 求其正规子群, 有两个平凡正规子群+4个非平凡正规子群\n1NormalSubgroup = normalsubgroup(Square_group); 商群 1Quotientgroups = Square_group/NormalSubgroup{3}; 秩 生成元 暴力计算\n1Generators = generator(Square_group); 2Rank = rank(Square_group) C4v 有12种 最小生成元组合方式 其秩为2\n","date":"Jan 2, 2022","img":"","permalink":"https://parkman.top/en/posts/matlab/basic-tool/grouptheory/","series":[],"tags":["matlab","group theory"],"title":"Group Theory"},{"categories":[],"content":"今天来学习一下 如何判断磁性结构的对称性\nMagnetic space groups 共有四种磁空间群\n Type I (Colorless groups) 230: 纯空间群 无额外对称性 Type II (Grey groups) 230: 空间群 + 每一个空间群的对称操作都会额外附带一个反对称操作 例如: SG166 + $\\mathcal{T}$ Type III(Colorless groups) 674: 空间群 + 一半数量的对称操作额外附带一个反对称操作 Type IV (Colorless groups) 517: 空间群 + 额外的平移联合时间反演对称性  Type I Type I magnetic space groups, $\\mathcal{M}_I$ are identical to the ordinary space groups ${G}$:\n$\\mathcal{M}_I = {G}$\nType II Type II magnetic space groups, $\\mathcal{M}_II$, are made up of all the symmetry operations of the crystallographic space group, ${G}$, plus the product of those operations with time reversal operation, $\\mathcal{T}$.\n$\\mathcal{M}_II = G + \\mathcal{T}G$\nType III Type III magnetic space groups, $\\mathcal{M}_{III}$ are constructed using a group ${H}$, which is a subgroup of ${G}$ with index 2.\n$\\mathcal{M}_III = G + \\mathcal{T}(G-H)$\nType IV Type IV magnetic space groups, $\\mathcal{M}_IV$ are are constructed with the use of a pure translation, {$E|t_0$}, which is Seitz notation for null rotation and a translation, $t_0$.\n$$ \\mathcal{M}{IV}=G+\\mathcal{T}\\left{E \\mid t{0}\\right}G $$\nMagnetic stucture To determine a micro magnetic structure, such techniques can be used:\n neutron diffraction  Determine a magnetic group via FINDSYM  Type of anti-ferromagnetic [^1]Przystawa J, Suski W. Magnetic Ordering in Uranium Compounds with Crystal Structures of Anti‐Cu2Sb and PbFCl Types. Molecular Field Approximation[J]. physica status solidi (b), 1967, 20(2): 451-459.\nA simple test  upload your cif file  modify the structure  Here I choose \u0026ldquo;Include magnetic moments. moments. Give components along the three vectors above which define a conventional unit cell.\u0026rdquo;\nset the local mganetic momentum directing z-axis for each C atoms in graphene.\n then click OK  Checkout the result  1Lattice parameters, a,b,c,alpha,beta,gamma: 22.45600 2.45600 20.00000 90.00000 90.00000 120.00000 3Centering: P 4Number of atoms in unit cell: 52 6Type of each atom: 72*C 8Position Occ Magnetic moment 91 C 0.33333 0.66667 0.25000 1.000 0.000 0.000 1.000 102 C 0.66667 0.33333 0.25000 1.000 0.000 0.000 1.000 这部分描述了我们上传的晶格结构信息, 该网站分析出了是我们这种设置是什么对称性\n1Space Group 191.240 P6/mm\u0026#39;m\u0026#39; 同时，我们也可以下载这个cif文件，改后缀为cif，用vesta打开 当然也可以用该网站小组开发的 晶体结构软件 ISOVIZ complex example 我们以 PtCl3 为例，判断其在不同磁结构下 属于什么磁群 有什么样的Mirror对称性\n","date":"Dec 24, 2021","img":"","permalink":"https://parkman.top/en/posts/dft/%E5%88%A4%E6%96%AD%E7%A3%81%E6%80%A7%E7%BB%93%E6%9E%84/","series":[],"tags":["VASP","DFT"],"title":"判断磁性结构的对称性"},{"categories":[],"content":" Feed-forward Network Functions Network Training Error Backpropagation The Hessian Matrix Regularization in Neural Networks Mixture Density Networks Bayesian Neural Networks ","date":"Oct 15, 2021","img":"","permalink":"https://parkman.top/en/posts/lectures/uncertaintyquantification-4/","series":[],"tags":["matlab","python"],"title":"不确定性量化方法学习-神经网络"},{"categories":[],"content":"今天来学习一下 vasp的scan计算\n先来看一下官网定义 ** METAGGA=SCAN The SCAN (Strongly constrained and appropriately normed) [7] functional is a semilocal density functional that fulfills all known constraints that the exact density functional must fulfill. There are indications that this functional is superior to most gradient corrected functionals [8]. This functional is only available as of VASP version ≥ 5.4.3. ** METAGGA=RSCAN The rSCAN (regularized SCAN) functional [9], introduces regularizations that improve the numerical sensitivity and convergence behavior. These regularizations break several of the exact constraints that the parent SCAN functional was designed to satisfy. However, testing has indicated that the accuracy of rSCAN can be inferior to SCAN in some cases [10]. This functional is available as of VASP version ≥ 6.2.0. ** METAGGA=R2SCAN The r{\\displaystyle ^{2}}^{2}SCAN (regularized-restored SCAN) functional [11] modifies the regularizations introduced in rSCAN to enforce adherence to the exact constraints obeyed by SCAN. It fulfills all known constraints. However, it only recovers the slowly varying density-gradient expansion for exchange to second order, while SCAN recovers the expansion to 4th order. Testing indicates that r{\\displaystyle ^{2}}^{2}SCAN at least matches the accuracy of the parent SCAN functional but with significantly improved numerical efficiency and accuracy under low-cost computational settings. This functional is available as of VASP version ≥ 6.2.0, or in version 5.4.4 by patch 4. **\n","date":"Oct 11, 2021","img":"","permalink":"https://parkman.top/en/posts/dft/vasp_metagga/","series":[],"tags":["VASP","DFT"],"title":"VASP MetaGGA"},{"categories":[],"content":" Binary Variables Multinomial Variables The Gaussian Distribution The Exponential Family  Binary Variables Coin flipping: heads=1, tails=0 $$p(x=1|\\mu) = \\mu$$\nBernoulli Distribution One coin flipping $$Bern(x|\\mu) = \\mu^x(1-\\mu)^{1-x}$$\nBernoulli Family 来自瑞士巴塞尔的商人与学者家族\n 雅各布·伯努利（1654–1705），在概率方面的贡献突出，以伯努利分布而闻名。 约翰·伯努利（1667–1748），雅各布的弟弟，以最速降线而闻名，教授过欧拉。变分法开创者。把洛必达法则卖给洛必达。 丹尼尔·伯努利（1700–1782），约翰的小儿子，在流体力学方面贡献突出，以伯努利定律而闻名。  Probability Density Function For discrete distributions, the pdf is also known as the probability mass function (pmf). $$ f(x | p)= \\begin{cases}1-p, \u0026amp; x=0 \\newline p, \u0026amp; x=1 \\end{cases} $$\nCumulative Distribution Function $$ F(x | p)= \\begin{cases}1-p, \u0026amp; x=0 \\newline p, \u0026amp; x=1 \\end{cases} $$\nDescriptive Statistics $$ \\begin{aligned} \\mathbb{E}[x] \u0026amp;=\\mu \\newline \\operatorname{var}[x] \u0026amp;=\\mu(1-\\mu) \\end{aligned} $$\nExamples The Bernoulli distribution is a special case of the binomial distribution, where N = 1.\n1p = 0.8; 2x = 0:1; 3y = binopdf(0:1,1,p); 4bar(x,y,1) 5xlabel(\u0026#39;Observation\u0026#39;) 6ylabel(\u0026#39;Probability\u0026#39;) Binomial Distribution N coin flips: $p(m heads|N,\\mu)$\n$$ \\operatorname{Bin}(m \\mid N, \\mu)=\\left(\\begin{array}{l} N \\newline m \\end{array}\\right) \\mu^{m}(1-\\mu)^{N-m} $$\nProbability Density Function For discrete distributions, the pdf is also known as the probability mass function (pmf). $$ f(x \\mid N, p)=\\left(\\begin{array}{c} N \\newline x \\end{array}\\right) p^{x}(1-p)^{N-x} \\quad ; \\quad x=0,1,2, \\ldots, N $$\nCumulative Distribution Function $$ F(x \\mid N, p)=\\sum_{i=0}^{x}\\left(\\begin{array}{c} N \\newline i \\end{array}\\right) p^{i}(1-p)^{N-i} \\quad ; \\quad x=0,1,2, \\ldots, N $$\nDescriptive Statistics $$ \\begin{aligned} \\mathbb{E}[m] \u0026amp;=N\\mu \\newline \\operatorname{var}[m] \u0026amp;=N\\mu(1-\\mu) \\end{aligned} $$\nExamples The Bernoulli distribution is a special case of the binomial distribution, where N = 1.\n1x = 0:10; 2y = binopdf(x,10,0.25); 3bar(x,y,1) 4xlabel(\u0026#39;Observation\u0026#39;) 5ylabel(\u0026#39;Probability\u0026#39;) MLE(maximum likelihood estimator) for binomial max $\\ln p(\\mathcal{D}|\\mu)$ The MLE is just the sample mean: $\\mu_{ML} = 1/N \\sum_{n=1}^{N}x_n$\nOver-fitting problem Underestimate the variance\nBayes treatment of Binary Variables the beta distribution $$ \\operatorname{Beta}(\\mu \\mid a, b)=\\frac{\\Gamma(a+b)}{\\Gamma(a) \\Gamma(b)} \\mu^{a-1}(1-\\mu)^{b-1} $$\nGamma function is defined by\nGamma function $$ \\Gamma(z)=\\int_{0}^{\\infty} x^{z-1} e^{-x} d x $$ It is known as the Euler integral of the second kind.\nGiven that $\\Gamma(1)=1$ and $\\Gamma(n+1)=n \\Gamma(n)$, $\\Gamma(n)=1 \\cdot 2 \\cdot 3 \\cdots(n-1)=(n-1) !$\nwe can use beta function here as well\nBeta function $$ \\mathrm{B}(x, y)=\\int_{0}^{1} t^{x-1}(1-t)^{y-1} d t $$\nThe beta function is also called the Euler integral of the first kind.\n It is symmetric,$B(x,y) = B(y,x)$ It is related to Gamma function $B(x,y) =\\Gamma(x)\\Gamma(y)/\\Gamma(x+y))$  then we can rewrite the Beta distribution with Beta function\n$$ \\operatorname{Beta}(\\mu \\mid a, b)=\\frac{1}{B(x,y)} \\mu^{a-1}(1-\\mu)^{b-1} $$\nThe Beta distribution provides the conjugate prior for the Bernoulli distribution. ???\nDescriptive Statistics $$ \\begin{aligned} \\mathbb{E}[\\mu] \u0026amp;=\\frac{a}{a+b}\\newline \\operatorname{var}[\\mu] \u0026amp;=\\frac{ab}{(a+b)^2(a+b+1)} \\end{aligned} $$\nhyperparameters a and b are also called hyperparameters.\n1X = 0:.01:1; 2y1 = betapdf(X,0.1,0.1); 3y2 = betapdf(X,1,1); 4y3 = betapdf(X,2,3); 5y4 = betapdf(X,8,4); 67figure 8plot(X,y1,\u0026#39;Color\u0026#39;,\u0026#39;r\u0026#39;,\u0026#39;LineWidth\u0026#39;,2) 9hold on 10plot(X,y2,\u0026#39;LineStyle\u0026#39;,\u0026#39;-.\u0026#39;,\u0026#39;Color\u0026#39;,\u0026#39;b\u0026#39;,\u0026#39;LineWidth\u0026#39;,2) 11plot(X,y3,\u0026#39;LineStyle\u0026#39;,\u0026#39;:\u0026#39;,\u0026#39;Color\u0026#39;,\u0026#39;g\u0026#39;,\u0026#39;LineWidth\u0026#39;,2) 12plot(X,y4,\u0026#39;LineStyle\u0026#39;,\u0026#39;:\u0026#39;,\u0026#39;Color\u0026#39;,\u0026#39;k\u0026#39;,\u0026#39;LineWidth\u0026#39;,2) 13legend({\u0026#39;a = b = 0.1\u0026#39;,\u0026#39;a = b = 1\u0026#39;,\u0026#39;a =2,b = 3\u0026#39;,\u0026#39;a =8,b = 4\u0026#39;},\u0026#39;Location\u0026#39;,\u0026#39;NorthEast\u0026#39;); 14hold off Prior·Likelihood = Posterior Posterior =\n$$ \\begin{aligned} p\\left(\\mu \\mid a_{0}, b_{0}, \\mathcal{D}\\right) \u0026amp; \\propto p(\\mathcal{D} \\mid \\mu) p\\left(\\mu \\mid a_{0}, b_{0}\\right) \\newline \u0026amp;=\\left(\\prod_{n=1}^{N} \\mu^{x_{n}}(1-\\mu)^{1-x_{n}}\\right) \\operatorname{Beta}\\left(\\mu \\mid a_{0}, b_{0}\\right) \\newline \u0026amp; \\propto \\mu^{m+a_{0}-1}(1-\\mu)^{(N-m)+b_{0}-1} \\newline \u0026amp; \\propto \\operatorname{Beta}\\left(\\mu \\mid a_{N}, b_{N}\\right) \\end{aligned} $$\nwhere $a_N = a_0 +m$, $b_N = b_0 +(N-m)$\n1X = 0:.01:1; 2y1 = betapdf(X,2,2); 3y2 = betapdf(X,3,2); 4y3 = 1/1 * X; 5y4 = y1.*y3; 67figure 8subplot(2,2,1) 9plot(X,y1,\u0026#39;Color\u0026#39;,\u0026#39;r\u0026#39;,\u0026#39;LineWidth\u0026#39;,2);title(\u0026#39;prior,a = 2, b = 2\u0026#39;);ylim([0,2]); 10subplot(2,2,2) 11plot(X,y2,\u0026#39;LineStyle\u0026#39;,\u0026#39;-.\u0026#39;,\u0026#39;Color\u0026#39;,\u0026#39;b\u0026#39;,\u0026#39;LineWidth\u0026#39;,2);title(\u0026#39;Beta a = 3, b = 2\u0026#39;);ylim([0,2]); 12subplot(2,2,3) 13plot(X,y3,\u0026#39;LineStyle\u0026#39;,\u0026#39;:\u0026#39;,\u0026#39;Color\u0026#39;,\u0026#39;g\u0026#39;,\u0026#39;LineWidth\u0026#39;,2);title(\u0026#39;likelihood function\u0026#39;);ylim([0,2]); 14subplot(2,2,4) 15plot(X,y4,\u0026#39;LineStyle\u0026#39;,\u0026#39;--\u0026#39;,\u0026#39;Color\u0026#39;,\u0026#39;k\u0026#39;,\u0026#39;LineWidth\u0026#39;,2);title(\u0026#39;posterior\u0026#39;);ylim([0,2]); Mulitinomial Variables 1-of-K scheme","date":"Oct 5, 2021","img":"","permalink":"https://parkman.top/en/posts/lectures/uncertaintyquantification-2/","series":[],"tags":["matlab","python"],"title":"不确定性量化方法学习-概率分布"},{"categories":["Computational Chemistry"],"content":"Introduction to Computational Chemistry - Third Edition\nFrank Jensen Department of Chemistry, Aarhus University, Denmark\nIntroduction  Chemistry is the science dealing with construction, transformation and properties of molecules.\n The only important physical force for chemical phenomena is the Coulomb interaction between these charged particles.  Overview “many-body problem” Systems composed of more than two particles cannot be solved by analytical methods, but Computational methods.\nthe Breit term $$ \\begin{equation} \\mathbf{V}_{\\text {elec }}\\left(\\mathbf{r}_{12}\\right)=\\frac{1}{r_{12}}\\left[1-\\frac{1}{2}\\left(\\boldsymbol{\\alpha}_{1} \\cdot \\boldsymbol{\\alpha}_{2}+\\frac{\\left(\\boldsymbol{\\alpha}_{1} \\cdot \\mathbf{r}_{12}\\right)\\left(\\boldsymbol{\\alpha}_{2} \\cdot \\mathbf{r}_{12}\\right)}{r_{12}^{2}}\\right)\\right] \\end{equation} $$\nThe first-order correction is known as the Breit term, and α1 and α2 represent velocity operators. The first term in Equation (1.4) can be considered as a magnetic interaction between two electrons, but the whole Breit correction describes a “retardation” effect, since the interaction between distant particles is “delayed” relative to interactions between close particles, owing to the finite value of c (in atomic units, c ∼ 137).\nDimains of dynamical equations potential energy surface (PES) one of the major problems is calculating the electronic energy for a given nuclear configuration to give a potential energy surface.\nForce Field Methods also referred to as molecular mechanics (MM) methods.\nHartree-Fock","date":"Sep 18, 2021","img":"","permalink":"https://parkman.top/en/posts/reading/introductiontocomputationalchemistry_frankjensen/basic/","series":["Reading"],"tags":["physics"],"title":"Introduction to Computational Chemistry I"},{"categories":[],"content":" 线性模型、神经网络、核方法、图模型和近似推断 等机器学习方法 介绍蒙特卡洛、广义多项式混沌、PDF/CDF方法、数据 同化等不确定性量化方法 熟练掌握这些方法的数值实现和计算机建模  Uncertainty Quantification (UQ)  随机不确定性 认知不确定性  Machine Learning (ML)  Supervised learning: classification, regression Unsupervised learning: clustering, density estimation, visualization Reinforcement learning: maximize a reward  学习路线  Chapter1: Introduction Polynomial Curve Fitting (1D) $sin(2\\pi x)$ the prepare data x is set by the correspond value of $sin(2\\pi x)$ with a Gaussian distribution noise. \\begin{equation} y(x, \\mathbf{w})=w_{0}+w_{1} x+w_{2} x^{2}+\\ldots+w_{M} x^{M}=\\sum_{j=0}^{M} w_{j} x^{j} \\end{equation}\na nonliner function : $y(x, \\mathbf{w})$; a liner model of w  error function $$ \\begin{equation} E(\\mathbf{w})=\\frac{1}{2} \\sum_{n=1}^{N}\\left\\{y\\left(x_{n}, \\mathbf{w}\\right)-t_{n}\\right\\}^2 \\end{equation} $$ Error function \u0026gt; 0\nfitting Result root mean square(RMS) \\begin{equation} E_{\\mathrm{RMS}}=\\sqrt{2 E\\left(\\mathbf{w}^{\\star}\\right) / N} \\end{equation}\nOver-fitting increase datasize regularization adding a penalty term\nProbability Theory sum rule and product rule  SUM RULE: $p(X) = \\sum_Y p(X,Y)$ PRODUCT RULE: $p(X,Y) = p(Y|X)p(X)$  Bayes theorem product theorem twice\nexpectation and condition expectation expectation conditional expectation variance covariance Bayesian probabilities: probabilities provide a quantification of uncertainty what is Bayes viewpoint, still a mystery https://cyx0706.github.io/2020/10/24/deep-learning-intro/ Gaussian distribution full Bayersian Model Selection Decision theory informational theory Exercises 1 1.1","date":"Sep 15, 2021","img":"","permalink":"https://parkman.top/en/posts/lectures/uncertaintyquantification/","series":[],"tags":["matlab","python"],"title":"不确定性量化方法学习"},{"categories":[],"content":"代码转流程图\nVisustin  通过源代码创建流程图。Visustin自动将源代码转换为流程图。 https://www.aivosto.com/getshareware.html For Matlab https://www.mathworks.com/help/stateflow/ug/convert-MATLAB-to-flow-chart.html#responsive_offcanvas 1 Open a new standalone chart.edit hailstone.sfx\n2 On the State Chart tab, select Pattern \u0026gt; Select File.\n3 In the dialog box, choose the MATLAB script and click Open. The Pattern Wizard adds a flow chart and a graphical function to your Stateflow chart. Double-click the graphical function to see its contents.\n4 In the Symbols pane, click Resolve Undefined Symbols . The Stateflow Editor resolves u and y as local data.\n5 Save your chart.\nFORTRAN Understand Understand为您提供有关您的代码的相关信息。快速查看关于函数，类，变量等的所有信息，如何使用，调用，修改和交互。轻松查看您想要了解代码的呼叫树，指标，参考信息和任何其他信息。\n支持多语言：Ada, C, C++, C#, Java, FORTRAN, Delphi, Jovial, and PL/M ，混合语言的project也支持\n用法 pyhton python 的工具很多\n","date":"Sep 15, 2021","img":"","permalink":"https://parkman.top/en/posts/cs_resource/code2diagram/","series":[],"tags":["Online资源"],"title":"代码转流程图"},{"categories":[],"content":"What is CiteSpace?\nSimply speaking, it\u0026rsquo;s a visualization tool to analyze articles in China and aboard to help you know about the history and development of a subject or a research field.\nAs a scientific researcher, it is always a problem to select the most suitable article in the millions of publications, find the most significant key information, figure out the origin and past, perceive the most active region of the research frontiers and the most possible trend of the development of this field.\nWith the CiteSpace, easy as pie!\nRequirement  OS: Windows Env: Java With system environment.  Download http://cluster.cis.drexel.edu/~cchen/citespace/download/ WOS choose WOS classical mode and select the database from WOS, then name the export txt as download_*.txt\nExport\nUsage Create a new project from WOS Press the Go button\nMechanism Co-Citation analysis If two articles both exist in one literature\u0026rsquo;s reference, arCo-Citation\nReference [^1] 给CiteSpace初学者的学习指南 - 知乎 [^2] CiteSpace入门教程 - 简书 [^3] CiteSpace: visualizing patterns and trends in scientific \u0026hellip; ","date":"Sep 14, 2021","img":"","permalink":"https://parkman.top/en/posts/java/citespace/","series":[],"tags":["jave","article"],"title":"Citespace Test"},{"categories":[],"content":"VASP经常碰见不收敛的现象 感觉还是技艺不精啊 参考网上各位老师的帖子 再结合自己的实际情况进行测试\nhttp://blog.wangruixing.cn/2019/05/01/scf/ 尝试使用更大的SIGMA值，如SIGMA=0.5，先粗略收敛，再读取WAVECAR用小的SIGMA计算 尝试使用更大的SIGMA值，如SIGMA=0.5，先粗略收敛，再读取WAVECAR用小的SIGMA计算。(此方法经常奏效，但是读波函数再次用小SIGMA优化有可能碰到仍不收敛的情况。) 实际测试情况\nSIGMA AMIX BMIX AMIX BMIX From VASO  ","date":"Sep 14, 2021","img":"","permalink":"https://parkman.top/en/posts/dft/vasp%E6%94%B6%E6%95%9B/","series":[],"tags":["VASP","DFT"],"title":"VASP 收敛问题"},{"categories":["vasplib"],"content":"vasplib:POSCAR 之前在程序使用的过程中，主要的报错都来自于输入文件，可见这部分代码需要重构，增添错误信息，并且最好有个清晰的说明\nPOSCAR input POSCAR 的格式，官网介绍的非常清楚。\nGraphene 在POSCAR的基础格式上，为了引入轨道的信息，我们需要加入额外的轨道的信息，以石墨烯为例，主要有 $p_z$ 轨道构成，则POSCAR应该在每条轨道后面添上补充的轨道信息\ngraphene\n1.0\n2.4560000896 0.0000000000 0.0000000000\n-1.2280000448 2.1269584693 0.0000000000\n0.0000000000 0.0000000000 20.0000000000\nC\n2\nDirect   new TypeIt(\"#myElement\", { strings:\"0.333333333 0.666666667 0.250000000 C p z\\u003cbr\\u003e\\n\\u003c!-- raw HTML omitted --\\u003e\\n0.666666667 0.333333333 0.250000000 C p z\", }).go(); \nAutofill 再遇到一些大体系的POSCAR，这样一个一个添加 有些麻烦，之前可以用vi块输入的方式解决，现在我们提供更加方便的办法，以21.78TBG为例\n\u0026lsquo;POSCAR_21.78\u0026rsquo; POSCAR\n1.0\n6.5307998657 0.0000000000 0.0000000000\n-3.2653999329 5.6558385907 0.0000000000\n0.0000000000 0.0000000000 23.0000000000\nC\n28\nDirect\n0.8095700130000003 0.0476298940000001 0.4271699660000000 C p z\n0.9523701059999999 0.7619401190000001 0.4271699660000000 C p z\n0.2380598809999998 0.1904299869999997 0.4271699660000000 C p z\n0.1904299869999997 0.9523701059999999 0.4271699660000000 C p z\n0.0476298940000001 0.2380598809999998 0.4271699660000000 C p z\n0.7619401190000002 0.8095700130000003 0.4271699660000000 C p z\n0.0476298940000000 0.8095700130000003 0.5728300340000000 C p z\n0.7619401190000002 0.9523701059999999 0.5728300340000000 C p z\n0.1904299869999997 0.2380598809999998 0.5728300340000000 C p z\n0.9523701059999999 0.1904299869999997 0.5728300340000000 C p z\n0.2380598809999998 0.0476298940000001 0.5728300340000000 C p z\n0.8095700130000003 0.7619401190000001 0.5728300340000000 C p z\n0.6190698610000003 0.0952398940000000 0.4271699660000000 C p z\n0.9047601059999999 0.5238299670000002 0.4271699660000000 C p z\n0.4761700329999998 0.3809301389999998 0.4271699660000000 C p z\n0.3809301389999997 0.9047601060000000 0.4271699660000000 C p z\n0.0952398940000000 0.4761700329999998 0.4271699660000000 C p z\n0.5238299670000002 0.6190698610000002 0.4271699660000000 C p z\n0.0952398939999999 0.6190698610000002 0.5728300340000000 C p z\n0.5238299670000003 0.9047601060000000 0.5728300340000000 C p z\n0.3809301389999998 0.4761700329999998 0.5728300340000000 C p z\n0.9047601060000000 0.3809301389999998 0.5728300340000000 C p z\n0.4761700329999997 0.0952398940000000 0.5728300340000000 C p z\n0.6190698610000003 0.5238299670000002 0.5728300340000000 C p z\n0.6666666666666667 0.3333333333333334 0.4271699660000000 C p z\n0.3333333333333333 0.6666666666666665 0.4271699660000000 C p z\n0.3333333333333333 0.6666666666666667 0.5728300340000000 C p z\n0.6666666666666667 0.3333333333333334 0.5728300340000000 C p z   现在我们只需在首行 加入信息即可\nPOSCAR\n1.0\n6.5307998657 0.0000000000 0.0000000000\n-3.2653999329 5.6558385907 0.0000000000\n0.0000000000 0.0000000000 23.0000000000\nC\n28\nDirect\n0.8095700130000003 0.0476298940000001 0.4271699660000000 C p z\n\u0026hellip;\u0026hellip;\nformat 每一行需要补充的信息是\n   element L{s,p,d,f} basis Function {I,x,y,z,x2-y2,z2,xy,xz,yz,\u0026hellip;} spin {1,-1,nan}    shortcodes for input 事实上我们可以略去 basis Function这里不写，在 L{s,p,d,f}这里填入一些短码，来加快我们轨道输入文件POSCAR的修改\n p: $p_z~p_x~p_y$ pxy: $p_x~p_y$ sp: $s~p_z~p_x~p_y$ spz: $s~p_z$ d: $d$ sd: $sd$ pd: $pd$ f: $not be implemented$  spglib_matlab 小编写过一个matlab调用spglib的程序，可以让我们在读取POSCAR的同时，也获得了体系所拥有的对称性，对称操作等信息。 使用这系列的功能，需要用matlab支持的C编译器在主机上编译spglib.\nelement 在读取POSCAR的同时，我们也同时读取了元素周期表的基本信息作为参考，数据放在vasplib主目录 bin下面的element.txt.\nsymbolic 在处理六角格子的时候，我们的基矢量往往是无理数，这在理论分析与解析分析的时候会带来数值误差。 我们允许符号化的Rm与orbL, 只要POSCAR的精度达到1e-13，便可以把数值化的POSCAR读取成符号化的晶格基本信息\n","date":"Sep 8, 2021","img":"https://i.loli.net/2021/09/08/SuLypHizO8lt75G.png","permalink":"https://parkman.top/en/posts/matlab/vasplib/vasplib_poscar/","series":["vasplib","HR"],"tags":["matlab","plot","POSCAR","TB"],"title":"Vasplib InputFile (1) POSCAR"},{"categories":["vasplib"],"content":"vasplib:HR:Type HR - a powerful TB tools\nType HR 的数据类型共有三种\n mat (default) 之前已经简单介绍过了 sparse 这个主要针对大型稀疏矩阵, 研究TBG时特别设置的 list 这种数据结构本身就是稀疏格式，同时方便对称性操作，缺点是看起来不太直观，这是后续优先发展和使用的模式 HR的数据结构类型之间可以任意切换    mat 以Graphene为例回顾一下 mat 模式\nGraphene 只考虑最近邻Hopping 石墨烯HR中的R只有\n0 0 0 1 0 0 0 1 0 -1 0 0 0 -1 0  这5种 对于A子格有 [0,0,0],[1,0,0],[0,-1,0]; 对于B子格有 [0,0,0],[-1,0,0],[0,1,0];\n1syms t real; 2Grpahene_TB = HR(2); 3A_vectorL = [0,0,0;1,0,0;0,-1,0]; 4B_vectorL = [0,0,0;-1,0,0;0,1,0]; 5Grpahene_TB = Grpahene_TB.set_hop(t,1,2,A_vectorL,\u0026#39;sym\u0026#39;); 6Grpahene_TB = Grpahene_TB.set_hop(t,2,1,B_vectorL,\u0026#39;sym\u0026#39;) 对于相同的Hopping我们可以一次指定多个R 这个时候,我们去看整个TB的结构Grpahene_TB.printout;\n事实上，对于模型来讲，大部分的Hopping矩阵都是稀疏的，我们来了解一下另一种结构 list\nlist list 更像 是 hr.dat的稀疏格式\n1Grpahene_TB_list = Grpahene_TB.rewrite() Result Grpahene_TB_list = HR - 属性:\n vectorL: [6×5 int32] HnumL: [6×1 double] HcoeL: [6×1 sym] NRPTS: 6 WAN_NUM: 2 Basis_num: [] Rm: [3×3 double] Gk: [3×3 double] symvar_list: [1×1 sym]    我们注意到此时 vectorL的列数变成了5 是因为额外加入了 hi hj 的hopping, 而HcoeL 与HnumL也变成了一个向量 长度与vectorL的行数相同\n.list() 1Grpahene_TB_list.list() 通过 list 方法，可以看到每一个Hopping\n.show() 我们可以自定义晶格信息导入，并看到Hopping示意图\n1Rm = [1,0,0;-0.5,sqrt(3)/2,0;0,0,1]; 2Grpahene_TB_list = Grpahene_TB_list.input_Rm(Rm); 3orbL = [2/3,1/3,0;1/3,2/3,0]; 4Grpahene_TB_list.orbL = orbL; 5Grpahene_TB_list.show(\u0026#39;HOPPING\u0026#39;,\u0026#39;scale\u0026#39;, 2.4560000896,\u0026#39;atomscale\u0026#39;,0.1,\u0026#39;TwoD\u0026#39;,true); 读取 wannier 我们同样可以以list结构读取wannier\n1HR_TB = HR.from_wannier90(\u0026#39;wannier90_hr.dat\u0026#39;,\u0026#39;list\u0026#39;); 通过设定Accuracy = 1e-6可以删掉读取的wannier中一些可以忽略的Hopping\n1HR_TB = HR.from_wannier90(\u0026#39;wannier90_hr.dat\u0026#39;,\u0026#39;list\u0026#39;,Accuracy); 转换回矩阵模式 1Grpahene_TB_mat = Grpahene_TB_list.rewrite(\u0026#39;rewind\u0026#39;,true); sparse 1HRTB_sparse = HRTB_mat.sparse(); 2HRTB_mat = HRTB_sparse.full(); 目前提供sparse与mat之间的转换\n","date":"Sep 8, 2021","img":"https://i.loli.net/2021/09/08/SuLypHizO8lt75G.png","permalink":"https://parkman.top/en/posts/matlab/vasplib/vasplib_hr_2/","series":["HR"],"tags":["matlab","plot","HR","TB"],"title":"Vasplib HR (2) Type of HR Class"},{"categories":["vasplib"],"content":"vasplib:HR HR - a powerful TB tools\nHR class 入门 HR - a powerful TB tools\n** 什么是 HR? **\nIn solid-state physics , the tight-binding model (or TB model) is an approach to the calculation of electronic band structure using an approximate set of wave functions based upon superposition of wave functions for isolated atoms located at each atomic site.\n$$ \\begin{array}{l} H=-t\\sum_{\\langle i,j\\rangle ,\\sigma } \\left(c_{i,\\sigma }^{\\dagger } c_{j,\\sigma } +h.c.\\right)\\newline c_{i\\sigma }^{\\dagger } ,c_{j\\sigma } \\textrm{-} \\textrm{creation}\\textrm{and}\\textrm{annihilation}\\textrm{operators}\\newline \\sigma \\textrm{-}\\textrm{spin}\\textrm{polarization}\\newline t\\textrm{-}\\textrm{hopping}\\textrm{integral}\\newline \\langle i,j\\rangle -\\textrm{nearest}\\textrm{neighbor}\\textrm{index}\\newline h.c.\\textrm{-}\\textrm{the}\\textrm{hermitian}\\textrm{conjugate}\\textrm{of}\\textrm{the}\\textrm{other}\\textrm{term(s)} \\end{array} $$\n考虑有平移对称性的体系，我们可以只需要考虑元胞与其他晶胞(包括元胞)的相互作用，则可以研究整个体系的物理性质。\n以 SSH 模型为例\n一个元胞里有两个C 元胞内为双键 元胞外为单键，用v 和 w 来代替\n上图 有10 个元胞，省空间我们认为只有5个元胞，用哈密顿量用矩阵表示即为\n如果加上周期平移条件，即第五个元胞和第一个元胞有相互作用,则需要添上两个蓝色的 元胞间相互作用\n这么一个体系可以任意扩写，遵从一定的规律， 即绿框的对角块都是一样的，元胞与元胞之间的Hopping块，依次放在对角块的两边，且满足厄米对称性。\n则体系可以用 格点与元胞之间的矩阵所描述，借助于 wannier90: case_hr.dat的输出格式\nhr_datformat:\n0 0 0 [0 v;v 0] 1 0 0 [0 0;w 0] -1 0 0 [0 w;0 0] ...  了解了什么是HR后，我们就可以开始我们的HR入门之旅了。\nQuickstart 构建一个HR 读取wannier90_hr.dat 1HR_TB = HR.from_wannier90(\u0026#39;wannier90_hr.dat\u0026#39;) Result HR_TB = HR - 属性:\n vectorL: [185x3 double] HnumL: [6x6x185 double] HcoeL: [6x6x185 sym] NRPTS: 185 WAN_NUM: 6 Line_000: 93 Basis_num: [] Rm: [3x3 double] Gk: [3x3 double] symvar_list: [1x0 sym]    我们读取了一个 wannier90 生成的一个TB模型\n简单看来，这个HR对象 拥有几个基本的属性，vectorL, HnumL, HcoeL, NRPTS, WAN_NUM,Rm,Gk\nBais_num 在这里等效于WAN_NUM,* symvar_list* 先不用管，\n vectorL: 格点的位置HR中的R HnumL：R所对应的与元胞的hopping矩阵，数值化的 HcoeL：HR的一大特点很多方法同时支持符号和数值的哈密顿量，同时设定HcoeL也方便我们后续的操作与调试。在这里读取的是wannier，HcoeL为0 NRPTS：有多少格点，往往 读取wannier的结果NRPTS比较大 自己做的模型往往只考虑最近邻模型 WAN_NUM: 元胞中的轨道数量 Rm: 元胞的基失矩阵 Gk: 相应的 倒格式矩阵，Gk = 2*pi*(eye(3)/Rm).'  当然可以很快地锁定HOPPING项, 常用的HOMECELL的矩阵 1HR_TB.HnumL(:,:,HR_TB.Line_000) Result ans = 6x6\n 1.1466 0.1710 0 0 -0.1335 0 0.1710 -1.3207 0 0 -0.2709 0 0 0 1.1466 0.1710 0 0.1335 0 0 0.1710 -1.3207 0 0.2709 -0.1335 -0.2709 0 0 4.3787 0 0 0 0.1335 0.2709 0 4.3787    手动构建HR 声明一个空的HR 这里我们手动来定义SSH的\n1WAN_NUM = 2; 2HR_TB = HR(WAN_NUM) Result HR_TB = HR - 属性:\n vectorL: [0 0 0] HnumL: [2x2 double] HcoeL: [2x2 sym] NRPTS: 1 WAN_NUM: 2 Line_000: 1 Basis_num: [] Rm: [3x3 double] Gk: [3x3 double] symvar_list: [1x0 sym]    在没有引入晶格信息之前，HR的默认Rm 为 eye(1)\n设置符号化变量 1syms v w real 通过 set_hop 方法来设定 hopping H_hr = H_hr.set_hop(amp,hi,hj,vector_list,mode)\n1HR_TB = HR_TB.set_hop(v,1,2,[0,0,0],\u0026#39;sym\u0026#39;); 2HR_TB = HR_TB.set_hop(v,2,1,[0,0,0],\u0026#39;sym\u0026#39;); 3HR_TB = HR_TB.set_hop(w,2,1,[1,0,0],\u0026#39;sym\u0026#39;); 4HR_TB = HR_TB.set_hop(w,1,2,[-1,0,0],\u0026#39;sym\u0026#39;); 导入POSCAR的信息,（vasplib中大部分的输入输出文件都是仿照VASP的格式） 格式详解见\n POSCAR_SSH\n1.0\n3 0.0000000000 0.0000000000\n0 3 0.0000000000\n0.0000000000 0.0000000000 20.0000000000\nC Si\n1 1\nDirect\n0.25 0.25 0.5\n0.75 0.75 0.5\n Vesta 中可以看到\n1HR_TB = HR_TB \u0026lt;= \u0026#39;POSCAR_SSH\u0026#39;; 我们也可以用matlab简单看下（TEST）\n1HR_TB.show(\u0026#39;HOPPING\u0026#39;,\u0026#39;TwoD\u0026#39;,true); 自动构建HR Slater Koster 之前已经介绍过Slater Koster方法，HR支持自动SlaterKoster型的TB构建.\n通过对称性构建 只要写出对称的矩阵表示，就可以构建包含在对称性允许下所有可能项的HR.\n","date":"Sep 8, 2021","img":"https://i.loli.net/2021/09/08/RLkmyNcuadfU6Ib.jpg","permalink":"https://parkman.top/en/posts/matlab/vasplib/vasplib_hr/","series":["HR"],"tags":["matlab","plot","HR","TB"],"title":"Vasplib HR (1) Model Construction"},{"categories":[],"content":"TB reference\nSlater Koster term (from Wiki ) In 1954 J.C. Slater and G.F. Koster published, mainly for the calculation of transition metal d-bands, a table of interatomic matrix elements1$E_{i, j}\\left(\\overrightarrow{\\mathbf{r}}_{n, n^{\\prime}}\\right)=\\left\\langle n, i|H| n^{\\prime}, j\\right\\rangle$\nwhich can also be derived from the cubic harmonic orbitals straightforwardly. The table expresses the matrix elements as functions of LCAO two-centre bond integrals between two cubic harmonic orbitals, i and j, on adjacent atoms. The bond integrals are for example the $V_{s s \\sigma}, V_{p p \\pi}$ and $V_{d d \\delta}$ for sigma, pi and delta bonds (Notice that these integrals should also depend on the distance between the atoms, i.e. are a function of (l,m,n), even though it is not explicitly stated every time.).\nThe interatomic vector is expressed as $\\overrightarrow{\\mathbf{r}}_{n, n^{\\prime}}=\\left(r_{x}, r_{y}, r_{z}\\right)=d(l, m, n)$\nwhere d is the distance between the atoms and l, m and n are the direction cosines to the neighboring atom.\ns-p block\n$$\\begin{aligned} \u0026amp;E_{s, s}=V_{s s \\sigma} \\newline \u0026amp;E_{s, x}=l V_{s p \\sigma} \\newline \u0026amp;E_{x, x}=l^{2} V_{p p \\sigma}+\\left(1-l^{2}\\right) V_{p p \\pi} \\newline \u0026amp;E_{x, y}=l m V_{p p \\sigma}-l m V_{p p \\pi} \\newline \u0026amp;E_{x, z}=\\ln V_{p p \\sigma}-\\ln V_{p p \\pi} \\end{aligned}$$\ns-d block $$ \\begin{aligned} \u0026amp;E_{s, x y}=\\sqrt{3} l m V_{s d \\sigma} \\newline \u0026amp;E_{s, x^{2}-y^{2}}=\\frac{\\sqrt{3}}{2}\\left(l^{2}-m^{2}\\right) V_{s d \\sigma} \\newline \u0026amp;E_{s, 3 z^{2}-r^{2}}=\\left[n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right] V_{s d \\sigma} \\end{aligned} $$\np-d block $$ \\begin{aligned} \u0026amp;E_{x, x y}=\\sqrt{3} l^{2} m V_{p d \\sigma}+m\\left(1-2 l^{2}\\right) V_{p d \\pi} \\newline \u0026amp;E_{x, y z}=\\sqrt{3} l m n V_{p d \\sigma}-2 l m n V_{p d \\pi} \\newline \u0026amp;E_{x, z x}=\\sqrt{3} l^{2} n V_{p d \\sigma}+n\\left(1-2 l^{2}\\right) V_{p d \\pi} \\newline \u0026amp;E_{x, x^{2}-y^{2}}=\\frac{\\sqrt{3}}{2} l\\left(l^{2}-m^{2}\\right) V_{p d \\sigma}+l\\left(1-l^{2}+m^{2}\\right) V_{p d \\pi} \\newline \u0026amp;E_{y, x^{2}-y^{2}}=\\frac{\\sqrt{3}}{2} m\\left(l^{2}-m^{2}\\right) V_{p d \\sigma}-m\\left(1+l^{2}-m^{2}\\right) V_{p d \\pi} \\newline \u0026amp;E_{z, x^{2}-y^{2}}=\\frac{\\sqrt{3}}{2} n\\left(l^{2}-m^{2}\\right) V_{p d \\sigma}-n\\left(l^{2}-m^{2}\\right) V_{p d \\pi} \\newline \u0026amp;E_{x, 3 z^{2}-r^{2}}=l\\left[n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right] V_{p d \\sigma}-\\sqrt{3} \\ln ^{2} V_{p d \\pi} \\newline \u0026amp;E_{y, 3 z^{2}-r^{2}}=m\\left[n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right] V_{p d \\sigma}-\\sqrt{3} m n^{2} V_{p d \\pi} \\newline \u0026amp;E_{z, 3 z^{2}-r^{2}}=n\\left[n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right] V_{p d \\sigma}+\\sqrt{3} n\\left(l^{2}+m^{2}\\right) V_{p d \\pi} \\end{aligned} $$ d-d block $$ \\begin{aligned} \u0026amp;E_{x y, x y}=3 l^{2} m^{2} V_{d d \\sigma}+\\left(l^{2}+m^{2}-4 l^{2} m^{2}\\right) V_{d d \\pi}+\\left(n^{2}+l^{2} m^{2}\\right) V_{d d \\delta} \\newline \u0026amp;E_{x y, y z}=3 l m^{2} n V_{d d \\sigma}+\\ln \\left(1-4 m^{2}\\right) V_{d d \\pi}+\\ln \\left(m^{2}-1\\right) V_{d d \\delta} \\newline \u0026amp;E_{x y, z x}=3 l^{2} m n V_{d d \\sigma}+m n\\left(1-4 l^{2}\\right) V_{d d \\pi}+m n\\left(l^{2}-1\\right) V_{d d \\delta} \\newline \u0026amp;E_{x y, x^{2}-y^{2}}=\\frac{3}{2} l m\\left(l^{2}-m^{2}\\right) V_{d d \\sigma}+2 l m\\left(m^{2}-l^{2}\\right) V_{d d \\pi}+\\left[l m\\left(l^{2}-m^{2}\\right) / 2\\right] V_{d d \\delta} \\newline \u0026amp;E_{y z, x^{2}-y^{2}}=\\frac{3}{2} m n\\left(l^{2}-m^{2}\\right) V_{d d \\sigma}-m n\\left[1+2\\left(l^{2}-m^{2}\\right)\\right] V_{d d \\pi}+m n\\left[1+\\left(l^{2}-m^{2}\\right) / 2\\right] V_{d d \\delta} \\newline \u0026amp;E_{z x, x^{2}-y^{2}}=\\frac{3}{2} n l\\left(l^{2}-m^{2}\\right) V_{d d \\sigma}+n l\\left[1-2\\left(l^{2}-m^{2}\\right)\\right] V_{d d \\pi}-n l\\left[1-\\left(l^{2}-m^{2}\\right) / 2\\right] V_{d d \\delta} \\newline \u0026amp;E_{x y, 3 z^{2}-r^{2}}=\\sqrt{3}\\left[l m\\left(n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right) V_{d d \\sigma}-2 l m n^{2} V_{d d \\pi}+\\left[l m\\left(1+n^{2}\\right) / 2\\right] V_{d d \\delta}\\right] \\newline \u0026amp;E_{y z, 3 z^{2}-r^{2}}=\\sqrt{3}\\left[m n\\left(n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right) V_{d d \\sigma}+m n\\left(l^{2}+m^{2}-n^{2}\\right) V_{d d \\pi}-\\left[m n\\left(l^{2}+m^{2}\\right) / 2\\right] V_{d d \\delta}\\right] \\newline \u0026amp;E_{z x, 3 z^{2}-r^{2}}=\\sqrt{3}\\left[\\ln \\left(n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right) V_{d d \\sigma}+\\ln \\left(l^{2}+m^{2}-n^{2}\\right) V_{d d \\pi}-\\left[\\ln \\left(l^{2}+m^{2}\\right) / 2\\right] V_{d d \\delta}\\right] \\newline \u0026amp;E_{x^{2}-y^{2}, x^{2}-y^{2}}=\\frac{3}{4}\\left(l^{2}-m^{2}\\right)^{2} V_{d d \\sigma}+\\left[l^{2}+m^{2}-\\left(l^{2}-m^{2}\\right)^{2}\\right] V_{d d \\pi}+\\left[n^{2}+\\left(l^{2}-m^{2}\\right)^{2} / 4\\right] V_{d d \\delta} \\newline \u0026amp;E_{x^{2}-y^{2}, 3 z^{2}-r^{2}}=\\sqrt{3}\\left[\\left(l^{2}-m^{2}\\right)\\left[n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right] V_{d d \\sigma} / 2+n^{2}\\left(m^{2}-l^{2}\\right) V_{d d \\pi}+\\left[\\left(1+n^{2}\\right)\\left(l^{2}-m^{2}\\right) / 4\\right] V_{d d \\delta}\\right] \\newline \u0026amp;E_{3 z^{2}-r^{2}, 3 z^{2}-r^{2}}=\\left[n^{2}-\\left(l^{2}+m^{2}\\right) / 2\\right]^{2} V_{d d \\sigma}+3 n^{2}\\left(l^{2}+m^{2}\\right) V_{d d \\pi}+\\frac{3}{4}\\left(l^{2}+m^{2}\\right)^{2} V_{d d \\delta} \\end{aligned} $$\nCubic harmonic The question is how to derive it for easy coding, actually just type them step by step is the best way!\nIn practice, the coordinate system that is used in such cases is most often a Cartesian coordinate system instead of a spherical coordinate system. In a Cartesian coordinate system the atomic orbitals are often expressed as\n$$ \\psi_{n l c}(\\mathbf{r})=R_{n l}(r) X_{l c}(\\mathbf{r}) $$\nwith the cubic harmonics,234 $X_{l c}(\\mathbf{r})$, as a basis set. LCAO and MO calculations in computational chemistry or tight binding calculations in solid-state physics use cubic harmonics as an atomic orbital basis. The indices lc are denoting some kind of Cartesian representation.\nFirst of all, the cubic harmonics are real functions, while spherical harmonics are complex functions.\n The complex numbers are two-dimensional with a real part and an imaginary part. Complex numbers offer very handsome and effective tools to tackle mathematical problems analytically but they are not very effective when they are used for numerical calculations. Skipping the imaginary part saves half the calculational effort in summations, a factor of four in multiplications and often factors of eight or even more when it comes to computations involving matrices.\n Table of cubic harmonics The s-orbitals The s-orbitals only have a radial part.\n$$ \\begin{aligned} \u0026amp;\\psi_{n 00}(\\mathbf{r})=R_{n 0}(r) Y_{0}^{0} \\newline \u0026amp;s=X_{00}=Y_{0}^{0}=\\frac{1}{\\sqrt{4 \\pi}} \\end{aligned} $$\nThe p-orbitals The three p-orbitals are atomic orbitals with an angular momentum quantum number ℓ = 1. The cubic harmonic expression of the p-orbitals\n$$ \\begin{aligned} p_{z} \u0026amp;=N_{1}^{c} \\frac{z}{r}=Y_{1}^{0} \\newline p_{x} \u0026amp;=N_{1}^{c} \\frac{x}{r}=\\frac{1}{\\sqrt{2}}\\left(Y_{1}^{-1}-Y_{1}^{1}\\right) \\newline p_{y} \u0026amp;=N_{1}^{c} \\frac{y}{r}=\\frac{i}{\\sqrt{2}}\\left(Y_{1}^{-1}+Y_{1}^{1}\\right) \\end{aligned} $$\nwith\n$$ N_{1}^{c}=\\left(\\frac{3}{4 \\pi}\\right)^{1 / 2} $$\nThe d-orbitals The five d-orbitals are atomic orbitals with an angular momentum quantum number ℓ = 2. The angular part of the d-orbitals are often expressed like\n$$ \\psi_{n 2 c}(\\mathbf{r})=R_{n 2}(r) X_{2 c}(\\mathbf{r}) $$ The angular part of the d-orbitals are the cubic harmonics $X_{2 c}(\\mathbf{r})$\nd orbitals $$ \\begin{aligned} \u0026amp;d_{z^{2}}=N_{2}^{c} \\frac{3 z^{2}-r^{2}}{2 r^{2} \\sqrt{3}}=Y_{2}^{0} \\newline \u0026amp;d_{x z}=N_{2}^{c} \\frac{x z}{r^{2}}=\\frac{1}{\\sqrt{2}}\\left(Y_{2}^{-1}-Y_{2}^{1}\\right) \\newline \u0026amp;d_{y z}=N_{2}^{c} \\frac{y z}{r^{2}}=\\frac{i}{\\sqrt{2}}\\left(Y_{2}^{-1}+Y_{2}^{1}\\right) \\newline \u0026amp;d_{x y}=N_{2}^{c} \\frac{x y}{r^{2}}=\\frac{i}{\\sqrt{2}}\\left(Y_{2}^{-2}-Y_{2}^{2}\\right) \\newline \u0026amp;d_{x^{2}-y^{2}}=N_{2}^{c} \\frac{x^{2}-y^{2}}{2 r^{2}}=\\frac{1}{\\sqrt{2}}\\left(Y_{2}^{-2}+Y_{2}^{2}\\right) \\end{aligned} $$ with\n$$ N_{2}^{c}=\\left(\\frac{15}{4 \\pi}\\right)^{1 / 2} $$\n  The f-orbitals  The seven f-orbitals are atomic orbitals with an angular momentum quantum number ℓ = 3. often expressed like\n$$ \\psi_{n 3 c}(\\mathbf{r})=R_{n 3}(r) X_{3 c}(\\mathbf{r}) $$ The angular part of the f-orbitals are the cubic harmonics $X_{3 c}(\\mathbf{r})$. In many cases different linear combinations of spherical harmonics are chosen to construct a cubic f-orbital basis set. f orbitals $$ \\begin{aligned} \u0026amp;f_{z^{3}}=N_{3}^{c} \\frac{z\\left(2 z^{2}-3 x^{2}-3 y^{2}\\right)}{2 r^{3} \\sqrt{15}}=Y_{3}^{0} \\newline \u0026amp;f_{x z^{2}}=N_{3}^{c} \\frac{x\\left(4 z^{2}-x^{2}-y^{2}\\right)}{2 r^{3} \\sqrt{10}}=\\frac{1}{\\sqrt{2}}\\left(Y_{3}^{-1}-Y_{3}^{1}\\right) \\newline \u0026amp;f_{y z^{2}}=N_{3}^{c} \\frac{y\\left(4 z^{2}-x^{2}-y^{2}\\right)}{2 r^{3} \\sqrt{10}}=\\frac{i}{\\sqrt{2}}\\left(Y_{3}^{-1}+Y_{3}^{1}\\right) \\newline \u0026amp;f_{x y z}=N_{3}^{c} \\frac{x y z}{r^{3}}=\\frac{i}{\\sqrt{2}}\\left(Y_{3}^{-2}-Y_{3}^{2}\\right) \\newline \u0026amp;f_{z\\left(x^{2}-y^{2}\\right)}=N_{3}^{c} \\frac{z\\left(x^{2}-y^{2}\\right)}{2 r^{3}}=\\frac{1}{\\sqrt{2}}\\left(Y_{3}^{-2}+Y_{3}^{2}\\right) \\newline \u0026amp;f_{x\\left(x^{2}-3 y^{2}\\right)}=N_{3}^{c} \\frac{x\\left(x^{2}-3 y^{2}\\right)}{2 r^{3} \\sqrt{6}}=\\frac{1}{\\sqrt{2}}\\left(Y_{3}^{-3}-Y_{3}^{3}\\right) \\newline \u0026amp;f_{y\\left(3 x^{2}-y^{2}\\right)}=N_{3}^{c} \\frac{y\\left(3 x^{2}-y^{2}\\right)}{2 r^{3} \\sqrt{6}}=\\frac{i}{\\sqrt{2}}\\left(Y_{3}^{-3}+Y_{3}^{3}\\right) \\end{aligned} $$ with\n$$ N_{3}^{c}=\\left(\\frac{105}{4 \\pi}\\right)^{1 / 2} $$     J. C. Slater, G. F. Koster (1954). \u0026ldquo;Simplified LCAO method for the Periodic Potential Problem\u0026rdquo;. Physical Review. 94 (6): 1498–1524. Bibcode:1954PhRv\u0026hellip;94.1498S. doi:10.1103/PhysRev.94.1498.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n R. McWeeny (1978). Methods of Molecular Quantum Mechanics. Academic Press. ISBN 0-12-486552-6.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n J. Muggli (1972). \u0026ldquo;Cubic harmonics as linear combinations of spherical harmonics\u0026rdquo;. Zeitschrift für Angewandte Mathematik und Physik. Springer-Verlag. 23 (2): 311–317. Bibcode:1972ZaMP\u0026hellip;23..311M. doi:10.1007/BF01593094. S2CID 121935030.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n T. Kwiatkowski; S. Olszewski; A. Wierzbicki (1977). \u0026ldquo;Cubic harmonics in Cartesian coordinates\u0026rdquo;. International Journal of Quantum Chemistry. 11 (1): 21–47. doi:10.1002/qua.560110104.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Sep 7, 2021","img":"","permalink":"https://parkman.top/en/posts/tb/tb_slaterkoster/","series":[],"tags":["physics"],"title":"TB_SlaterKoster"},{"categories":["vasplib"],"content":"vasplib:bandplot bandplot Label:  vasp band spinless  Description of the Script: plot a band stucture of standard vasp output\nInput:  Files: POSCAR KPOINTS EIGENVAL/BAND.dat DOSCAR/Efermi  Output:  band-structure with nice output  Note: Change log  Document Date: 2020/12/05 Creation Date: 2020/12/05 Last updated : 2020/12/05  Copyright  parkman parkman@buaa.edu.cn   Let\u0026rsquo;s begin\nExample: vasp no SOC  make sure you have copy the POSCAR KPOINTS EIGENVAL DOSCAR in this directory\n1ls Result BAND.dat BandStuctureCuIwSOC.eps DOSCAR EIGENVAL KPOINTS POSCAR Run_example_bandplot_spinless.m Run_example_bandplot_spinless.tex html matlab.sty plot_results vasp_m_soc.eps   for a default print,just type 1bandplot 2% or 3bandplot() 1bandplot; for a user-defined bandplot we shoulf first load the EIGENCAR, EIGENCAR = EIGENVAL_read(); which is a highly useful matric stucture with the format\n    kpoint1 kpoint2 … kpoints      Band:1th        Band:2th        …        Band:nth         1EIGENCAR = EIGENVAL_read(); bandplot parm The whole parm of bandplot is [fig,ax]=bandplot(EIGENCAR,Ecut,titlestring,color,klist_l,kpoints_l,\u0026hellip; kpoints_name,fontname,fig,ax) Here, we\u0026rsquo;d like check Ecut = [-6,6], with a title \u0026lsquo;Band Stucture CuI w SOC\u0026rsquo; blue color, we just run and abtain a (title).eps file. You can open it with AI for publication\n1bandplot(EIGENCAR,[-6,6],\u0026#39;title\u0026#39;,\u0026#39;Band Stucture CuI w SOC\u0026#39;,\u0026#39;Color\u0026#39;,\u0026#39;b\u0026#39;); save plot data we can get handle and the plot data of a bandplot\n1[fig,ax,data_plot] = bandplot() Result fig = Figure (3) - 属性:\n Number: 3 Name: '' Color: [1 1 1] Position: [680 558 560 420] Units: 'pixels'  显示 所有属性\nax = Axes (vasp-soc) - 属性:\n XLim: [0 3.0451] YLim: [-3 3] XScale: 'linear' YScale: 'linear' GridLineStyle: '-' Position: [0.1300 0.1100 0.7750 0.7993] Units: 'normalized'  显示 所有属性\ndata_plot = EIGENCAR: [48x240 double] Ecut: [-3 3] titlestring: \u0026lsquo;vasp-soc\u0026rsquo; color: [0.0357 0.8491 0.9340] klist_l: [1x240 double] kpoints_l: [5x1 double] kpoints_name: [\u0026ldquo;Γ\u0026rdquo; \u0026ldquo;Z\u0026rdquo; \u0026ldquo;F\u0026rdquo; \u0026ldquo;Γ\u0026rdquo; \u0026ldquo;L\u0026rdquo;] fontname: \u0026lsquo;Helvetica\u0026rsquo;\n  Parameters default\n1bandplot(EIGENCAR,Ecut,klist_l,kpoints_l,kpoints_name,\u0026#39;key\u0026#39;,\u0026#39;value\u0026#39;,...); 2[fig,ax] = bandplot(EIGENCAR,Ecut,klist_l,kpoints_l,kpoints_name,\u0026#39;key\u0026#39;,\u0026#39;value\u0026#39;,...); 3[fig,ax,plot_data_collection]bandplot(EIGENCAR,Ecut,klist_l,kpoints_l,kpoints_name,\u0026#39;key\u0026#39;,\u0026#39;value\u0026#39;,...); EIGENCAR = EIGENVAL_read(); Ecut = [-3,3]; klist_l = []; kpoints_l = []; kpoints_name = []; options.fig = handle([]); options.ax = handle([]); options.fontname = 'Helvetica'; options.KPOINTS = 'KPOINTS'; options.POSCAR = 'POSCAR'; options.Color = @jet; options.title = ''; options.klist_l = []; options.kpoints_l = []; options.kpoints_name = []; options.xlabel=''; options.ylabel='E(eV)'; options.LineSpec = '-'; options.LineWidth = 1; options.MarkerSize = 3; options.MarkerEdgeColor = []; options.MarkerFaceColor = []; ","date":"Sep 7, 2021","img":"https://i.loli.net/2021/09/07/bHldtr57xkTe4Oi.png","permalink":"https://parkman.top/en/posts/matlab/vasplib/vasplib_bandplot/","series":[],"tags":["matlab","vasplib","plot"],"title":"Vasplib Basic Bandplot"},{"categories":[],"content":"Using MATLAB to modify your PPT\nCreate a Presentation Programmatically This example shows how to create a PowerPoint® presentation by using the MATLAB® API for PowerPoint (PPT API).\nThe example generates these slides:By your image host\nTo programmatically create a presentation:\n Import the PPT API package. Create a presentation container. Add slides. Add content to the slides. Generate the presentation.  Import the PPT API Package The PPT API classes belong to the mlreportgen.ppt package. Import this package so that you do not have to include the package name when you call the PPT API object constructors and methods.\n1import mlreportgen.ppt.* Create a Presentation Container Create an mlreportgen.ppt.Presentation object to contain the presentation. For this example, specify that the output file name is myPresentation and do not specify a template.\n1ppt = Presentation(\u0026#39;myPresentation.pptx\u0026#39;,\u0026#39;TCMP_templete.pptx\u0026#39;); Because you did not specify a template, the PPT API uses the default template. A template defines the default slide layouts and styles. To create a custom template, see Set Up a PowerPoint Template . You can override the default style defined by a template by using format properties and objects. See Presentation Formatting Approaches .\nAdd Slides and Slide Content To add a slide, use the add method and specify a slide layout that is available in the template. See Set Up a PowerPoint Template . This example uses these slide layouts that are included with the default template:\n Title Slide Title and Picture Title and Content Title and Table  To add content to a slide, use the replace method to replace content placeholders with the new content. For more information about adding and replacing content, see Add and Replace Presentation Content . To use the replace method, you must specify the name that identifies a placeholder in the slide layout. For example, the Title Slide layout has a Title placeholder and a Subtitle placeholder. For information about how to find the content placeholder names for a particular slide layout, see Access PowerPoint Template Elements .\nAdd a Title Slide To add a title slide, use the Title Slide layout.\n1titleSlide = add(ppt,\u0026#39;Title Slide\u0026#39;); The Title Slide layout has these placeholders:\n Title Subtitle  Replace the Title placeholder with the title text.\n1replace(titleSlide,\u0026#39;Title\u0026#39;,\u0026#39;TCMP PROJECT\u0026#39;); Build the title text in pieces so that you can format the histogram function name in a different font.\n1subtitleText = Paragraph(\u0026#39;The tour of \u0026#39;); 2ProjectName = Text(\u0026#39;Topological Condensed Matter Physic\u0026#39;); 3ProjectName.Font = \u0026#39;Microsoft YaHei UI\u0026#39;; 4append(subtitleText,ProjectName); Replace the Subtitle placeholder with the text contained in SubtitleText.\n1replace(titleSlide,\u0026#39;Subtitle\u0026#39;,subtitleText); Author Email and Date\n1Author = \u0026#39;Xu-Tao Zeng\u0026#39;; 2replace(titleSlide,\u0026#39;Author\u0026#39;,Paragraph(Author)); 3Email = \u0026#39;parkman@buaa.edu.cn\u0026#39;; 4Emaillink = ExternalLink(Email,Email); 5replace(titleSlide,\u0026#39;Email\u0026#39;,Paragraph(Emaillink)); 6replace(titleSlide,\u0026#39;Date\u0026#39;,Paragraph(date)); 7%append(subtitleText,[\u0026#34;\u0026#34;;\u0026#34;Xu-Tao Zeng\u0026#34;]); Add a Slide with a Picture Create an image file to use for the slide picture.\n1syms kx ky real; 2E = sqrt(kx^2+ky^2); 3h = fsurf([-E;E]); 4saveas(gcf,\u0026#39;DiracCone.png\u0026#39;); By your image host\nCreate an mlreportgen.ppt.Picture object from the image file.\n1plot1 = Picture(\u0026#39;DiracCone.png\u0026#39;); Add a picture slide to the presentation by using a Title and Picture layout.\n1pictureSlide = add(ppt,\u0026#39;Title and Picture 1\u0026#39;); The Title and Picture layout has these placeholders:\n Title Picture  Replace the Title placeholder with the title text and the Picture placeholder with plot1.\n1replace(pictureSlide,\u0026#39;Title\u0026#39;,\u0026#39;Dirac Cone\u0026#39;); 2replace(pictureSlide,\u0026#39;Fig1\u0026#39;,plot1); The contents of an image file are copied into the presentation when the presentation is closed. Do not delete or overwrite the image file before the presentation is closed. If your presentation program creates multiple image files, give them unique file names.\nAdd a Slide with Text To add a slide with text, use the Title and Content layout.\n1textSlide = add(ppt,\u0026#39;Title and Content 1\u0026#39;); The Title and Content layout has these placeholders:\n Title Content  Build the title text in pieces so that you can format the histogram function name in a different font.\n1titleText = Paragraph(\u0026#39;What You Can Do with \u0026#39;); 2func = Text(\u0026#39;Dirac Cone\u0026#39;); 3func.Font = \u0026#39;Courier New\u0026#39;; 4append(titleText,func); Replace the Title and Content placeholders.\n1replace(textSlide,\u0026#39;Title\u0026#39;,titleText); 2replace(textSlide,\u0026#39;Content\u0026#39;,{\u0026#39;Reveal the physic of a model\u0026#39;,... 3\u0026#39;Inculding:\u0026#39;,{\u0026#39;Fermi Velocity\u0026#39;,\u0026#39;Band Inversion\u0026#39;},... 4\u0026#39;Analyze the mass term.\u0026#39;}); Add a Slide with a Table To add a slide with a table, use the Title and Table layout.\n1tableSlide = add(ppt,\u0026#39;Title and Table 1\u0026#39;); The Title and Table layout has these placeholders:\n Title Table  Replace the Title placeholder.\n1replace(tableSlide,\u0026#39;Title\u0026#39;,\u0026#39;Parameters\u0026#39;); You can use several approaches to create a table. See Create and Format Tables . This example builds a table row by row.\n Create a table as an mlreportgen.ppt.Table object. Create an mlreportgen.ppt.TableRow object for each row of the table. Create mlreportgen.ppt.TableEntry objects and append them to the table rows.  1paramTable = Table(); 2colSpecs(2) = ColSpec(\u0026#39;6in\u0026#39;); 3colSpecs(1) = ColSpec(\u0026#39;3in\u0026#39;); 4paramTable.ColSpecs = colSpecs; 56tr1 = TableRow(); 7tr1.Style = {Bold(true)}; 89tr1te1Text = Paragraph(\u0026#39;Value\u0026#39;); 10tr1te2Text = Paragraph(\u0026#39;Description\u0026#39;); 11tr1te1 = TableEntry(); 12tr1te2 = TableEntry(); 13append(tr1te1,tr1te1Text); 14append(tr1te2,tr1te2Text); 15append(tr1,tr1te1); 16append(tr1,tr1te2); 1718tr2 = TableRow(); 19tr2te1Text = Paragraph(\u0026#39;auto\u0026#39;); 20tr2te1Text.Font = \u0026#39;Courier New\u0026#39;; 21tr2te2Text = Paragraph(\u0026#39;The default auto algorithm chooses a bin width to \u0026#39;); 22append(tr2te2Text,\u0026#39;cover the data range and reveal the shape of the distribution.\u0026#39;); 23tr2te1 = TableEntry(); 24tr2te2 = TableEntry(); 25append(tr2te1,tr2te1Text); 26append(tr2te2,tr2te2Text); 27append(tr2,tr2te1); 28append(tr2,tr2te2); 2930tr3 = TableRow(); 31tr3te1Text = Paragraph(\u0026#39;scott\u0026#39;); 32tr3te1Text.Font = \u0026#39;Courier New\u0026#39;; 33tr3te2Text = Paragraph(\u0026#39; Is optimal if the data is close \u0026#39;); 34append(tr3te2Text,\u0026#39;to being jointly normally distributed. This rule is \u0026#39;); 35append(tr3te2Text,\u0026#39;appropriate for most other distributions, as well.\u0026#39;); 36tr3te1 = TableEntry(); 37tr3te2 = TableEntry(); 38append(tr3te1,tr3te1Text); 39append(tr3te2,tr3te2Text); 40append(tr3,tr3te1); 41append(tr3,tr3te2); 4243append(paramTable,tr1); 44append(paramTable,tr2); 45append(paramTable,tr3); Replace the Table placeholder with paramTable.\n12replace(tableSlide,\u0026#39;Table\u0026#39;,paramTable); Generate and View the Presentation 1close(ppt); 2rptview(ppt); Copyright 2019 The MathWorks, Inc.\n","date":"Sep 7, 2021","img":"","permalink":"https://parkman.top/en/posts/matlab/advanced_use/matlab_ppt/","series":[],"tags":["matlab"],"title":"Matlab vs PPT"},{"categories":["Hugo"],"content":"Hugo + Github Actions 实现自动化部署 Github Action   GitHub Actions help you automate tasks within your software development life cycle. GitHub Actions are event-driven, meaning that you can run a series of commands after a specified event has occurred.\n 大家知道，持续集成由很多操作组成，比如抓取代码、运行测试、登录远程服务器，发布到第三方服务等等。GitHub 把这些操作就称为 actions。\n很多操作在不同项目里面是类似的，完全可以共享。GitHub 注意到了这一点，想出了一个很妙的点子，允许开发者把每个操作写成独立的脚本文件，存放到代码仓库，使得其他开发者可以引用。\n如果你需要某个 action，不必自己写复杂的脚本，直接引用他人写好的 action 即可，整个持续集成过程，就变成了一个 actions 的组合。这就是 GitHub Actions 最特别的地方。\nGitHub 做了一个官方市场 ，可以搜索到他人提交的 actions。另外，还有一个 awesome actions 的仓库，也可以找到不少 action。\nConception  GitHub Actions 有一些自己的术语。\n（1）workflow （工作流程）：持续集成一次运行的过程，就是一个 workflow。The workflow can be used to build, test, package, release, or deploy a project on GitHub.\n(2) ### Events An event is a specific activity that triggers a workflow. For example, activity can originate from GitHub when someone pushes a commit to a repository or when an issue or pull request is created. You can also use the repository dispatch webhook to trigger a workflow when an external event occurs. For a complete list of events that can be used to trigger workflows, see Events that trigger workflows .\n（3）job （任务）：一个 workflow 由一个或多个 jobs 构成，含义是一次持续集成的运行，可以完成多个任务。\n（4）step（步骤）：每个 job 由多个 step 构成，一步步完成。\n（5）action （动作）：每个 step 可以依次执行一个或多个命令（action）。 (6) ### Runners A runner is a server that has the GitHub Actions runner application installed. You can use a runner hosted by GitHub, or you can host your own. A runner listens for available jobs, runs one job at a time, and reports the progress, logs, and results back to GitHub. GitHub-hosted runners are based on Ubuntu Linux, Microsoft Windows, and macOS, and each job in a workflow runs in a fresh virtual environment. For information on GitHub-hosted runners, see \u0026ldquo;About GitHub-hosted runners .\u0026rdquo; If you need a different operating system or require a specific hardware configuration, you can host your own runners. For information on self-hosted runners, see \u0026ldquo;Hosting your own runners .\u0026rdquo;\nexample  1name:learn-github-actions2on:[push]3jobs:4check-bats-version:5runs-on:ubuntu-latest6steps:7- uses:actions/checkout@v28- uses:actions/setup-node@v29with:10node-version:\u0026#39;14\u0026#39;11- run:npm install -g bats12- run:bats -v](https://raw.githubusercontent.com/parkman-auex/image_host/main/image202109061227577.png )\n[Instance] [准备部署] 我们开发的项目及github pages实际是分开的，一个用于保存项目，相当于源代码，另外一个用于保存最终的网页文件。\n 使用git生成ssh key(相当于生成对密钥)  1ssh-keygen -t rsa -b 4096 -C \u0026#34;$(git config user.email)\u0026#34; -f gh-pages -N \u0026#34;\u0026#34; 2# You will get 2 files: 3# gh-pages.pub (public key) 4# gh-pages (private key)  打开HUGO_blog仓库的settings，再点击Secrets，然后添加刚刚生成的私钥，name为ACTIONS_DEPLOY_KEY\n  同理，打开redisread.github.io，点击Deploy keys，添加公钥，Allow write access一定要勾上，否则会无法提交\n  创建workflow ~/actions/new Ref actions-hugo 首先在项目仓库点击action，创建workflow 输入一下的配置代码：\n1# This is a basic workflow to help you get started with Actions23name:CI_website45# Controls when the workflow will run6on:7# Triggers the workflow on push or pull request events but only for the main branch8push:9branches:[main ]10# pull_request:11# branches: [ main ]1213# Allows you to run this workflow manually from the Actions tab14workflow_dispatch:1516# A workflow run is made up of one or more jobs that can run sequentially or in parallel17jobs:18# This workflow contains a single job called \u0026#34;deploy\u0026#34;19deploy:20# The type of runner that the job will run on21runs-on:ubuntu-latest# 镜像市场2223# Steps represent a sequence of tasks that will be executed as part of the job24steps:25# Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it26- name:checkout27uses:actions/checkout@v228with:# parameters29submodules: true # fetch-depth:0Fetch all history for .GitInfo and .Lastmod 30- name:Setup Hugo31uses:peaceiris/actions-hugo@v232with:33hugo-version:\u0026#39;latest\u0026#39;34extended:true35- name:Build36run:hugo --minify# ADD PYTHON waiting37- name:Deploy38uses:peaceiris/actions-gh-pages@v339with:40#github_token: ${{ secrets.GITHUB_TOKEN }}41#publish_dir: ./public42deploy_key:${{ secrets.ACTIONS_DEPLOY_KEY }}43external_repository:parkman-auex/parkman-auex.github.io44keep_files:false# remove existing files45PUBLISH_BRANCH:main46PUBLISH_DIR:\u0026#34;./public\u0026#34;47commit_message:${{ github.event.head_commit.message }}TEST push 后 ()\npython  未引入 自动加密脚本  查看网页源代码 可以解析  引入 自动加密脚本 可以看到网页，有 cookies 记住过密码 同时源码中这段内容也已经被加密  ","date":"Sep 6, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_13_github_action/","series":["Hugo"],"tags":[],"title":"Hugo 13 Github Action"},{"categories":["Hugo"],"content":"A self experience of online IDE shortcodes, such as JSFiddle, CodePen, JSRun.\nJSFiddle  1{{\u0026lt; jsfiddle \u0026#34;user/id\u0026#34; \u0026gt;}}   CodePen  1{{\u0026lt; codepen \u0026#34;id\u0026#34; \u0026gt;}}   JSRun  1{{\u0026lt; jsrun \u0026#34;id\u0026#34; \u0026gt;}}   only readable  trinket  1{{\u0026lt; trinket \u0026#34;language\u0026#34; \u0026#34;id\u0026#34;} \u0026gt;}} example {{\u0026lt; trinket \u0026quot;python3\u0026quot; \u0026quot;6572292d23\u0026quot; \u0026gt;}}  \nInteract!!!  [Multi choice] 1{{\u0026lt; iframe \u0026#34;iframe_code\u0026#34; \u0026gt;}} https://pythontutor.com    https://www.jdoodle.com/    CodeMirror  CODESANDBOX   even matlab  ","date":"Sep 6, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_12_online_ide/","series":["Hugo"],"tags":[],"title":"Hugo 12 Online Ide"},{"categories":["Hugo"],"content":"Encrypted document password: password\n文章的部分内容被密码保护：\n  --- DON'T MODIFY THIS LINE --- 这里是你要加密的内容!\nHugo Encryptor  Hugo-Encryptor 是一款能够帮助作者保护文章内容的工具。它使用 AES-256 来对文章的内容进行加密，并且通过在文章中嵌入内联 JavaScript 代码来验证读者输入的密码是否正确。没有正确的文章密码，读者将无法看到文章的加密内容。\n环境依赖：Python3\n步骤一：下载 Hugo-Encryptor 并安装其所需要的依赖库  1$ git clone https://github.com/Li4n0/hugo_encryptor.git 2$ cd hugo_encryptor 3$ chmod +x hugo_encryptor.py 4$ pip install -r requirements.txt 步骤二：在博客根目录创建软链接(可选)  1$ mkdir -p /path/to/your/blog/layouts/shortcodes 2$ ln -s /absolute/path/to/hugo_encryptor/shortcodes/hugo-encryptor.html /path/to/your/blog/layouts/shortcodes/hugo-encryptor.html 步骤三：为 shortcodes/hugo-encryptor.html 创建软链接  1$ mkdir -p /path/to/your/blog/layouts/shortcodes 2$ ln -s /absolute/path/to/hugo_encryptor/shortcodes/hugo-encryptor.html /path/to/your/blog/layouts/shortcodes/hugo-encryptor.html 使用方法  步骤一：使用 hugo-encryptor 标签包裹你需要加密的内容  注意：在 hugo-encryptor 标签之前必须存在一段明文文字以及 \u0026lt;!--more--\u0026gt;\n1--- 2title: \u0026#34;这是一篇加密文章\u0026#34; 3--- 45**这里必须存在一些明文文字以及概要标签:** 67\u0026lt;!--more--\u0026gt; 89{{\u0026lt; hugo-encryptor \u0026#34;PASSWORD\u0026#34; \u0026gt;}} 1011# 这里是你要加密的内容! 1213这里是你要加密的内容! 1415**别忘了闭合 `hugo-encryptor` shortcode 标签:** 1617{{\u0026lt; /hugo-encryptor \u0026gt;}} 步骤二：像往常一样生成你的网站  1$ hugo  注意：在重新生成之前请先将你的 public/ 删除，详见 #15 。\n this step may not to be implemented, since it works well!\n步骤三：进行加密  1$ python /absolute/path/to/hugo_encryptor/hugo_encryptor.py 配置 虽然 Hugo-Encryptor 可以在没有经过任何配置的情况下正常运行，但是我们提供了一些设置，来帮助用户将 Hugo-Encryptor按照自己的喜好进行配置\n语言  在默认情况下，Hugo-Encryptor 用中文作为提示信息的输出语言，通过在博客的配置文件添加hugoEncryptorLanguage 参数，你可以将它改变为英文输出，就像下面这样：\n1[params] 2...... 3hugoEncryptorLanguage = \u0026#34;en-us\u0026#34; # or \u0026#34;zh-cn\u0026#34; 45### [](https://github.com/Li4n0/hugo_encryptor/blob/master/README-zh_CN.md#%E6%A0%B7%E5%BC%8F)样式 在默认情况下，Hugo-Encryptor 没有任何样式，但是我们为每一个可见元素都提供了类名，方便用户自己在 css 文件中为他们添加样式\n注意：    切记一定要保证你所加密的文章的源代码是私密的。永远不要把你的博客目录发布到一个公开的仓库\n  每当你生成你的站点，你都应该再一次执行$ python hugo-encryptor 命令来加密你想保护的文章。如果你担心你会忘记这一点，选择使用一个 shell 脚本来代替 $ hugo 命令是一个不错的选择，就像下面这样：\n  1#!/bin/bash 2hugo 3python hugo-encryptor  add the decrypt.js into your static folder, and add in the custom.js depened on your theme.! the html type code in the content may have bugs. Be attention!\n   Hugo encrypter successful  Hugo-Encrypt  try golong version test in macgo get github.com/PuerkitoBio/goquery\nintroduction   Installation and Usage   Configuration   Using the {{% hugo-encrypt %}} tag in your blog posts   Installation and Usage 1mkdir lib 2cd lin 3git clone https://github.com/Izumiko/hugo-encrypt.git Place shortcodes/hugo-encrypt.html in the shortcode directory of your blog:\n1mkdir -p ~/layouts/shortcodes 2cd ~/layouts/shortcodes 3cp ../../lib/hugo-encrypt/shortcodes/hugo-encrypt.html . I think we dont need this  Merge i18n translation files or add it to an existing language file. Remember to set language in your configuration .\n1$ cat i18n/en.toml \u0026gt;\u0026gt; $HUGO_BLOG/i18n/en-us.toml 2$ cp -r i18n $HUGO_BLOG Option A: Build it\n  Requirements: go 1.11+\n  Step 1: Install hugo-encrypt.\n(Optional) set the BINDIR to specify a custom install location (default: /usr/local/bin)\ngoquery安装失败是缺少net依赖包。 获取 golang.org/x/net 包，其实只需要以下步骤：\n  1mkdir -p $GOPATH/src/golang.org/x 2cd $GOPATH/src/golang.org/x 3git clone https://github.com/golang/net.git 4git clone https://github.com/golang/crypto.git go get github.com/PuerkitoBio/goquery\n1make 2make install Result:\n1install -m755 hugo-encrypt /usr/local/bin/hugo-encrypt  Step 2: Use hugo-encrypt to encrypt content  1$ hugo 2$ hugo-encrypt -sitePath public Option B: Use docker\n Requirements: docker  1$ hugo 2$ docker run -it --rm \\ 3-v $HUGO_BLOG/public:/data/site \\ 4chaosbunker/hugo-encrypt hugo-encrypt -sitePath /data/site` After generating the site with hugo and running hugo-encrypt all the private posts in your public directory are encrypted and the site can be published.\nConfiguration Setting a global password 1[params.HugoEncrypt] 2Password = \u0026#34;yourpassword\u0026#34; Password storage hugo-encrypt uses localStorage by default. This means the passphrase is permanently stored in the browser. By adding the hugoEncrypt.Storage param in your blog\u0026rsquo;s config file you can set the storage method to sessionStorage.\n1[params.HugoEncrypt] 2Storage = \u0026#34;session\u0026#34; # or \u0026#34;local\u0026#34; localStorage:\nOnce a visitor entered the correct passphrase the authorization status will not expire. The visitor can read the article until the passphrase has been changed or the browser cache is cleared.\nsessionStorage:\nOnce a visitor entered the correct passphrase the authorization will expire after the browser is closed.\nUsing the {{% hugo-encrypt %}} tag in your blog posts If no password is specified in the shortcode, the password set in your config file will be used. If no password is set at all, generation of html with hugo fails.\n1--- 2title: \u0026#34;This Is An Encrypted Post\u0026#34; 3--- 45This content is visible to anyone. 67{{% hugo-encrypt \u0026#34;postspecificpassword\u0026#34; %}} 89This content will be encrypted! 10w~/Documents/GitHub/parkman 11{{% /hugo-encrypt %}} Language Use i18n to display content generated by hugo-Encrypt in the language of your choice by setting the following param in your config file. Make sure to set the Param DefaultContentLanguage and add the corresponding language file to the i18n folder.\n1[params] 2DefaultContentLanguage = \u0026#34;en-us\u0026#34; Attention Remember to keep the source files of your encrypted posts private. Never push your blog directory into a public repository as the encryption happens after generating the html files with hugo.\nRemember to run hugo-encrypt after generating your site with hugo to encrypt the posts you want to be passphrase-protected. You might want to use a shell script instead of hugo to take care of both steps:\n1#!/bin/bash 2hugo --cleanDestinationDir 3hugo-encrypt Hugo encrypt ugly-success\n","date":"Sep 3, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_11_encrypted_document/","series":["Hugo"],"tags":[],"title":"Hugo 11 Encrypted Document"},{"categories":["Hugo"],"content":"Find more shortcodes, add them\nHugo theme: Docsy  Tabbed pane Sometimes it\u0026rsquo;s very useful to have tabbed panes when authoring content. One common use-case is to show multiple syntax highlighted code blocks that showcase the same problem, and how to solve it in different programming languages. As an example, the table below shows the language-specific variants of the famous Hello world! program one usually writes first when learning a new programming language from scratch:\nC  C\u0026#43;\u0026#43;  Go  Java  Kotlin  Lua  PHP  Python  Ruby  Scala   1#include \u0026lt;stdio.h\u0026gt;2#include \u0026lt;stdlib.h\u0026gt;3 4int main(void) 5{ 6puts(\u0026#34;Hello World!\u0026#34;); 7return EXIT_SUCCESS; 8} 1#include \u0026lt;iostream\u0026gt;2 3int main() 4{ 5std::cout \u0026lt;\u0026lt; \u0026#34;Hello World!\u0026#34; \u0026lt;\u0026lt; std::endl; 6} 1package main 2import \u0026#34;fmt\u0026#34; 3func main() { 4fmt.Printf(\u0026#34;Hello World!\\n\u0026#34;) 5} 1class HelloWorld { 2static public void main( String args[] ) { 3System.out.println( \u0026#34;Hello World!\u0026#34; ); 4} 5} 1fun main(args : Array\u0026lt;String\u0026gt;) { 2println(\u0026#34;Hello, world!\u0026#34;) 3} 1print \u0026#34;Hello world\u0026#34; 1\u0026lt;?php 2echo \u0026#39;Hello World!\u0026#39;; 3?\u0026gt; 1print(\u0026#34;Hello World!\u0026#34;) 1puts \u0026#34;Hello World!\u0026#34; 1object HelloWorld extends App { 2println(\u0026#34;Hello world!\u0026#34;) 3}  The Docsy template provides two shortcodes tabpane and tab that let you easily create tabbed panes. To see how to use them, have a look at the following code block, which renders to a pane with three tabs:\n1{{\u0026lt;tabpane\u0026gt;}} 2{{\u0026lt;tabheader=\u0026#34;English\u0026#34;\u0026gt;}} 3Welcome! 4{{\u0026lt;/tab\u0026gt;}} 5{{\u0026lt;tabheader=\u0026#34;German\u0026#34;\u0026gt;}} 6Herzlich willkommen! 7{{\u0026lt;/tab\u0026gt;}} 8{{\u0026lt;tabheader=\u0026#34;Swahili\u0026#34;\u0026gt;}} 9Karibu sana! 10{{\u0026lt;/tab\u0026gt;}} 11{{\u0026lt;/tabpane\u0026gt;}} This code translates to the tabbed pane below, showing a Welcome! greeting in English, German or Swahili:\nEnglish  German  Swahili   1Welcome! 1Herzlich willkommen! 1Karibu sana!  Shortcode details Tabbed panes are implemented using two shortcodes:\n The tabpane shortcode, which is the container element for the tabs. This shortcode can optionally held the named parameters lang and/or highlight. The values of these optional parameters are passed on as second LANG and third OPTIONS arguments to Hugo\u0026rsquo;s built-in highlight function which is used to render the code blocks of the individual tabs. In case the header text of the tab equals the language used in the tab\u0026rsquo;s code block (as in the first tabbed pane example above), you may specify langEqualsHeader=true in the surrounding tabpane shortcode. Then, the header text of the individual tab is automatically set as language parameter of the respective tab. The various tab shortcodes which actually represent the tabs you would like to show. We recommend specifying the named parameter header for each text in order to set the header text of each tab. If needed, you can additionally specify the named parameters lang and highlight for each tab. This allows you to overwrite the settings given in the parent tabpane shortcode. If the language is neither specified in the tabpane nor in the tabshortcode, it defaults to Hugo\u0026rsquo;s site variable .Site.Language.Lang.  Hugo theme: book  Columns  Columns help organize shorter pieces of content horizontally for readability.\n1{{\u0026lt; columns \u0026gt;}} \u0026lt;!-- begin columns block --\u0026gt; 2\\# Left Content 3Lorem markdownum insigne... 45\u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; 67# Mid Content 8Lorem markdownum insigne... 910\u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; 1112# Right Content 13Lorem markdownum insigne... 14{{\u0026lt; /columns \u0026gt;}} It did not work\nsection 1{{\u0026lt; section \u0026gt;}} detail 1{{\u0026lt; details title=\u0026#34;Title\u0026#34; open=true \u0026gt;}} 2## Markdown content 3Lorem markdownum insigne... 4{{\u0026lt; /details \u0026gt;}} Title Markdown content Lorem markdownum insigne\u0026hellip;   expand  Is this learn theme rocks ?  Yes !.  Loveit  style style shortcode 用来在你的文章中插入自定义样式.\nstyle shortcode 有两个位置参数.\n第一个参数是自定义样式的内容. 它支持 SASS 中的嵌套语法, 并且 \u0026amp; 指代这个父元素.\n第二个参数是包裹你要更改样式的内容的 HTML 标签, 默认值是 div.\n一个 style 示例:\n1{{\u0026lt; style \u0026#34;text-align:right; strong{color:#00b1ff;}\u0026#34; \u0026gt;}} 2This is a **right-aligned** paragraph. 3{{\u0026lt; /style \u0026gt;}} This is a right-aligned paragraph. typeit 1{{\u0026lt; typeit \u0026gt;}} 2这一个带有基于 [TypeIt](https://typeitjs.com/) 的 **打字动画** 的 *段落*... 3{{\u0026lt; /typeit \u0026gt;}}   new TypeIt(\"#myElement\", { strings:\"这一个带有基于 \\u003ca href=\\\"https://typeitjs.com/\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\"\\u003eTypeIt\\u003c/a\\u003e\\n 的 \\u003cstrong\\u003e打字动画\\u003c/strong\\u003e 的 \\u003cem\\u003e段落\\u003c/em\\u003e\\u0026hellip;\", }).go();  mermaid  script LoveIt NEW | 0.2.8 script is a shortcode to insert custom Javascript in your post.\nNote\nThe script content can be guaranteed to be executed in order after all third-party libraries are loaded. So you are free to use third-party libraries.\nExample script input:\necharts ","date":"Sep 2, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_10_more_shortcodes_2/","series":["Hugo"],"tags":[],"title":"Hugo 10 More Shortcodes 2"},{"categories":["Hugo"],"content":"Find more shortcodes, add them\n# 在 Hugo 博客上实践 Shortcodes 短代码  year 1今年是 {{\u0026lt; year \u0026gt;}} 年. 今年是 2022 年.\nmark 1{{\u0026lt; mark text=\u0026#34;HTML 标记\u0026#34; \u0026gt;}}  HTML 标记 实现方法很简单, 只需创建 mark.html\n1\u0026lt;!-- ./layouts/shortcodes/mark.html 2https://matnoble.me/posts/shortcodes-practice-tutorial-for-hugo/#mark-标记支持 3--\u0026gt; 45\u0026lt;mark\u0026gt;{{ .Get \u0026#34;text\u0026#34; }}\u0026lt;/mark\u0026gt; abbr 缩写支持 1{{\u0026lt; abbr title=\u0026#34;Beihang University\u0026#34; text=\u0026#34;BUAA\u0026#34; \u0026gt;}}  BUAA.\n实现方法也很简单, 只需创建 abbr.html\n1https://matnoble.me/posts/shortcodes-practice-tutorial-for-hugo/#abbr-缩写支持 2--\u0026gt; 34\u0026lt;abbr title=\u0026#34;{{ .Get \u0026#34;title\u0026#34; }}\u0026#34;\u0026gt;{{ .Get \u0026#34;text\u0026#34; }}\u0026lt;/abbr\u0026gt;` 自定义 Hugo Shortcodes 简码 . align 这个简码的功能是设定文字的位置（居左、居中、居右、两端对齐等等）, 支持的样式基于 CSS 语法。你需要在 ~/layouts/shortcodes/ 下创建 align.html 文件, 其内容如下:\n1  \u0026lt;p style=\u0026#34;text-align:{{ index .Params 0 }}\u0026#34;\u0026gt;{{ index .Params 1 | markdownify }}\u0026lt;/p\u0026gt;   具体简码和样式如下:\n1 2 3  {{\u0026lt; align left \u0026#34;LEFT\u0026#34; \u0026gt;}} {{\u0026lt; align center \u0026#34;CENTER\u0026#34; \u0026gt;}} {{\u0026lt; align right \u0026#34;RIGHT\u0026#34; \u0026gt;}}    LEFT\nCENTER\nRIGHT\ngithub 这个简码的功能是插入 GitHub 仓库。有时候我们会在文中分享某个 GitHub 仓库，但如果只是放一个超链接，样式有些单一，不能吸引读者的注意力。所以我模仿 GitHub 仓库的形式写了这个简码。首先创建 github.html 文件，内容如下所示：\n1 2 3 4 5 6 7 8 9 10 11 12 13  \u0026lt;!-- 文件位置：~/layouts/shortcodes/github.html --\u0026gt; \u0026lt;div class=\u0026#34;github\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;logo\u0026#34;\u0026gt; {{ replace $.Site.Data.SVG.repository \u0026#34;icon\u0026#34; \u0026#34;icon github-icon\u0026#34; | safeHTML }} \u0026lt;a class=\u0026#34;name\u0026#34; href={{ .Get \u0026#34;link\u0026#34; }} target=\u0026#34;_blank\u0026#34;\u0026gt;{{ .Get \u0026#34;name\u0026#34; }}\u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;description\u0026#34;\u0026gt;{{ .Get \u0026#34;description\u0026#34; }}\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;language\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;language-color\u0026#34; style=\u0026#34;background-color: {{ .Get \u0026#34;color\u0026#34; }}\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;{{ .Get \u0026#34;language\u0026#34; }}\u0026lt;/span\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt;   然后添加自定义 CSS 样式。在 ~/assets/scss/custom/_custom.scss文件中添加如下内容:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  .github { border: 1px solid var(--color-contrast-low); border-radius: 3px; margin: 0 auto; margin-bottom: 1em; padding: 1em; .github-icon { width: 1.2em; height: 1.2em; margin-right: 0.5em; margin-bottom: 0.2em; fill: var(--color-contrast-high); transition: all .5s; } .name { font-weight: bold; color: var(--color-primary); text-decoration: none; } .description { margin-top: 0.5em; margin-bottom: 1em; color: var(--color-contrast-high); text-align: justify; font-size: 90%; transition: all .5s; } .language-color { position: relative; top: 1px; display: inline-block; width: 0.75em; height: 0.75em; border-radius: 50%; } .language-name { color: var(--color-contrast-high); font-size: 90%; margin-left: 0.5em; transition: all .5s; } }   最后需要在 ~/data/SVG.toml 文件中插入图标：\n1 2  # GitHub Icon repository = \u0026#39;\u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; class=\u0026#34;icon\u0026#34; viewBox=\u0026#34;0 0 16 16\u0026#34;\u0026gt;\u0026lt;path fill-rule=\u0026#34;evenodd\u0026#34; clip-rule=\u0026#34;evenodd\u0026#34; d=\u0026#34;M2 2.5C2 1.83696 2.26339 1.20107 2.73223 0.732233C3.20108 0.263392 3.83696 0 4.5 0L13.25 0C13.4489 0 13.6397 0.0790176 13.7803 0.21967C13.921 0.360322 14 0.551088 14 0.75V13.25C14 13.4489 13.921 13.6397 13.7803 13.7803C13.6397 13.921 13.4489 14 13.25 14H10.75C10.5511 14 10.3603 13.921 10.2197 13.7803C10.079 13.6397 10 13.4489 10 13.25C10 13.0511 10.079 12.8603 10.2197 12.7197C10.3603 12.579 10.5511 12.5 10.75 12.5H12.5V10.5H4.5C4.30308 10.5 4.11056 10.5582 3.94657 10.6672C3.78257 10.7762 3.65442 10.9312 3.57816 11.1128C3.50191 11.2943 3.48096 11.4943 3.51793 11.6878C3.5549 11.8812 3.64816 12.0594 3.786 12.2C3.92524 12.3422 4.0023 12.5338 4.00024 12.7328C3.99818 12.9318 3.91716 13.1218 3.775 13.261C3.63285 13.4002 3.4412 13.4773 3.24222 13.4752C3.04325 13.4732 2.85324 13.3922 2.714 13.25C2.25571 12.7829 1.99929 12.1544 2 11.5V2.5ZM12.5 1.5V9H4.5C4.144 9 3.806 9.074 3.5 9.208V2.5C3.5 2.23478 3.60536 1.98043 3.79289 1.79289C3.98043 1.60536 4.23478 1.5 4.5 1.5H12.5ZM5 12.25V15.5C5 15.5464 5.01293 15.5919 5.03734 15.6314C5.06175 15.6709 5.09667 15.7028 5.1382 15.7236C5.17972 15.7444 5.22621 15.7532 5.27245 15.749C5.31869 15.7448 5.36286 15.7279 5.4 15.7L6.85 14.613C6.89328 14.5805 6.94591 14.563 7 14.563C7.05409 14.563 7.10673 14.5805 7.15 14.613L8.6 15.7C8.63714 15.7279 8.68131 15.7448 8.72755 15.749C8.77379 15.7532 8.82028 15.7444 8.8618 15.7236C8.90333 15.7028 8.93826 15.6709 8.96266 15.6314C8.98707 15.5919 9 15.5464 9 15.5V12.25C9 12.1837 8.97366 12.1201 8.92678 12.0732C8.87989 12.0263 8.81631 12 8.75 12H5.25C5.1837 12 5.12011 12.0263 5.07322 12.0732C5.02634 12.1201 5 12.1837 5 12.25Z\u0026#34;/\u0026gt;\u0026lt;/svg\u0026gt;\u0026#39;   你需要在简码中填写仓库名 name，仓库链接 link，仓库描述 description，代码语言 language，代码语言对应的颜色 color。\n具体简码和样式如下：\n1  {{\u0026lt; github name=\u0026#34;Organic-Carbon-Estimating\u0026#34; link=\u0026#34;https://github.com/guanqr/Organic-Carbon-Estimating\u0026#34; description=\u0026#34;A program used in estimating organic carbon stocks in oceans. 计算指定海域的有机碳存量，包括颗粒有机碳与溶解有机碳，数据依赖于 NASA 中分辨率成像光谱仪 MODIS 遥感产品。\u0026#34; color=\u0026#34;#e16737\u0026#34; language=\u0026#34;MATLAB\u0026#34; \u0026gt;}}   The origin shortcode is used in the MEME theme, I cant use it\nWikipedia  历史上的今天 blockquoto  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  {{\u0026lt; blockquote author=\u0026#34;张若虚（唐）\u0026#34; link=\u0026#34;https://baike.baidu.com/item/%E6%98%A5%E6%B1%9F%E8%8A%B1%E6%9C%88%E5%A4%9C/1701\u0026#34; title=\u0026#34;《春江花月夜》\u0026#34; \u0026gt;}} 春江潮水连海平，海上明月共潮生。\u0026lt;br /\u0026gt; 滟滟随波千万里，何处春江无月明！\u0026lt;br /\u0026gt; 江流宛转绕芳甸，月照花林皆似霰。\u0026lt;br /\u0026gt; 空里流霜不觉飞，汀上白沙看不见。\u0026lt;br /\u0026gt; 江天一色无纤尘，皎皎空中孤月轮。\u0026lt;br /\u0026gt; 江畔何人初见月？江月何年初照人？\u0026lt;br /\u0026gt; 人生代代无穷已，江月年年望相似。\u0026lt;br /\u0026gt; 不知江月待何人，但见长江送流水。\u0026lt;br /\u0026gt; 白云一片去悠悠，青枫浦上不胜愁。\u0026lt;br /\u0026gt; 谁家今夜扁舟子？何处相思明月楼？\u0026lt;br /\u0026gt; 可怜楼上月裴回，应照离人妆镜台。\u0026lt;br /\u0026gt; 玉户帘中卷不去，捣衣砧上拂还来。\u0026lt;br /\u0026gt; 此时相望不相闻，愿逐月华流照君。\u0026lt;br /\u0026gt; 鸿雁长飞光不度，鱼龙潜跃水成文。\u0026lt;br /\u0026gt; 昨夜闲潭梦落花，可怜春半不还家。\u0026lt;br /\u0026gt; 江水流春去欲尽，江潭落月复西斜。\u0026lt;br /\u0026gt; 斜月沉沉藏海雾，碣石潇湘无限路。\u0026lt;br /\u0026gt; 不知乘月几人归，落月摇情满江树。 {{\u0026lt; /blockquote \u0026gt;}}     春江潮水连海平，海上明月共潮生。\n滟滟随波千万里，何处春江无月明！\n江流宛转绕芳甸，月照花林皆似霰。\n空里流霜不觉飞，汀上白沙看不见。\n江天一色无纤尘，皎皎空中孤月轮。\n江畔何人初见月？江月何年初照人？\n人生代代无穷已，江月年年望相似。\n不知江月待何人，但见长江送流水。\n白云一片去悠悠，青枫浦上不胜愁。\n谁家今夜扁舟子？何处相思明月楼？\n可怜楼上月裴回，应照离人妆镜台。\n玉户帘中卷不去，捣衣砧上拂还来。\n此时相望不相闻，愿逐月华流照君。\n鸿雁长飞光不度，鱼龙潜跃水成文。\n昨夜闲潭梦落花，可怜春半不还家。\n江水流春去欲尽，江潭落月复西斜。\n斜月沉沉藏海雾，碣石潇湘无限路。\n不知乘月几人归，落月摇情满江树。\n 张若虚（唐）  《春江花月夜》    好友链接   传传转转\n一个在等毕业的菜博士…   GeekThis.net  Google Maps Adding Google Maps can sometimes be useful to add inside of posts or onto pages of your website. Our shortcode provides the general Google Maps Place API to embed a Google Map with a search query. A search can include an address, city, street, or almost any other location.\nWith Google Maps, you need to first setup a Google Maps API Key. It\u0026rsquo;s free and easy to setup. Visit the [Google Developer API Console]google-console and create a new application to get your API key. You can store this key inside your Hugo configuration file or each time you ues the shortcode, you can add the API Key to the parameter key.\n1[params] 2googleMapsAPIKey = \u0026#34;000000000000\u0026#34; The Google Maps shortcode accepts the parameters of height, key, and location. The height defaults to 400px if it\u0026rsquo;s not set and the api key defaults to the site configuration API Key. The location is a search query for a location you want to display for the map.\n1{{\u0026lt; google-maps key=\u0026#34;000\u0026#34; height=\u0026#34;300\u0026#34; location=\u0026#34;Googleplex, Amphitheatre Parkway, Mountain View, CA\u0026#34; \u0026gt;}} Because I didn\u0026rsquo;t open the service from Google Cloud Platform(Visa needed), just write down it.\nBaidu Maps We only support one baidumap in a single page   var map = new BMap.Map(\"baidu_container\"); var point = new BMap.Point(116.403874,39.914888 ); map.centerAndZoom(point, 15); map.addControl(new BMap.NavigationControl()); map.addControl(new BMap.ScaleControl()); map.addControl(new BMap.OverviewMapControl()); map.addControl(new BMap.MapTypeControl()); map.addControl(new BMap.GeolocationControl());  Gaode Maps We only support one baidumap in a single page   AMapLoader.load({ \"key\": \"c96df1e69be98507ad704ee9e0940fdc\", \"version\": \"2.0\", \"plugins\":['AMap.Scale','AMap.ToolBar','AMap.MapType'], }).then((AMap)={ var map = new AMap.Map('gaode-container', {resizeEnable: true, zoom:15, center: [116.403874,39.914888] }); map.addControl(new AMap.Scale()) map.addControl(new AMap.ToolBar()) map.addControl(new AMap.MapType()) map.add(new AMap.Marker({ position:map.getCenter() })); }).catch((e)={ console.error(e); });  Box Documents If you use Box to share files, adding embedded files to your website is easy. Box provides an embedded view for shared files that displays a preview of almost any file available, such as PDF, DOC, Spreadsheets and others.\nThe box shortcode accepts two parameters, the share ID of the file and the height you want the document to be displayed at. To get the ID of a file inside of Box, right click on a file inside of Box and click on \u0026ldquo;Share.\u0026rdquo; The publicly available URL will be similar to https://app.box.com/s/mwhbbflukstfsjz8mwkdg9btn9h5con3, you will want to grab the unique string of characters ofter the /s/ path.\n ","date":"Sep 2, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_9_more_shortcodes/","series":["Hugo"],"tags":[],"title":"Hugo 9 More Shortcodes"},{"categories":["Hugo"],"content":"List html5 Game source and choose them.\nhttps://www.w3cschool.cn/html5/html5-game2.html  FruitNinja  自从iOS和Android兴起以来，水果忍者游戏一直是这两个平台上面相当热门的游戏，很多玩家都会在工作学习之余切切水果，打发时间。今天，HTML5网页版水果忍者游戏同样给大家带来了不同的感觉，赶紧来试试这款好玩的HTML5网页版水果忍者游戏\nFlappyBird  前段时间Flappy Bird游戏那是相当的火，有无数年轻人为之疯狂，这里我们要分享一款奇葩版的Flappy Bird——HTML5 Flappy Text游戏，用若干个字母来代替bird，每触碰一个障碍，字母就会少一个。一起来玩玩吧。\n五子棋  前几天我向大家分享过一款HTML5中国象棋游戏 ，效果令人惊叹，小编的实力很难胜过电脑。今天我要向大家分享一款HTML5 五子棋游戏，不仅游戏画面非常华丽，而且可以自己设置难度，并且可以选择人机对战还是人人对战，这款HTML5五子棋游戏绝对称得上HTML5游戏中的极品。\n2048  游戏的玩法很简单，在4×4的棋盘上，用方向键选择数字移动的方向，遇到相同的数字就会合并，每次移动会增加一个数字。合并出2048就算通关。虽然简单，但是很有乐趣，被誉为“根本停不下来的游戏”。\n","date":"Sep 2, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_8_add_games_as_static/","series":["Hugo"],"tags":[],"title":"Hugo 8 Game List"},{"categories":["Hugo"],"content":"Try to usePicGo https://picgo.github.io/PicGo-Doc/zh/ PicGo  图片上传+管理新体验\n       应用概述  PicGo: 一个用于快速上传图片并获取图片 URL 链接的工具\nPicGo 本体支持如下图床：\n 七牛图床 v1.0 腾讯云 COS v4\\v5 版本 v1.1 \u0026amp; v1.5.0 又拍云 v1.2.0 GitHub v1.5.0 SM.MS V2 v2.3.0-beta.0 阿里云 OSS v1.6.0 Imgur v1.6.0  特色功能  支持拖拽图片上传 支持快捷键上传剪贴板里第一张图片 Windows 和 macOS 支持右键图片文件通过菜单上传 (v2.1.0+) 上传图片后自动复制链接到剪贴板 支持自定义复制到剪贴板的链接格式 支持修改快捷键，默认快速上传快捷键：command+shift+p（macOS）| control+shift+p（Windows\\Linux) 支持插件系统，已有插件支持 Gitee、青云等第三方图床  更多第三方插件以及使用了 PicGo 底层的应用可以在 Awesome-PicGo 找到。欢迎贡献！   支持通过发送 HTTP 请求调用 PicGo 上传（v2.2.0+) 更多功能等你自己去发现，同时也会不断开发新功能  开发进度可以查看 Projects ，会同步更新开发进度 欢迎加入 官方讨论区 与我交流    Install Download on this site https://github.com/Molunerfinn/PicGo/releases Set Source on Github Sign in GIthub setting -\u0026gt; develper setting -\u0026gt; personal token -\u0026gt; generate\nset on PicGo also as a test\n","date":"Sep 2, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_7_picture_bed/","series":["Hugo"],"tags":[],"title":"Hugo 7 PicGo"},{"categories":["Hugo"],"content":"Try to review the doc of hugo!.\nCONTENT MANAGEMENT  Links and Cross References The ref and relref shortcodes display the absolute and relative permalinks to a document, respectively. https://parkman.top/en/posts/hugo/hugo_5_development_of_themes/ https://parkman.top/en/posts/hugo/hugo_5_development_of_themes/ https://parkman.top/en/posts/hugo/hugo_5_development_of_themes/#preview https://parkman.top/en/posts/hugo/hugo_5_development_of_themes/#preview\n#links-and-cross-references\nhttps://parkman.top/en/about/\nhttps://parkman.top/en/about/\n/en/posts/hugo/hugo_5_development_of_themes/\n/en/posts/hugo/hugo_5_development_of_themes/\n#links-and-cross-referencesr\n/en/about/\nAbout Game Link  FruitNinja   FUNCTIONS  absLangURL {{ \u0026ldquo;blog/\u0026rdquo; | absLangURL }} {{ \u0026ldquo;blog/\u0026rdquo; | relLangURL }}\nShortcodes  highlight 1fplot(x^2)  figure  shortcode   gist  param TEST PARAM!","date":"Sep 2, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_6_check_doc_of_hugo/","series":["Hugo"],"tags":[],"title":"Hugo 6 Doc of Hugo"},{"categories":["Hugo"],"content":"Develop This theme relies on npm and webpack for development. The source of js and scss are placed in src directory.\nInstall dependencies $ npm install\nRebuild assets $ npm run build npm run watch rebuild assets on change.\nPreview $ cd exampleSite $ hugo server --themesDir=../../\nFormating Code $ npm run lint\ninstall npm brew install node\n","date":"Sep 2, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_5_development_of_themes/","series":["Hugo"],"tags":[],"title":"Hugo 5 Development of Themes"},{"categories":["Hugo"],"content":"%%# Modify Layout of sites%% Tested in the theme: bookstrape\nGlance 1cd layouts/partials/ 2ls -l This htmls describe the basic layout of your sites\n1-rwx------+ 1 parkman None 105 Sep 1 22:21 body-end.html 2-rwx------+ 1 parkman None 878 Sep 1 22:21 breadcrumb.html 3drwx------+ 1 parkman None 0 Sep 2 00:52 footer 4-rwx------+ 1 parkman None 243 Sep 1 22:21 footer.html 5drwx------+ 1 parkman None 0 Sep 2 00:32 head 6-rwx------+ 1 parkman None 905 Sep 2 01:07 head.html 7drwx------+ 1 parkman None 0 Sep 2 00:32 header 8-rwx------+ 1 parkman None 55 Sep 1 22:21 header.html 9drwx------+ 1 parkman None 0 Sep 2 00:32 helpers 10drwx------+ 1 parkman None 0 Sep 2 00:32 hooks 11-rwx------+ 1 parkman None 1018 Sep 1 22:21 list.html 12-rwx------+ 1 parkman None 96 Sep 1 22:21 pagination.html 13drwx------+ 1 parkman None 0 Sep 2 00:32 plugins 14drwx------+ 1 parkman None 0 Sep 2 00:32 post 15-rwx------+ 1 parkman None 539 Sep 1 22:21 post.html 16-rwx------+ 1 parkman None 110 Sep 1 22:21 scroll-to-top.html 17-rwx------+ 1 parkman None 330 Sep 1 22:21 sections.html 18drwx------+ 1 parkman None 0 Sep 2 00:32 sidebar 19-rwx------+ 1 parkman None 207 Sep 1 22:21 sidebar.html we can modify them. Let\u0026rsquo;s begin with header\nheader try extract dark/light mode 1\u0026lt;header\u0026gt; 2{{- partial \u0026#34;header/navbar\u0026#34; . -}} 3\u0026lt;/header\u0026gt; header.html call the function(I guess) navbar in the header folder, which writes,\n1{{- $menusPositions := dict \u0026#34;right\u0026#34; \u0026#34;ms-auto\u0026#34; \u0026#34;left\u0026#34; \u0026#34;me-auto\u0026#34; \u0026#34;center\u0026#34; \u0026#34;me-auto ms-auto\u0026#34; -}} 2{{- $baseURL := $.Site.BaseURL -}} 3\u0026lt;nav class=\u0026#34;navbar navbar-expand-xl{{ if (default true $.Site.Params.fixedHeader) }} fixed-top{{ end }}\u0026#34;\u0026gt; 4\u0026lt;div class=\u0026#34;container{{ if default false .Site.Params.fullWidth }}-fluid{{ end }}\u0026#34;\u0026gt; 5\u0026lt;a class=\u0026#34;navbar-brand{{ if .IsHome }} active{{ end }}\u0026#34; href=\u0026#34;{{ absLangURL \u0026#34;\u0026#34; }}\u0026#34;\u0026gt; 6{{ partial \u0026#34;helpers/image\u0026#34; (dict \u0026#34;filename\u0026#34; (default \u0026#34;images/logo.webp\u0026#34; .Site.Params.logo) \u0026#34;alt\u0026#34; \u0026#34;Logo\u0026#34; \u0026#34;class\u0026#34; \u0026#34;logo\u0026#34; \u0026#34;resources\u0026#34; .Resources) }} 7{{- with .Site.Params.brand -}} 8{{ . }} 9{{- end -}} 10\u0026lt;/a\u0026gt; 11\u0026lt;button class=\u0026#34;navbar-toggler\u0026#34; type=\u0026#34;button\u0026#34; data-bs-toggle=\u0026#34;collapse\u0026#34; data-bs-target=\u0026#34;#navbarSupportedContent\u0026#34; aria-controls=\u0026#34;navbarSupportedContent\u0026#34; aria-expanded=\u0026#34;false\u0026#34; aria-label=\u0026#34;Toggle navigation\u0026#34;\u0026gt; 12\u0026lt;span class=\u0026#34;navbar-toggler-icon\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; 13\u0026lt;/button\u0026gt; 14\u0026lt;div class=\u0026#34;collapse navbar-collapse\u0026#34; id=\u0026#34;navbarSupportedContent\u0026#34;\u0026gt; 15\u0026lt;ul class=\u0026#34;navbar-nav me-1 mb-2 mb-lg-0\u0026#34;\u0026gt; 16{{- partial \u0026#34;header/search-bar\u0026#34; . -}} 17\u0026lt;/ul\u0026gt; 18{{- $menusPosition := default \u0026#34;right\u0026#34; .Site.Params.menusPosition -}} 19\u0026lt;ul class=\u0026#34;navbar-nav me-1 mb-2 mb-lg-0 me-1 {{ index $menusPositions $menusPosition }}\u0026#34;\u0026gt; 20{{- $currentPage := . -}} 21{{- range .Site.Menus.main -}} 22{{- $url := absLangURL .URL -}} 23{{- $active := or (eq $currentPage.Permalink (absLangURL .URL)) ($currentPage.IsMenuCurrent \u0026#34;main\u0026#34; .) -}} 24{{- if .HasChildren -}} 25\u0026lt;li class=\u0026#34;nav-item dropdown\u0026#34;\u0026gt; 26\u0026lt;a class=\u0026#34;nav-link{{ if $currentPage.HasMenuCurrent \u0026#34;main\u0026#34; . }} active{{ end }}\u0026#34; id=\u0026#34;navbarDropdown-{{ .Identifier }}\u0026#34; role=\u0026#34;button\u0026#34; data-bs-toggle=\u0026#34;dropdown\u0026#34; aria-expanded=\u0026#34;false\u0026#34;\u0026gt; 27{{ .Pre }} {{- .Name -}} {{ .Post }} 28\u0026lt;/a\u0026gt; 29\u0026lt;ul class=\u0026#34;dropdown-menu\u0026#34; aria-labelledby=\u0026#34;navbarDropdown-{{ .Identifier }}\u0026#34;\u0026gt; 30{{- range .Children -}} 31{{- $childURL := absLangURL .URL -}} 32\u0026lt;li\u0026gt; 33\u0026lt;a class=\u0026#34;dropdown-item{{ if or (eq $currentPage.Permalink (absLangURL .URL)) ($currentPage.IsMenuCurrent \u0026#34;main\u0026#34; .) }} active{{ end }}\u0026#34; 34href=\u0026#34;{{ $childURL }}\u0026#34;{{ if not (hasPrefix $childURL $baseURL) }} target=\u0026#34;_blank\u0026#34; rel=\u0026#34;noopener noreferrer\u0026#34;{{ end }}\u0026gt; 35{{ .Pre }} {{- .Name -}} {{ .Post }} 36\u0026lt;/a\u0026gt; 37\u0026lt;/li\u0026gt; 38{{- end -}} 39\u0026lt;/ul\u0026gt; 40\u0026lt;/li\u0026gt; 41{{- else -}} 42\u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; 43\u0026lt;a class=\u0026#34;nav-link{{ if $active }} active{{ end }}\u0026#34; href=\u0026#34;{{ $url }}\u0026#34;{{ if not (hasPrefix $url $baseURL) }} target=\u0026#34;_blank\u0026#34; rel=\u0026#34;noopener noreferrer\u0026#34;{{ end }}\u0026gt; 44{{ .Pre }} {{- .Name -}} {{ .Post }} 45\u0026lt;/a\u0026gt; 46\u0026lt;/li\u0026gt; 47{{- end -}} 48{{- end -}} 49{{- partial \u0026#34;header/languages\u0026#34; . -}} 50{{- partial \u0026#34;header/settings\u0026#34; . -}} 51\u0026lt;/ul\u0026gt; 52\u0026lt;/div\u0026gt; 53\u0026lt;/div\u0026gt; 54\u0026lt;/nav\u0026gt; This files describe all the componet of the headbar of my site, howerver, I just would not like the collapse setting button and hope to extrack the dark/light mode button out. Track this line\n1{{- partial \u0026#34;header/settings\u0026#34; . -}} put this line out of the class \u0026ldquo;offcanvas-body\u0026rdquo;\n1{{- partial \u0026#34;header/settings/mode\u0026#34; . -}} annotate the words mode\n1\u0026lt;!-- \u0026lt;div class=\u0026#34;col-auto\u0026#34;\u0026gt; 2\u0026lt;label\u0026gt;\u0026lt;i class=\u0026#34;fas fa-fw fa-adjust\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; {{ i18n \u0026#34;mode\u0026#34; }}\u0026lt;/label\u0026gt; 3\u0026lt;/div\u0026gt; --\u0026gt; Actucally, the result shows this is a silly action. It\u0026rsquo;s ugly.\ntry disable the catagories Sidebar 1{{- partial \u0026#34;sidebar/profile\u0026#34; . -}} 2{{- partial \u0026#34;sidebar/featured-posts\u0026#34; . -}} 3{{- partial \u0026#34;sidebar/recent-posts\u0026#34; . -}} 4{{- partial \u0026#34;sidebar/taxonomies\u0026#34; . -}} we can interchange the sequence.\nfooter 1{{- partial \u0026#34;footer/social-links\u0026#34; . -}} 2{{- partial \u0026#34;footer/count\u0026#34; . -}} 3{{- partial \u0026#34;footer/copyright\u0026#34; . -}} 4{{- partial \u0026#34;footer/powered-by\u0026#34; . -}} we add conut component \u0026ldquo;busuanzi\u0026rdquo; in the bottom of pages\n","date":"Sep 2, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_4_modify_layout/","series":["Hugo"],"tags":[],"title":"Hugo 4 Modify Layout"},{"categories":["Hugo"],"content":"See https://themes.gohugo.io/themes/hugo-theme-bootstrap/ .\nmodify information modify author enter the configure directory.\ncd config/_default\nconfigure information of author in the author.toml\nsubl author.toml\nmodify external link for socialize subl social.toml\nmodify copyright 1cd ../produciton 2cp _default/config.toml . 3subl config.toml modify parameters 1cp _default/params.toml . 2subl params.toml for spider 1description = \u0026#34;\u0026#34; 2keywords = \u0026#34;\u0026#34; logo 1logo = \u0026#34;images/logo.png\u0026#34; BRAND 1brand = \u0026#34;PARKMAN\u0026#34; Color copy themes/hugo-theme-bootstrap/assets/css/main.css to assets/css/main.css\n1cp ../../themes/hugo-theme-bootstrap/assets/css/main.css assets/css/main.css 2subl main.css find color and replace\nColorMap  blue #1685a9 石青 blue-gray #2e4e7e 藏青 brown #896c39 秋色 cyan #177cb0 靓青 green #21a675 松柏绿 indigo #003371 绀青 orange #ff8c31 杏黄 pink #eea5d1 紫薇花 purple #d6ecf0 银白 red #c03f3c 胭脂 teal #426666 黛绿 yellow #d5b884 卡其黄vi  reward 1alipay = \u0026#34;images/reward/alipay.png\u0026#34; 2wechat = \u0026#34;images/reward/wechat.png\u0026#34; ","date":"Sep 1, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_3_modify_basic_themes/","series":["Hugo"],"tags":[],"title":"Hugo 3 Modify Basic Themes"},{"categories":["Hugo"],"content":"install Bookstrap themes and connect with your github page build up a new site with hugo 1hugo new site parkman-auex.github.io init you website 1cd parkman-auex.github.io 2git init 3git submodule add https://github.com/razonyang/hugo-theme-bootstrap themes/hugo-theme-bootstrap 4cp -a themes/hugo-theme-bootstrap/exampleSite/* . push an existing repository from the command line 1git remote add origin https://github.com/parkman-auex/parkman-auex.github.io.git 2git branch -M main 3git add * 4git commit -m \u0026#34;first commit\u0026#34; 5git push -u origin main preview 1hugo server The website can be previewed on the local browser :\n1http://localhost:1313/ public 1vi config.toml set up your website\n1baseURL = \u0026#39;https://parkman-auex.github.io/\u0026#39; 2languageCode = \u0026#39;en-us\u0026#39; 3title = \u0026#39;parkman\u0026#39; 4publishDir = \u0026#39;docs\u0026#39; compile\n1hugo git\n1git add * 2msg=\u0026#34;rebuilding site `date`\u0026#34; 3git commit -m \u0026#34;$msg\u0026#34; 4git push origin main change Setting-\u0026gt;Pages-\u0026gt;Source to docs and Save\nview on https://parkman-auex.github.io/ ","date":"Aug 31, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_2_build_a_website/","series":["Hugo"],"tags":[],"title":"Hugo 2 Build a Website"},{"categories":["Hugo"],"content":"install hugo on mac install dependecy: Go download the Installation package  https://golang.org/dl  https://golang.google.cn/dl/   set system envronment variable  export PATH=$PATH:/usr/local/go/bin echo \u0026quot;PATH=$PATH:/usr/local/go/bin\u0026quot; \u0026gt; ~/.zshrc echo \u0026quot;PATH=$PATH:/usr/local/go/bin\u0026quot; \u0026gt; ~/.bash_profile  update brew change source 1# 以下针对 mac OS 系统上的 Homebrew 2git -C \u0026#34;$(brew --repo homebrew/core)\u0026#34; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git 3git -C \u0026#34;$(brew --repo homebrew/cask)\u0026#34; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask.git 4git -C \u0026#34;$(brew --repo homebrew/cask-fonts)\u0026#34; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-fonts.git 5git -C \u0026#34;$(brew --repo homebrew/cask-drivers)\u0026#34; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-drivers.git update 1git -C /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow 2brew update install hugo 1brew install hugo test 1hugo --version set up a website init 1hugo new site [PATH]/parkman-auex.github.io 2cd [PATH]/parkman-auex.github.io download theme  1git submodule add git@github.com:StaticMania/roxo-hugo.git themes/roxo post an article 1hugo new content/Blog/REAMME.md 2vi content/Blog/REAMME.md input something\n1--- 2title: \u0026#34;REAMME\u0026#34; 3date: 2021-09-01T13:22:34+08:00 4tags: [\u0026#34;Example\u0026#34;] 5slug: \u0026#34;readme\u0026#34; 6categories: [\u0026#34;Other\u0026#34;] 7draft: true 8comment: true 9---  title : Title of your article date : the date when you publish this article tags : More tags avaliable. Tags can be used in classification. slug : categories : More categories avaliable. draft : true ignore in publish ，false comment : open/close comment  compile 1hugo server --theme=roxo --buildDrafts preview 1http://localhost:1313/ externel 1hugo server -D --bind ip -p 1313 --baseURL=http://ip:1313 ","date":"Aug 31, 2021","img":"","permalink":"https://parkman.top/en/posts/hugo/hugo_1_install/","series":["Hugo"],"tags":[],"title":"Hugo 1 Install"},{"categories":["Markdown"],"content":"We can easily align images by adding URL fragments. Such as #center, #floatleft and #floatright represents align center, float left and float right respectively.\nCenter Adding the #center fragment for aligning images to the center.\nFor example: ![Center](/images/center.png#center).\nFloat Left Adding the #floatleft fragment for floating images to the left.\nFor example: ![Float Left](/images/left.png#floatleft).\nFloat Right Similarly, we can also float images to the right by adding the #floatright fragment.\nFor example: ![Float Right](/images/right.png#floatright).\n","date":"Aug 15, 2021","img":"https://parkman.top/images/center.png","permalink":"https://parkman.top/en/posts/aligning-images/","series":["Manual"],"tags":["Image"],"title":"Aligning Images"},{"categories":[],"content":"通过wanniertools 以及 vasplib计算 Topological nodal line semimetals 的 拓扑数\n方辰，翁红明，戴希，方忠老师这篇关于NL的总结性文章值得推荐1\n模型计算部分 使用吴泉生老师已经做好的wannier：\n TiB22 ZrSiS3  TiB2 ZrSiS   C. Fang, H. Weng, X. Dai, Z. Fang, 方辰 翁红明戴希 方忠, C. Fang, H. Weng, X. Dai, and Z. Fang, Topological Nodal Line Semimetals, Chin. Phys. B 25, 117106 (2016).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n C.-J. Yi, B. Q. Lv, Q. S. Wu, B.-B. Fu, X. Gao, M. Yang, X.-L. Peng, M. Li, Y.-B. Huang, P. Richard, M. Shi, G. Li, O. V. Yazyev, Y.-G. Shi, T. Qian, and H. Ding, Observation of a Nodal Chain with Dirac Surface States in Ti B 2, Phys. Rev. B 97, 201107 (2018).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n L. M. Schoop, M. N. Ali, C. Straßer, A. Topp, A. Varykhalov, D. Marchenko, V. Duppel, S. S. P. Parkin, B. V. Lotsch, and C. R. Ast, Dirac Cone Protected by Non-Symmorphic Symmetry and Three-Dimensional Dirac Line Node in ZrSiS, Nat Commun 7, 11696 (2016).\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Apr 17, 2021","img":"","permalink":"https://parkman.top/en/posts/tb/nl/","series":[],"tags":["Topo"],"title":"Nodal-Line Semimetal 的拓扑数"},{"categories":["Templete"],"content":"This article shows how to use the alert shortcode.\n1{{\u0026lt; alert \u0026#34;Message\u0026#34; [type] \u0026gt;}}  The parameter type is optional. Default to info.\n Info 1{{\u0026lt; alert \u0026#34;Info\u0026#34; \u0026gt;}} Info  Success 1{{\u0026lt; alert \u0026#34;Success\u0026#34; success \u0026gt;}} Success  Warning 1{{\u0026lt; alert \u0026#34;Warning\u0026#34; warning \u0026gt;}} Warning  Danger 1{{\u0026lt; alert \u0026#34;Danger\u0026#34; danger \u0026gt;}} Danger ","date":"Oct 22, 2020","img":"","permalink":"https://parkman.top/en/posts/shortcodes/alert/","series":[],"tags":["Alert"],"title":"Alert Shortcode"},{"categories":["Templete"],"content":"A detailed description of media shortcodes, such as Bilibili, Tencent, Youku, iQiyi and Netease Music.\nBilibili 1{{\u0026lt; bilibili \u0026#34;video id\u0026#34; \u0026gt;}}   Tencent 1{{\u0026lt; tencentvideo \u0026#34;vid\u0026#34; \u0026gt;}}   Youku 1{{\u0026lt; youku \u0026#34;XNTQwMTgxMTE2\u0026#34; \u0026gt;}}   iQiyi 1{{\u0026lt; iqiyi \u0026#34;vid\u0026#34; \u0026#34;tvid\u0026#34; \u0026gt;}}   Netease Music 1{{\u0026lt; neteasemusic \u0026#34;id\u0026#34; [auto [type]] \u0026gt;}}    Parameter Description     auto The auto controls whether to autoplay. Boolean and optional, default to false.   type The type parameter is optional. Default to 2.     ","date":"Oct 22, 2020","img":"","permalink":"https://parkman.top/en/posts/shortcodes/media/","series":[],"tags":["Bilibili","Tencent","Youku","iQiyi","Netease Music"],"title":"Media Shortcodes"},{"categories":["Templete"],"content":"A detailed description of online IDE shortcodes, such as JSFiddle, CodePen, JSRun.\nJSFiddle 1{{\u0026lt; jsfiddle \u0026#34;user/id\u0026#34; \u0026gt;}}   CodePen 1{{\u0026lt; codepen \u0026#34;id\u0026#34; \u0026gt;}}   JSRun 1{{\u0026lt; jsrun \u0026#34;id\u0026#34; \u0026gt;}}  ","date":"Oct 22, 2020","img":"","permalink":"https://parkman.top/en/posts/shortcodes/online-ide/","series":[],"tags":["JSFiddle","CodePen","JSRun"],"title":"Online IDE Shortcodes"},{"categories":["Templete"],"content":"Hugo ships with several Built-in Shortcodes for rich content, along with a Privacy Config and a set of Simple Shortcodes that enable static and no-JS versions of various social media embeds.\n Instagram Simple Shortcode 1{{\u0026lt; instagram_simple BGvuInzyFAe hidecaption \u0026gt;}}  YouTube Privacy Enhanced Shortcode 1{{\u0026lt; youtube ZJthWmvUzzc \u0026gt;}}     Twitter Simple Shortcode 1{{\u0026lt; twitter_simple 1085870671291310081 \u0026gt;}}  Vimeo Simple Shortcode 1{{\u0026lt; vimeo_simple 48912912 \u0026gt;}} ","date":"Mar 11, 2019","img":"","permalink":"https://parkman.top/en/posts/templete/rich-content/","series":null,"tags":["Markdown"],"title":"Markdown 4 Use Shortcodes in Hugo"},{"categories":"Templete","content":"Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries.\nThis theme supports KaTeX .\n To enable KaTex globally set the parameter math to true in a project\u0026rsquo;s configuration To enable KaTex on a per page basis include the parameter math: true in content files  Note: Use the online reference of Supported TeX Functions Examples Inline Such as \\(\\KaTeX\\) and $\\LaTeX$.\nBlock $$ (\\varphi = \\dfrac{1+\\sqrt5}{2}= 1.6180339887…) $$\n\\[ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } \\]\n","date":"Mar 10, 2019","img":"","permalink":"https://parkman.top/en/posts/templete/math-typesetting/","series":null,"tags":["Math","Markdown"],"title":"MarkDown 3 Math Typesetting"},{"categories":["Templete"],"content":"The key is to thrust the entire body tighter from the chest to the top of the chest.\nHe returns and clears you up, and I\u0026rsquo;m afraid of men\u0026rsquo;s muscles, I\u0026rsquo;m afraid his eyes don\u0026rsquo;t subdue the neck, he takes advantage, and he has the fury which they won\u0026rsquo;t tolerate. And now the mountains are hot, spare the bleak season, and the assorted assorted flowers shine through your father, who wished to know the light of the cloud\u0026rsquo;s flower! Dryope spread herself among the branches of the gods.\n They were dashed to life in knots Boss the thumbs up You\u0026rsquo;ll be now He spreads the iron which he spreads in the marsh  Again, no murmurings; The shaft laughs like a serious statement! Having gained the name of the stillness of the river, it was decided to keep up with your word, as it had been thawed. The halls are bad spaces.\n He said that this hair is the offspring of the nobles with piety After the death of the seer Tiresias River protests All the secrets in the mountains Indeed and  Vagus lenyunt The Van de Graaf Canon In the morning I refreshed the excitement that soothed the water When the caduceus has been conquered, to speak against the evil wound of the gilded, he plays the royal summon! The worshiper has got the new leaves to be profane and not furious; and the aunt of the arrow was seen with strength. Created and rich, he makes new roofs and neck wounds are small. The time is here. The flame stretches out, the man sustains his wealth, following the star of the city.\nThe radiance of the offspring, carried off by the body, but the creator of the empire; but also to him: You read the light of the hand of heaven. Words stopped inwardly, and amusements were fixed, and tongues dared to hope that Echionides could hold his horns shut. Everything is supposed to be. The boldness of the past is important; he reels from the first thongs they were carrying, which I conquered myself. There\u0026rsquo;s no way to stick to the wound when viewed and practiced fairly and self.\nEurytus, Hector, clings to his mother\u0026rsquo;s and him as Polites, and not to his son, inadvertently, until the spring follows. Or he was called meek in the temples, and in his wings, and in his eyes, not in the body of his wife, lest she do not like him. One did not grow up, saw the sights of how severe the rivers of death were thus done: the chains were tossed from every quarter by the others! I had hung up, was camping: the moon before the city of Propoetides parte.\n","date":"Mar 9, 2019","img":"","permalink":"https://parkman.top/en/posts/templete/placeholder-text/","series":null,"tags":["Markdown"],"title":"MarkDown 2 Placeholder Text"},{"categories":["Templete"],"content":"Emoji can be enabled in a Hugo project in a number of ways.\nThe emojify function can be called directly in templates or Inline Shortcodes .\nTo enable emoji globally, set enableEmoji to true in your site\u0026rsquo;s configuration and then you can type emoji shorthand codes directly in content files; e.g.\nThe Emoji cheat sheet is a useful reference for emoji shorthand codes.\n N.B. The above steps enable Unicode Standard emoji characters and sequences in Hugo, however the rendering of these glyphs depends on the browser and the platform. To style the emoji you can either use a third party emoji font or a font stack; e.g.\n1.emoji { 2font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols; 3}","date":"Mar 5, 2019","img":"","permalink":"https://parkman.top/en/posts/templete/emoji-support/","series":null,"tags":["Emoji"],"title":"Emoji Support"},{"categories":null,"content":"Written in Go, Hugo is an open source static site generator available under the Apache Licence 2.0. Hugo supports TOML, YAML and JSON data file types, Markdown and HTML content files and uses shortcodes to add rich content. Other notable features are taxonomies, multilingual mode, image processing, custom output formats, HTML/CSS/JS minification and support for Sass SCSS workflows.\nHugo makes use of a variety of open source projects including:\n https://github.com/yuin/goldmark  https://github.com/alecthomas/chroma  https://github.com/muesli/smartcrop  https://github.com/spf13/cobra  https://github.com/spf13/viper   Hugo is ideal for blogs, corporate websites, creative portfolios, online magazines, single page applications or even a website with thousands of pages.\nHugo is for people who want to hand code their own website without worrying about setting up complicated runtimes, dependencies and databases.\nWebsites built with Hugo are extremelly fast, secure and can be deployed anywhere including, AWS, GitHub Pages, Heroku, Netlify and any other hosting provider.\nLearn more and contribute on GitHub .\n","date":"Feb 28, 2019","img":"","permalink":"https://parkman.top/en/about/","series":null,"tags":null,"title":"About"},{"categories":["Templete"],"content":"This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.\nHeadings The following HTML \u0026lt;h1\u0026gt;—\u0026lt;h6\u0026gt; elements represent six levels of section headings. \u0026lt;h1\u0026gt; is the highest section level while \u0026lt;h6\u0026gt; is the lowest.\n1# H1 2## H2 3### H3 4#### H4 5##### H5 6###### H6 H1 H2 H3 H4 H5 H6 Paragraph Xerum, whither I will or will not explain who is in pain. When the water comes with pleasure, it is brought to you by the pain of the pain, or the parist, or the dollo, for he who grieves with pleasure is experienced in the matter, or the things which he may lie in contact with, and you will be moved as cus worthy to be covered, will he have an obligation to follow the heart of the things that are the same? For the pig is to be raised, when it is situated on a raft or all the other birds? Because For, I am all the face of the core, and they annoy others, and evelece he invites them, so that I may either call them, or if I may cast them in flight. Ri hates, to which the water will cover and face itself you are exerum sate edifice pains and dew those, temped molorro ration will volorro you with pains sperchicium faceata tiatia prat.\nIt goes? Since you\u0026rsquo;re a sack, you won\u0026rsquo;t see anything you hate or hate on it.\nBlockquotes The blockquote element represents content that is quoted from another source, optionally with a citation which must be within a footer or cite element, and optionally with in-line changes such as annotations and abbreviations.\nBlockquote without attribution 1\u0026gt; Tiam, ad mint andaepu dandae nostion secatur sequo quae. 2\u0026gt; **Note** that you can use *Markdown syntax* within a blockquote.  Tiam, ad mint andaepu dandae nostion secatur sequo quae. Note that you can use Markdown syntax within a blockquote.\n Blockquote with attribution 1\u0026gt; Don\u0026#39;t communicate by sharing memory, share memory by communicating.\u0026lt;br\u0026gt; 2\u0026gt; — \u0026lt;cite\u0026gt;Rob Pike[^1]\u0026lt;/cite\u0026gt; 3 4[^1]: The above quote is excerpted from Rob Pike\u0026#39;s [talk](https://www.youtube.com/watch?v=PAAkCSZUG1c) during Gopherfest, November 18, 2015.  Don\u0026rsquo;t communicate by sharing memory, share memory by communicating.— Rob Pike1 Tables Tables aren\u0026rsquo;t part of the core Markdown spec, but Hugo supports supports them out-of-the-box.\n   Name Age     Bob 27   Alice 23    Inline Markdown within tables    Italics Bold Code     italics bold code    Code Blocks Code block with backticks 1\u0026lt;!doctype html\u0026gt; 2\u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; 3\u0026lt;head\u0026gt; 4\u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; 5\u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; 6\u0026lt;/head\u0026gt; 7\u0026lt;body\u0026gt; 8\u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; 9\u0026lt;/body\u0026gt; 10\u0026lt;/html\u0026gt; Code block with Hugo\u0026rsquo;s internal highlight shortcode 1\u0026lt;!doctype html\u0026gt; 2\u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; 3\u0026lt;head\u0026gt; 4\u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; 5\u0026lt;title\u0026gt;Another Example HTML5 Document\u0026lt;/title\u0026gt; 6\u0026lt;/head\u0026gt; 7\u0026lt;body\u0026gt; 8\u0026lt;p\u0026gt;A looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong text\u0026lt;/p\u0026gt; 9\u0026lt;/body\u0026gt; 10\u0026lt;/html\u0026gt; List Types Ordered List  First item Second item Third item  Unordered List  List item Another item And another item   List item Another item And another item  Nested List  Fruit  Apple Orange Banana   Dairy  Milk Cheese    TODO List  Done WIP  Other Elements — abbr, sub, sup, kbd, mark GIFis a bitmap image format.\nH2O\nXn+ Yn= ZnPress CTRL+ALT+Deleteto end the session.\nMost salamandersare nocturnal, and hunt for insects, worms, and other small creatures.\n  The above quote is excerpted from Rob Pike\u0026rsquo;s talk during Gopherfest, November 18, 2015.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n  ","date":"Nov 9, 2018","img":"https://parkman.top/images/markdown.png","permalink":"https://parkman.top/en/posts/templete/markdown-syntax/","series":[],"tags":["Markdown"],"title":"Markdown 1  Syntax Guide"},{"categories":null,"content":"title = \u0026ldquo;VASP mbj\u0026rdquo; date = 2021-09-14T18:20:31+08:00 draft = false author = \u0026ldquo;parkman\u0026rdquo; description = \u0026ldquo;VASP 学习\u0026rdquo; featured = true categories = [ ] tags = [\u0026lsquo;VASP\u0026rsquo;,\u0026lsquo;DFT\u0026rsquo; ] series = [ ] aliases = [] images = [] toc = true math = true +++\n今天来学习一下 vasp的mbj计算\nmBJ是modified Becke Johnson的缩写。 Becke指的是 Axel D.Becke，Johnson则是他的原学生、现同事Erin R. Johnson\nmBJ 的发展历程 先看一下HSE  严格的DFT交换关联泛函应该是依赖于电子数变化所导致的阶跃变化的电荷密度的，本质上是不连续的，而我们通常把这玩意做成连续的了，就是所谓的derivative discontinuity问题 自相互作用误差(self-interaction error, SIE)，简而言之DFT存在过度离域化的占据态而Hartree-Fock (HF) 存在过度离域化空态的问题。这样的结果就是他们俩一个推高了占据态能量，而另一个推高了空态的能量，相当于一个低估、一个高估了能隙。实践中大家会用HSE泛函，引入了25%的HF exchange和DFT混合在一起来“对付”这个问题。\n这里的25%是从PBE0继承过来的，HSE的无屏蔽极限就是PBE0。PBE0里这个25%则是John Perdew大神（没错就是PBE的P）通过细致的观察和敏锐的洞察力给出来的。他把HF的占比写为1/n的形式，而n可以跟多体微扰修正阶数联系起来。对于大部分 闭壳层分子 而言，MP4（四阶多体微扰修正）已经足够准确了，就有了25%(0.25)这个系数。\nHSE的加速 2006 Becke 和 Johnson J. Chem. Phys. 124, 221101 (2006); https://doi.org/10.1063/1.2213970 2009 Peter Blaha 和 Fabien Tran VASP mbj 计算流程 1) 用GGA/LDA/VDW-DF等做结构优化 2) 做LDA/GGA总能计算，写下波函数 3) 读前面的波函数，做自洽的mBJ计算 4) 微扰 mBJ VASP mbj 例子 微扰 SCF SCF+BAND 用VASPKIT303和251产生KPOINTS文件，同时包含布里渊区撒点的K点K-mesh和高对称点连线K-path。K-mesh使用正常的权重，K-path使用0权重。（和HSE一样） 1 echo 303 \u0026gt; vaspkit 2 修改 Kpath.in 文件 3 echo 251;echo 2 ;echo 0.03;echo 0.04 \u0026gt;vaspkit\n LASPH = .TRUE.  one step MBJ ICHARG = 0 NELM = 1 NELMDL = 1 METAGGA = MBJ  extract cmBJ\n1grep CMBJ OUTCAR exact diagonalization CMBJ = \u0026lt;from last step OUTCAR\u0026gt; ALGO = EXACT  full scf 接 SCF+BAND 的文件 ICHARG = 0 NELM = 200(\u0026gt;200) METAGGA = MBJ LASPH = .TRUE.\nHSE 同样接 SCF+BAND 的文件\n# HSE ICHARG = 1 LHFCALC = .TRUE. AEXX = 0.25 HFSCREEN = 0.2 ALGO = Damped # or Damped TIME = 0.4 ","date":"Jan 1, 0001","img":"","permalink":"https://parkman.top/en/posts/dft/vasp_mbj/","series":null,"tags":null,"title":""},{"categories":null,"content":"title=\u0026ldquo;TB_SlaterKoster with Overlap\u0026rdquo; date= 2021-09-17T20:52:27+08:00 draft= false author = \u0026ldquo;parkman\u0026rdquo; description = \u0026ldquo;wiki templete\u0026rdquo; featured = true categories = [ ] tags = [ \u0026lsquo;physics\u0026rsquo; ] series = [ ] aliases = [] images = [ ] toc = true math = true +++\nTB reference\n","date":"Jan 1, 0001","img":"","permalink":"https://parkman.top/en/posts/tb/tb_slaterkoster_overlap/","series":null,"tags":null,"title":""}]